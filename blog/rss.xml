<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>ahKevinXy Blog</title>
        <link>https://ahkevinxy.github.io/blog</link>
        <description>ahKevinXy Blog</description>
        <lastBuildDate>Fri, 09 Jun 2023 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>zh-Hans</language>
        <item>
            <title><![CDATA[github workflows]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/06/09/github-workflows</link>
            <guid>https://ahkevinxy.github.io/blog/2023/06/09/github-workflows</guid>
            <pubDate>Fri, 09 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[github workflows  å‘å¸ƒ]]></description>
            <content:encoded><![CDATA[<p>å·¥ä½œæµæ˜¯ä¸€ä¸ªå¯é…ç½®çš„è‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼Œå°†è¿è¡Œä¸€ä¸ªæˆ–å¤šä¸ªä½œä¸šã€‚å·¥ä½œæµæ˜¯ç”±ç­¾å…¥åˆ°å­˜å‚¨åº“ä¸­çš„YAMLæ–‡ä»¶å®šä¹‰çš„ï¼Œå½“å­˜å‚¨åº“ä¸­çš„äº‹ä»¶è§¦å‘å·¥ä½œæµæ—¶ï¼Œå·¥ä½œæµå°±ä¼šè¿è¡Œï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨è§¦å‘å·¥ä½œæµï¼Œæˆ–è€…æŒ‰ç…§å·²å®šä¹‰çš„æ—¶é—´è¡¨è§¦å‘å·¥ä½œæµã€‚</p><p>å·¥ä½œæµå®šä¹‰åœ¨å­˜å‚¨åº“çš„.github/ Workflowsç›®å½•ä¸­ï¼Œå¹¶ä¸”å­˜å‚¨åº“å¯ä»¥æœ‰å¤šä¸ªå·¥ä½œæµï¼Œæ¯ä¸ªå·¥ä½œæµå¯ä»¥æ‰§è¡Œä¸€ç»„ä¸åŒçš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥æœ‰ä¸€ä¸ªå·¥ä½œæµæ¥æ„å»ºå’Œæµ‹è¯•æ‹‰å–è¯·æ±‚ï¼Œå¦ä¸€ä¸ªå·¥ä½œæµåœ¨æ¯æ¬¡åˆ›å»ºå‘å¸ƒæ—¶éƒ¨ç½²æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œè¿˜æœ‰å¦ä¸€ä¸ªå·¥ä½œæµåœ¨æ¯æ¬¡æœ‰äººæ‰“å¼€æ–°é—®é¢˜æ—¶æ·»åŠ æ ‡ç­¾ã€‚</p><p><a href="https://docs.github.com/zh/actions/using-workflows/about-workflows" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></p><h1>ç©è½¬github ä¹‹ workflows</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflows-èƒ½åšå“ªäº›">workflows èƒ½åšå“ªäº›<a href="#workflows-èƒ½åšå“ªäº›" class="hash-link" aria-label="workflows èƒ½åšå“ªäº›çš„ç›´æ¥é“¾æ¥" title="workflows èƒ½åšå“ªäº›çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä½•ä½¿ç”¨-workflows">å¦‚ä½•ä½¿ç”¨ workflows<a href="#å¦‚ä½•ä½¿ç”¨-workflows" class="hash-link" aria-label="å¦‚ä½•ä½¿ç”¨ workflowsçš„ç›´æ¥é“¾æ¥" title="å¦‚ä½•ä½¿ç”¨ workflowsçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¦‚ä½•å‘å¸ƒblog-é€šè¿‡workflows">å¦‚ä½•å‘å¸ƒblog é€šè¿‡workflows<a href="#å¦‚ä½•å‘å¸ƒblog-é€šè¿‡workflows" class="hash-link" aria-label="å¦‚ä½•å‘å¸ƒblog é€šè¿‡workflowsçš„ç›´æ¥é“¾æ¥" title="å¦‚ä½•å‘å¸ƒblog é€šè¿‡workflowsçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å¸ƒè‡ªå·±çš„-workflows">å‘å¸ƒè‡ªå·±çš„ workflows<a href="#å‘å¸ƒè‡ªå·±çš„-workflows" class="hash-link" aria-label="å‘å¸ƒè‡ªå·±çš„ workflowsçš„ç›´æ¥é“¾æ¥" title="å‘å¸ƒè‡ªå·±çš„ workflowsçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="æ€»ç»“çš„ç›´æ¥é“¾æ¥" title="æ€»ç»“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>github</category>
            <category>çŸ¥è¯†</category>
            <category>ç©è½¬github</category>
        </item>
        <item>
            <title><![CDATA[github .github ç›®å½•ä»‹ç»]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/06/05/github</link>
            <guid>https://ahkevinxy.github.io/blog/2023/06/05/github</guid>
            <pubDate>Mon, 05 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[github .githubç›®å½•ä»‹ç» github ä½ ä¸çŸ¥é“çš„ç§˜å¯†]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-ä»‹ç»">github ä»‹ç»<a href="#github-ä»‹ç»" class="hash-link" aria-label="github ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="github ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>GitHub æ˜¯ä¸€ä¸ªç”¨äºç‰ˆæœ¬æ§åˆ¶å’Œåä½œçš„ä»£ç æ‰˜ç®¡å¹³å°ã€‚ å®ƒå…è®¸æ‚¨å’Œå…¶ä»–äººéšæ—¶éšåœ°ååŒå¤„ç†é¡¹ç›®ã€‚</p><p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2306051" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è®¾ç½®-git">è®¾ç½® git<a href="#è®¾ç½®-git" class="hash-link" aria-label="è®¾ç½® gitçš„ç›´æ¥é“¾æ¥" title="è®¾ç½® gitçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºä»“åº“">åˆ›å»ºä»“åº“<a href="#åˆ›å»ºä»“åº“" class="hash-link" aria-label="åˆ›å»ºä»“åº“çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºä»“åº“çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºä»“åº“åˆ†æ”¯">åˆ›å»ºä»“åº“åˆ†æ”¯<a href="#åˆ›å»ºä»“åº“åˆ†æ”¯" class="hash-link" aria-label="åˆ›å»ºä»“åº“åˆ†æ”¯çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºä»“åº“åˆ†æ”¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚ä¸é¡¹ç›®">å‚ä¸é¡¹ç›®<a href="#å‚ä¸é¡¹ç›®" class="hash-link" aria-label="å‚ä¸é¡¹ç›®çš„ç›´æ¥é“¾æ¥" title="å‚ä¸é¡¹ç›®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¤¾äº¤åŒ–">ç¤¾äº¤åŒ–<a href="#ç¤¾äº¤åŒ–" class="hash-link" aria-label="ç¤¾äº¤åŒ–çš„ç›´æ¥é“¾æ¥" title="ç¤¾äº¤åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-é€šä¿¡">github é€šä¿¡<a href="#github-é€šä¿¡" class="hash-link" aria-label="github é€šä¿¡çš„ç›´æ¥é“¾æ¥" title="github é€šä¿¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="github-è¯æ±‡è¡¨">github è¯æ±‡è¡¨<a href="#github-è¯æ±‡è¡¨" class="hash-link" aria-label="github è¯æ±‡è¡¨çš„ç›´æ¥é“¾æ¥" title="github è¯æ±‡è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="git-å¤‡å¿˜æ¸…å•">git å¤‡å¿˜æ¸…å•<a href="#git-å¤‡å¿˜æ¸…å•" class="hash-link" aria-label="git å¤‡å¿˜æ¸…å•çš„ç›´æ¥é“¾æ¥" title="git å¤‡å¿˜æ¸…å•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å­¦ä¹ èµ„æº">å­¦ä¹ èµ„æº<a href="#å­¦ä¹ èµ„æº" class="hash-link" aria-label="å­¦ä¹ èµ„æºçš„ç›´æ¥é“¾æ¥" title="å­¦ä¹ èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>github</category>
            <category>çŸ¥è¯†</category>
        </item>
        <item>
            <title><![CDATA[æ˜¾å¡å‚æ•°ä»‹ç»]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/06/02/graphics_card</link>
            <guid>https://ahkevinxy.github.io/blog/2023/06/02/graphics_card</guid>
            <pubDate>Fri, 02 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[é«˜ç«¯æ˜¾å¡ä»‹ç»,ä»»ä½•é€‰æ‹©æ˜¾å¡,æ˜¾å¡ä½ éœ€è¦æ‡‚çš„çŸ¥è¯†]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php?type=2306021" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2306021" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç‹¬ç«‹æ˜¾å¡">ç‹¬ç«‹æ˜¾å¡<a href="#ç‹¬ç«‹æ˜¾å¡" class="hash-link" aria-label="ç‹¬ç«‹æ˜¾å¡çš„ç›´æ¥é“¾æ¥" title="ç‹¬ç«‹æ˜¾å¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é›†æˆæ˜¾å¡">é›†æˆæ˜¾å¡<a href="#é›†æˆæ˜¾å¡" class="hash-link" aria-label="é›†æˆæ˜¾å¡çš„ç›´æ¥é“¾æ¥" title="é›†æˆæ˜¾å¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>çŸ¥è¯†</category>
            <category>ç™¾ç§‘</category>
        </item>
        <item>
            <title><![CDATA[docusaurus bing SEO ä¼˜åŒ–]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/31/bing</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/31/bing</guid>
            <pubDate>Wed, 31 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[bing docusaurus seo ä¼˜åŒ– ç»†åˆ™ æœç´¢å¼•æ“ä¼˜åŒ–]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php?type=2305311" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305311" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="docusaurus-seo">docusaurus seo<a href="#docusaurus-seo" class="hash-link" aria-label="docusaurus seoçš„ç›´æ¥é“¾æ¥" title="docusaurus seoçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="page-metadata">page metadata<a href="#page-metadata" class="hash-link" aria-label="page metadataçš„ç›´æ¥é“¾æ¥" title="page metadataçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">meta</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">keywords</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">content</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag attr-value" style="color:#e3116c">cooking, blog</span><span class="token tag attr-value punctuation" style="color:#393A34">"</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">head</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¤´éƒ¨è¿›è¡Œé…ç½®">å¤´éƒ¨è¿›è¡Œé…ç½®<a href="#å¤´éƒ¨è¿›è¡Œé…ç½®" class="hash-link" aria-label="å¤´éƒ¨è¿›è¡Œé…ç½®çš„ç›´æ¥é“¾æ¥" title="å¤´éƒ¨è¿›è¡Œé…ç½®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token front-matter-block punctuation" style="color:#393A34">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">title</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> ç»™æœç´¢å¼•æ“çœ‹çš„æ ‡é¢˜ï¼›å¯èƒ½å’Œæ­£æ–‡æ ‡é¢˜ä¸ä¸€æ ·</span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> å…³äºæ­¤é¡µçš„ç®€çŸ­æè¿°</span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">image</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> åœ¨ç¤¾äº¤åª’ä½“å¡ç‰‡ä¸­æ˜¾ç¤ºçš„ç¼©ç•¥å›¾</span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">keywords</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">[</span><span class="token front-matter-block front-matter yaml language-yaml">æè¿°</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">,</span><span class="token front-matter-block front-matter yaml language-yaml"> ä¸­å¿ƒçš„</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">,</span><span class="token front-matter-block front-matter yaml language-yaml"> å…³é”®è¯</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">]</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:#393A34">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åœ¨layout-ç»„ä»¶æ·»åŠ head-å…ƒç´ -component">åœ¨layout ç»„ä»¶æ·»åŠ <code>&lt;Head&gt;</code> å…ƒç´  component.<a href="#åœ¨layout-ç»„ä»¶æ·»åŠ head-å…ƒç´ -component" class="hash-link" aria-label="åœ¨layout-ç»„ä»¶æ·»åŠ head-å…ƒç´ -componentçš„ç›´æ¥é“¾æ¥" title="åœ¨layout-ç»„ä»¶æ·»åŠ head-å…ƒç´ -componentçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> React </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'react'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Layout </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@theme/Layout'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Head </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'@docusaurus/Head'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">page</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Layout title</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"Page"</span><span class="token plain"> description</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"A React page demo"</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Head</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">meta property</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"og:image"</span><span class="token plain"> content</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">"image.png"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Head</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">Layout</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“æ„åŒ–ç›®å½•">ç»“æ„åŒ–ç›®å½•<a href="#ç»“æ„åŒ–ç›®å½•" class="hash-link" aria-label="ç»“æ„åŒ–ç›®å½•çš„ç›´æ¥é“¾æ¥" title="ç»“æ„åŒ–ç›®å½•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">aside</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">aside</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">nav</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">nav</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">main</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">main</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sitemap-file">Sitemap file<a href="#sitemap-file" class="hash-link" aria-label="Sitemap fileçš„ç›´æ¥é“¾æ¥" title="Sitemap fileçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Docusaurus provides the @docusaurus/plugin-sitemap plugin, which is shipped with preset-classic by default. It autogenerates a sitemap.xml file which will be available at https://example.com/[baseUrl]/sitemap.xml after the production build. ç«™ç‚¹åœ°å›¾ä¿¡æ¯å¯ä»¥å¸®åŠ©æœç´¢å¼•æ“çˆ¬è™«æ›´å‡†ç¡®åœ°çˆ¬å–ä½ çš„ç½‘ç«™ã€‚</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bing-seo">bing SEO<a href="#bing-seo" class="hash-link" aria-label="bing SEOçš„ç›´æ¥é“¾æ¥" title="bing SEOçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å°†é¡µé¢æºä»£ç çš„ <code>&lt;meta description&gt;</code> æ ‡è®°ä¸­çš„æè¿°é•¿åº¦æ›´æ”¹ä¸ºä»‹äº 25 åˆ° 160 ä¸ªå­—ç¬¦ä¹‹é—´ã€‚</p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>bing</category>
            <category>seo</category>
        </item>
        <item>
            <title><![CDATA[Hugo  stack  ä¸»é¢˜å®‰è£…ä¸éƒ¨ç½²]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/31/hugo</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/31/hugo</guid>
            <pubDate>Wed, 31 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305312" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºgithub-è´¦æˆ·">åˆ›å»ºgithub è´¦æˆ·<a href="#åˆ›å»ºgithub-è´¦æˆ·" class="hash-link" aria-label="åˆ›å»ºgithub è´¦æˆ·çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºgithub è´¦æˆ·çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://ahkevinxy.github.io/blog/2023/05/29/vercel" target="_blank" rel="noopener noreferrer">å¦‚ä½•åˆ›å»ºgithub å¹¶åˆ›å»º github pages</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="git-åŸºç¡€çŸ¥è¯†">git åŸºç¡€çŸ¥è¯†<a href="#git-åŸºç¡€çŸ¥è¯†" class="hash-link" aria-label="git åŸºç¡€çŸ¥è¯†çš„ç›´æ¥é“¾æ¥" title="git åŸºç¡€çŸ¥è¯†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://ahkevinxy.github.io/docs/backend/git/base" target="_blank" rel="noopener noreferrer">ç®€å•çš„git ä½¿ç”¨æŠ€å·§</a></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># åˆå§‹git é¡¹ç›®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> init </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ é¡¹ç›®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># .è¡¨ç¤ºæ‰€æœ‰ ä¹Ÿå¯ä»¥æŒ‡å®šæ–‡ä»¶æ·»åŠ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æ·»åŠ æäº¤è¯´æ˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m</span><span class="token string" style="color:#e3116c">''</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># '' åŠ å…¥è¯´æ˜ä»‹ç»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æäº¤ ä»£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain">  push </span><span class="token comment" style="color:#999988;font-style:italic"># å¦‚æœç¬¬ä¸€æ¬¡ å¯èƒ½ä¼šæç¤º git push --set-upstream origin master</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨--ä¸»é¢˜å·¥å…·">ä½¿ç”¨  ä¸»é¢˜å·¥å…·<a href="#ä½¿ç”¨--ä¸»é¢˜å·¥å…·" class="hash-link" aria-label="ä½¿ç”¨  ä¸»é¢˜å·¥å…·çš„ç›´æ¥é“¾æ¥" title="ä½¿ç”¨  ä¸»é¢˜å·¥å…·çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://github.com/CaiJimmy/hugo-theme-stack-starter" target="_blank" rel="noopener noreferrer">æ‰“å¼€ä¸»é¢˜è„šæ‰‹æ¶</a></p><p>ç‚¹å‡» <code>use this template</code> é€‰æ‹© Create a new repository åˆ›å»ºå±äºè‡ªå·±çš„ github pages</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰“å¼€è‡ªå·±åˆ›å»ºçš„é¡¹ç›®">æ‰“å¼€è‡ªå·±åˆ›å»ºçš„é¡¹ç›®<a href="#æ‰“å¼€è‡ªå·±åˆ›å»ºçš„é¡¹ç›®" class="hash-link" aria-label="æ‰“å¼€è‡ªå·±åˆ›å»ºçš„é¡¹ç›®çš„ç›´æ¥é“¾æ¥" title="æ‰“å¼€è‡ªå·±åˆ›å»ºçš„é¡¹ç›®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç‚¹å‡» code  é€‰æ‹© code spaces </p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸‹è½½-hugo">ä¸‹è½½ hugo<a href="#ä¸‹è½½-hugo" class="hash-link" aria-label="ä¸‹è½½ hugoçš„ç›´æ¥é“¾æ¥" title="ä¸‹è½½ hugoçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>é€‰æ‹©å¯¹åº”çš„ hugo ç‰ˆæœ¬ <code>0.111.3</code></p><p><a href="https://github.com/gohugoio/hugo/releases/tag/v0.111.3" target="_blank" rel="noopener noreferrer">ä¸‹è½½åœ°å€</a></p><p>é€‰æ‹© hugo_extended å¼€å¤´ä¸‹è½½</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¿®æ”¹-github-workflows-æ–‡ä»¶">ä¿®æ”¹ github workflows æ–‡ä»¶<a href="#ä¿®æ”¹-github-workflows-æ–‡ä»¶" class="hash-link" aria-label="ä¿®æ”¹ github workflows æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="ä¿®æ”¹ github workflows æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li>deploy.yml</li></ul><div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy to Github Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">master</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">master</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Cache Hugo resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/cache@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">cache-name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> cache</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hugo</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> resources</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> env.cache</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">name </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">go@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">go-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"^1.17.0"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> go version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Cache Go Modules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/cache@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ~/.cache/go-build</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ~/go/pkg/mod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> runner.os </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">go</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> hashFiles('</span><span class="token important">**/go.sum')</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">restore-keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ${{ runner.os }}-go-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Setup Hugo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hugo@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">hugo-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"0.111.3"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">extended</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hugo </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">minify </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy ğŸš€</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> JamesIves/github</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deploy</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">action@v4.4.2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">branch</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">folder</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> public</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">clean</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">single-commit</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>å˜æ›´
hugo-version: "latest" ==&gt; hugo-version: "0.111.3"</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è®¾ç½®-é¡¹ç›®--settings">è®¾ç½® é¡¹ç›®  settings<a href="#è®¾ç½®-é¡¹ç›®--settings" class="hash-link" aria-label="è®¾ç½® é¡¹ç›®  settingsçš„ç›´æ¥é“¾æ¥" title="è®¾ç½® é¡¹ç›®  settingsçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>ç‚¹å‡» Actions </li><li>é€‰æ‹© General </li><li>é€‰æ‹© <code>Workflow permissions</code> </li><li>é€‰æ‹© <code> Read and write permissions</code> </li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºæ–°çš„é¡µé¢">åˆ›å»ºæ–°çš„é¡µé¢<a href="#åˆ›å»ºæ–°çš„é¡µé¢" class="hash-link" aria-label="åˆ›å»ºæ–°çš„é¡µé¢çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæ–°çš„é¡µé¢çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> hugo new post/2023/05/31/new.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>éœ€è¦æ”¹ æ–‡ä»¶å¤´</p><div class="language-markdown codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-markdown codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token front-matter-block punctuation" style="color:#393A34">---</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">title</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml string" style="color:#e3116c">"Hugo"</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">description</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">date</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml datetime number" style="color:#36acaa">2023-05-31T08:42:48Z</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">image</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">math</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">license</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">hidden</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#36acaa">false</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">comments</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#36acaa">true</span><span class="token front-matter-block front-matter yaml language-yaml"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block front-matter yaml language-yaml"></span><span class="token front-matter-block front-matter yaml language-yaml key atrule" style="color:#00a4db">draft</span><span class="token front-matter-block front-matter yaml language-yaml punctuation" style="color:#393A34">:</span><span class="token front-matter-block front-matter yaml language-yaml"> </span><span class="token front-matter-block front-matter yaml language-yaml boolean important" style="color:#36acaa">true</span><span class="token front-matter-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token front-matter-block"></span><span class="token front-matter-block punctuation" style="color:#393A34">---</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>éœ€è¦å°† <code>draft</code>: <code>true</code> åˆ é™¤ </p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æäº¤å¯¹åº”ä»£ç ">æäº¤å¯¹åº”ä»£ç <a href="#æäº¤å¯¹åº”ä»£ç " class="hash-link" aria-label="æäº¤å¯¹åº”ä»£ç çš„ç›´æ¥é“¾æ¥" title="æäº¤å¯¹åº”ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‘½ä»¤è¡Œæäº¤">å‘½ä»¤è¡Œæäº¤<a href="#å‘½ä»¤è¡Œæäº¤" class="hash-link" aria-label="å‘½ä»¤è¡Œæäº¤çš„ç›´æ¥é“¾æ¥" title="å‘½ä»¤è¡Œæäº¤çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> </span><span class="token builtin class-name">.</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m</span><span class="token string" style="color:#e3116c">'test'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="githubdesktop">githubDesktop<a href="#githubdesktop" class="hash-link" aria-label="githubDesktopçš„ç›´æ¥é“¾æ¥" title="githubDesktopçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>hugo</category>
            <category>blog</category>
        </item>
        <item>
            <title><![CDATA[vercelå…è´¹blog æ­å»ºæ•™ç¨‹]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/29/vercel</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/29/vercel</guid>
            <pubDate>Mon, 29 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305291" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨å†Œ-github">æ³¨å†Œ github<a href="#æ³¨å†Œ-github" class="hash-link" aria-label="æ³¨å†Œ githubçš„ç›´æ¥é“¾æ¥" title="æ³¨å†Œ githubçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>æ³¨å†Œåœ°å€ <a href="https://github.com/signup?source=login" target="_blank" rel="noopener noreferrer">https://github.com/signup?source=login</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºå±äº-github-pages-é¡¹ç›®-httpsgithubcomnew">åˆ›å»ºå±äº github pages é¡¹ç›® <a href="https://github.com/new" target="_blank" rel="noopener noreferrer">https://github.com/new</a><a href="#åˆ›å»ºå±äº-github-pages-é¡¹ç›®-httpsgithubcomnew" class="hash-link" aria-label="åˆ›å»ºå±äº-github-pages-é¡¹ç›®-httpsgithubcomnewçš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºå±äº-github-pages-é¡¹ç›®-httpsgithubcomnewçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è§„åˆ™ åå­— + github.io</p><p><a target="_blank" href="/assets/files/blog_vercel_01-6bd707605454587a2489b2888d70516e.png"><img loading="lazy" alt="æ³¨å†Œ github pages" src="/assets/images/blog_vercel_01-6bd707605454587a2489b2888d70516e.png" width="1388" height="844" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¸Šä¼ ä»£ç ">ä¸Šä¼ ä»£ç <a href="#ä¸Šä¼ ä»£ç " class="hash-link" aria-label="ä¸Šä¼ ä»£ç çš„ç›´æ¥é“¾æ¥" title="ä¸Šä¼ ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># git æœªè®¾ç½® email æˆ–è€…username éœ€è¦è®¾ç½®ä¸€ä¸‹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config --global user.name </span><span class="token string" style="color:#e3116c">"Your Name"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># è‡ªå·±githubåç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config --global user.email </span><span class="token string" style="color:#e3116c">"youremail@yourdomain.com"</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># è‡ªå·±github æ³¨å†Œé‚®ç®±</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># æŸ¥çœ‹æ˜¯å¦ç”Ÿæ•ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> config --list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"# Libxy.github.io"</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> README.md</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> commit -m </span><span class="token string" style="color:#e3116c">"first commit"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> branch -M main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> remote </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> origin https://github.com/Libxy/Libxy.github.io.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push -u origin main</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ³¨å†Œ-verce">æ³¨å†Œ verce<a href="#æ³¨å†Œ-verce" class="hash-link" aria-label="æ³¨å†Œ verceçš„ç›´æ¥é“¾æ¥" title="æ³¨å†Œ verceçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p><a href="https://vercel.com/" target="_blank" rel="noopener noreferrer">https://vercel.com/</a></p></blockquote><p>ä½¿ç”¨github å¿«æ·ç™»å½•</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºé¡¹ç›®">åˆ›å»ºé¡¹ç›®<a href="#åˆ›å»ºé¡¹ç›®" class="hash-link" aria-label="åˆ›å»ºé¡¹ç›®çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºé¡¹ç›®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p><a href="https://vercel.com/new" target="_blank" rel="noopener noreferrer">https://vercel.com/new</a></p></blockquote><p>é€‰æ‹© github é¡¹ç›®  <a href="https://github.com/Libxy/Libxy.github.io.git" target="_blank" rel="noopener noreferrer">https://github.com/Libxy/Libxy.github.io.git</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¼å…¥é¡¹ç›®">å¯¼å…¥é¡¹ç›®<a href="#å¯¼å…¥é¡¹ç›®" class="hash-link" aria-label="å¯¼å…¥é¡¹ç›®çš„ç›´æ¥é“¾æ¥" title="å¯¼å…¥é¡¹ç›®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a target="_blank" href="/assets/files/blog_vercel_02-946eceda662514fc5f726786c0801662.png"><img loading="lazy" alt="å¯¼å…¥é¡¹ç›®" src="/assets/images/blog_vercel_02-946eceda662514fc5f726786c0801662.png" width="910" height="700" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å‘å¸ƒé¡¹ç›®">å‘å¸ƒé¡¹ç›®<a href="#å‘å¸ƒé¡¹ç›®" class="hash-link" aria-label="å‘å¸ƒé¡¹ç›®çš„ç›´æ¥é“¾æ¥" title="å‘å¸ƒé¡¹ç›®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a target="_blank" href="/assets/files/blog_vercel_03-8b81dbfa8a5371cecbef3dd06995b108.png"><img loading="lazy" alt="å‘å¸ƒé¡¹ç›®" src="/assets/images/blog_vercel_03-8b81dbfa8a5371cecbef3dd06995b108.png" width="1526" height="1008" class="img_ev3q"></a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ·»åŠ -domain-æ˜ å°„">æ·»åŠ  domain æ˜ å°„<a href="#æ·»åŠ -domain-æ˜ å°„" class="hash-link" aria-label="æ·»åŠ  domain æ˜ å°„çš„ç›´æ¥é“¾æ¥" title="æ·»åŠ  domain æ˜ å°„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p><a target="_blank" href="/assets/files/blog_vercel_05-0540e57db8e808748ed3b0989457fe90.png"><img loading="lazy" alt="å‘å¸ƒé¡¹ç›®" src="/assets/images/blog_vercel_05-0540e57db8e808748ed3b0989457fe90.png" width="1362" height="855" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è®¿é—®è‡ªå·±çš„æ˜ å°„çš„ç½‘ç«™">è®¿é—®è‡ªå·±çš„æ˜ å°„çš„ç½‘ç«™<a href="#è®¿é—®è‡ªå·±çš„æ˜ å°„çš„ç½‘ç«™" class="hash-link" aria-label="è®¿é—®è‡ªå·±çš„æ˜ å°„çš„ç½‘ç«™çš„ç›´æ¥é“¾æ¥" title="è®¿é—®è‡ªå·±çš„æ˜ å°„çš„ç½‘ç«™çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>vercel</category>
            <category>blog</category>
            <category>å…è´¹</category>
        </item>
        <item>
            <title><![CDATA[æ‹›å•†é“¶è¡Œé“¶ä¼ç›´è” go sdk]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/25/go-cmb</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/25/go-cmb</guid>
            <pubDate>Thu, 25 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305251" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><p><a target="_blank" href="/assets/files/cmb_logo-68457137dfd9694992a692db9e0d05c8.jpeg"><img loading="lazy" alt="æ‹›å•†é“¶è¡Œlogo" src="/assets/images/cmb_logo-68457137dfd9694992a692db9e0d05c8.jpeg" width="1996" height="969" class="img_ev3q"></a></p><p><a href="https://jb.gg/OpenSourceSupport" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://resources.jetbrains.com/storage/products/company/brand/logos/jb_beam.svg" alt="JetBrains Logo (Main) logo" title="logo" class="img_ev3q"></a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»‹ç»">ä»‹ç»<a href="#ä»‹ç»" class="hash-link" aria-label="ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ‹›å•†é“¶è¡Œé“¶ä¼ç›´è”æœåŠ¡</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ‹›å•†é“¶è¡Œæ–‡æ¡£-å®˜ç½‘">æ‹›å•†é“¶è¡Œæ–‡æ¡£ <a href="https://openbiz.cmbchina.com/developer/UI/business/Index.aspx" target="_blank" rel="noopener noreferrer">å®˜ç½‘</a><a href="#æ‹›å•†é“¶è¡Œæ–‡æ¡£-å®˜ç½‘" class="hash-link" aria-label="æ‹›å•†é“¶è¡Œæ–‡æ¡£-å®˜ç½‘çš„ç›´æ¥é“¾æ¥" title="æ‹›å•†é“¶è¡Œæ–‡æ¡£-å®˜ç½‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä½¿ç”¨">ä½¿ç”¨<a href="#ä½¿ç”¨" class="hash-link" aria-label="ä½¿ç”¨çš„ç›´æ¥é“¾æ¥" title="ä½¿ç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go get -u github.com/ahKevinXy/go-cmb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="todo">TODO<a href="#todo" class="hash-link" aria-label="TODOçš„ç›´æ¥é“¾æ¥" title="TODOçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->æ›´æ–° models ä¸º proto å…¼å®¹å…¶ä»–è¯­è¨€</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->ä¼˜åŒ–è¯·æ±‚å‚æ•°</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->å®Œå–„åŠŸèƒ½</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç›®å½•è¯´æ˜">ç›®å½•è¯´æ˜<a href="#ç›®å½•è¯´æ˜" class="hash-link" aria-label="ç›®å½•è¯´æ˜çš„ç›´æ¥é“¾æ¥" title="ç›®å½•è¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><code>cmb_error</code> é”™è¯¯å‚æ•°</li><li><code>config</code>  é…ç½®æ–‡ä»¶</li><li><code>constants</code> å¸¸é‡æ–‡ä»¶</li><li><code>docs</code> æ–‡æ¡£æ–‡ä»¶</li><li><code>handler</code> ä¸šåŠ¡å¤„ç†<ul><li><code>account</code> è´¦æˆ·å¤„ç†</li><li><code>notice</code> é€šçŸ¥</li><li><code>payment</code> æ”¯ä»˜</li><li><code>payroll</code> ä»£å‘</li><li><code>payrool_old</code> ä»£å‘(æ—§)</li><li><code>unit_manager</code> äº¤æ˜“ç®¡å®¶</li></ul></li><li><code>help</code> å·¥å…·ç±»å‡½æ•°</li><li><code>models</code> å®ä¾‹</li><li><code>pkg</code> ç¬¬ä¸‰æ–¹åŒ…</li><li><code>testdata</code> æœ¬åœ°æµ‹è¯•æ•°æ®</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è´¦åŠ¡ç®¡ç†">è´¦åŠ¡ç®¡ç†<a href="#è´¦åŠ¡ç®¡ç†" class="hash-link" aria-label="è´¦åŠ¡ç®¡ç†çš„ç›´æ¥é“¾æ¥" title="è´¦åŠ¡ç®¡ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="äº¤æ˜“ç®¡å®¶">äº¤æ˜“ç®¡å®¶<a href="#äº¤æ˜“ç®¡å®¶" class="hash-link" aria-label="äº¤æ˜“ç®¡å®¶çš„ç›´æ¥é“¾æ¥" title="äº¤æ˜“ç®¡å®¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»£å‘ä»£æ‰£">ä»£å‘ä»£æ‰£<a href="#ä»£å‘ä»£æ‰£" class="hash-link" aria-label="ä»£å‘ä»£æ‰£çš„ç›´æ¥é“¾æ¥" title="ä»£å‘ä»£æ‰£çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="äº¤æ˜“æµæ°´">äº¤æ˜“æµæ°´<a href="#äº¤æ˜“æµæ°´" class="hash-link" aria-label="äº¤æ˜“æµæ°´çš„ç›´æ¥é“¾æ¥" title="äº¤æ˜“æµæ°´çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€å‘è°ƒè¯•">å¼€å‘è°ƒè¯•<a href="#å¼€å‘è°ƒè¯•" class="hash-link" aria-label="å¼€å‘è°ƒè¯•çš„ç›´æ¥é“¾æ¥" title="å¼€å‘è°ƒè¯•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç”Ÿæˆ-testdata-å‚æ•°æ•°æ®">ç”Ÿæˆ testdata å‚æ•°æ•°æ®<a href="#ç”Ÿæˆ-testdata-å‚æ•°æ•°æ®" class="hash-link" aria-label="ç”Ÿæˆ testdata å‚æ•°æ•°æ®çš„ç›´æ¥é“¾æ¥" title="ç”Ÿæˆ testdata å‚æ•°æ•°æ®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># åˆ›å»º testdataç›®å½•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">mkdir</span><span class="token plain"> testdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># ç”Ÿæˆ testdata.go æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rf  testdata.go.template  testdata/testdata.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å½•å…¥æœ¬åœ°æµ‹è¯•æ•°æ®">å½•å…¥æœ¬åœ°æµ‹è¯•æ•°æ®<a href="#å½•å…¥æœ¬åœ°æµ‹è¯•æ•°æ®" class="hash-link" aria-label="å½•å…¥æœ¬åœ°æµ‹è¯•æ•°æ®çš„ç›´æ¥é“¾æ¥" title="å½•å…¥æœ¬åœ°æµ‹è¯•æ•°æ®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> testdata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å•†æˆ·é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserId     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨æˆ·ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Account    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è´¦æˆ·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    UserKey    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ç”¨æˆ·ç§˜é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    AseKey     </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å¯¹ç§°ç§˜é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    BankLinkNo </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ†è¡Œå·</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Sasså¹³å°é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CmbSassName       </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Sass åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CmbSassPrivateKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å¹³å°ç§é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CmbSigdatDefault  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é»˜è®¤å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    CmbUrl            </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é“¶ä¼ç›´è”åœ°å€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>go</category>
            <category>æ‹›å•†é“¶è¡Œ</category>
            <category>sdk</category>
        </item>
        <item>
            <title><![CDATA[MySQLä¸­DATE_FORMAT()å‡½æ•°çš„è¯´æ˜å’Œç®€ä»‹]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/23/mysql</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/23/mysql</guid>
            <pubDate>Tue, 23 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305231" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è·å–æ—¶é—´">è·å–æ—¶é—´<a href="#è·å–æ—¶é—´" class="hash-link" aria-label="è·å–æ—¶é—´çš„ç›´æ¥é“¾æ¥" title="è·å–æ—¶é—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="now-è·å–å½“å‰æ—¶é—´">NOW() è·å–å½“å‰æ—¶é—´<a href="#now-è·å–å½“å‰æ—¶é—´" class="hash-link" aria-label="NOW() è·å–å½“å‰æ—¶é—´çš„ç›´æ¥é“¾æ¥" title="NOW() è·å–å½“å‰æ—¶é—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 2023-05-25 13:17:50</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="curdate-è·å–å½“å‰æ—¥æœŸ">curdate è·å–å½“å‰æ—¥æœŸ<a href="#curdate-è·å–å½“å‰æ—¥æœŸ" class="hash-link" aria-label="curdate è·å–å½“å‰æ—¥æœŸçš„ç›´æ¥é“¾æ¥" title="curdate è·å–å½“å‰æ—¥æœŸçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">--2023-05-25</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="curtime-è·å–å½“å‰æ—¶é—´">CURTIME() è·å–å½“å‰æ—¶é—´<a href="#curtime-è·å–å½“å‰æ—¶é—´" class="hash-link" aria-label="CURTIME() è·å–å½“å‰æ—¶é—´çš„ç›´æ¥é“¾æ¥" title="CURTIME() è·å–å½“å‰æ—¶é—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CURTIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">--  13:17:50</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è·å–å¹´æœˆæ—¥">è·å–å¹´æœˆæ—¥<a href="#è·å–å¹´æœˆæ—¥" class="hash-link" aria-label="è·å–å¹´æœˆæ—¥çš„ç›´æ¥é“¾æ¥" title="è·å–å¹´æœˆæ—¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–å¹´ 2023</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æœˆ 5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DAY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- æ—¥ 25</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ—¶é—´ 13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 17</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- ç§’29</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">--  æˆ–è€…ä»æ—¥æœŸæ ¼å¼å­—ç¬¦ä¸²ä¸­è·å–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2023-05-25 13:17:50'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- 14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ—¶é—´å¤„ç†">æ—¶é—´å¤„ç†<a href="#æ—¶é—´å¤„ç†" class="hash-link" aria-label="æ—¶é—´å¤„ç†çš„ç›´æ¥é“¾æ¥" title="æ—¶é—´å¤„ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æ—¥æœŸå¢åŠ -å‡å°‘">æ—¥æœŸå¢åŠ  å‡å°‘<a href="#æ—¥æœŸå¢åŠ -å‡å°‘" class="hash-link" aria-label="æ—¥æœŸå¢åŠ  å‡å°‘çš„ç›´æ¥é“¾æ¥" title="æ—¥æœŸå¢åŠ  å‡å°‘çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- æ—¶é—´å‡å°‘ä¸€ä¸ªå°æ—¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> date_sub</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">hour</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- æ—¶é—´åŠ ä¸€å¤© </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> date_add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">day</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å…¶ä»–é—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ—¥æœŸæ ¼å¼åŒ–å­—ç¬¦ä¸²è½¬æ—¥æœŸ">æ—¥æœŸæ ¼å¼åŒ–ã€å­—ç¬¦ä¸²è½¬æ—¥æœŸ<a href="#æ—¥æœŸæ ¼å¼åŒ–å­—ç¬¦ä¸²è½¬æ—¥æœŸ" class="hash-link" aria-label="æ—¥æœŸæ ¼å¼åŒ–ã€å­—ç¬¦ä¸²è½¬æ—¥æœŸçš„ç›´æ¥é“¾æ¥" title="æ—¥æœŸæ ¼å¼åŒ–ã€å­—ç¬¦ä¸²è½¬æ—¥æœŸçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="date_format">DATE_FORMAT<a href="#date_format" class="hash-link" aria-label="DATE_FORMATçš„ç›´æ¥é“¾æ¥" title="DATE_FORMATçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>æ ¼å¼åŒ– datetime timestamp</p><ul><li>date æ˜¯è¦æ ¼å¼åŒ–çš„æœ‰æ•ˆæ—¥æœŸ</li><li>format é¢„å®šä¹‰çš„è¯´æ˜ç¬¦</li></ul><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- æ ¼å¼åŒ–å‚è€ƒï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> DATE_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> DATE_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'%Y-%m-%d %H:00:00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å­—ç¬¦ä¸²è½¬æ—¥æœŸ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> str_to_date</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2023-05-25 13:17:50'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 2023-05-25 13:17:50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å…¶å®ƒå‚è€ƒ">å…¶å®ƒå‚è€ƒ<a href="#å…¶å®ƒå‚è€ƒ" class="hash-link" aria-label="å…¶å®ƒå‚è€ƒçš„ç›´æ¥é“¾æ¥" title="å…¶å®ƒå‚è€ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- MySQLæ—¥æœŸæ—¶é—´å¤„ç†å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸï¼š2017-05-12ï¼ˆçªç„¶å‘ç°ä»Šå¤©512ï¼Œæ˜¯ä¸æ˜¯ä¼šæ‹‰é˜²ç©ºè­¦æŠ¥ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> DUAL</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸæ—¶é—´ï¼š2017-05-12 11:41:47</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- åœ¨MySQLé‡Œä¹Ÿå­˜åœ¨å’ŒOracleé‡Œç±»ä¼¼çš„dualè™šæ‹Ÿè¡¨ï¼šå®˜æ–¹å£°æ˜çº¯ç²¹æ˜¯ä¸ºäº†æ»¡è¶³select ... from...è¿™ä¸€ä¹ æƒ¯é—®é¢˜ï¼Œmysqlä¼šå¿½ç•¥å¯¹è¯¥è¡¨çš„å¼•ç”¨ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- é‚£ä¹ˆMySQLä¸­å°±ä¸ç”¨DUALäº†å§ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸæ—¶é—´ï¼š2017-05-12 11:41:55</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- é™¤äº† now() å‡½æ•°èƒ½è·å¾—å½“å‰çš„æ—¥æœŸæ—¶é—´å¤–ï¼ŒMySQL ä¸­è¿˜æœ‰ä¸‹é¢çš„å‡½æ•°ï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:19:31</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:19:51</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> LOCALTIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:20:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> LOCALTIME</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:20:10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> LOCALTIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:20:21(v4.0.6)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> LOCALTIMESTAMP</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:20:30(v4.0.6)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- è¿™äº›æ—¥æœŸæ—¶é—´å‡½æ•°ï¼Œéƒ½ç­‰åŒäº now()ã€‚é‰´äº now() å‡½æ•°ç®€çŸ­æ˜“è®°ï¼Œå»ºè®®æ€»æ˜¯ä½¿ç”¨ now()æ¥æ›¿ä»£ä¸Šé¢åˆ—å‡ºçš„å‡½æ•°ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> SYSDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸæ—¶é—´ï¼š2017-05-12 11:42:03</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- sysdate() æ—¥æœŸæ—¶é—´å‡½æ•°è·Ÿ now() ç±»ä¼¼ï¼Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- ä¸åŒä¹‹å¤„åœ¨äºï¼šnow() åœ¨æ‰§è¡Œå¼€å§‹æ—¶å€¼å°±å¾—åˆ°äº†;sysdate() åœ¨å‡½æ•°æ‰§è¡Œæ—¶åŠ¨æ€å¾—åˆ°å€¼ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- çœ‹ä¸‹é¢çš„ä¾‹å­å°±æ˜ç™½äº†ï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SLEEP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> SYSDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SLEEP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SYSDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸï¼š2017-05-12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸï¼šç­‰åŒäº CURDATE()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_DATE</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¥æœŸï¼šç­‰åŒäº CURDATE()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CURTIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¶é—´ï¼š11:42:47</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¶é—´ï¼šç­‰åŒäº CURTIME()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIME</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¶é—´ï¼šç­‰åŒäº CURTIME()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- è·å¾—å½“å‰ UTC æ—¥æœŸæ—¶é—´å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> UTC_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UTC_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UTC_TIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL è·å¾—å½“å‰æ—¶é—´æˆ³å‡½æ•°ï¼šcurrent_timestamp, current_timestamp()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">CURRENT_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:32:21 | 2017-05-15 10:32:21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL æ—¥æœŸæ—¶é—´ Extractï¼ˆé€‰å–ï¼‰ å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SET</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@dt</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">@dt</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ—¥æœŸï¼š2017-05-15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ—¶é—´ï¼š10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–å¹´ä»½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æœˆä»½</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ—¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ—¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–åˆ†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–ç§’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> MICROSECOND</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ¯«ç§’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> QUARTER</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–å­£åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WEEK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 20 (è·å–å‘¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WEEK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- ****** æµ‹è¯•æ­¤å‡½æ•°åœ¨MySQL5.6ä¸‹æ— æ•ˆ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WEEKOFYEAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- åŒweek()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DAYOFYEAR</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 135 (æ—¥æœŸåœ¨å¹´åº¦ä¸­ç¬¬å‡ å¤©)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DAYOFMONTH</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 5 (æ—¥æœŸåœ¨æœˆåº¦ä¸­ç¬¬å‡ å¤©)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DAYOFWEEK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2 (æ—¥æœŸåœ¨å‘¨ä¸­ç¬¬å‡ å¤©ï¼›å‘¨æ—¥ä¸ºç¬¬ä¸€å¤©)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WEEKDAY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> WEEKDAY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-21 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 6(ä¸dayofweek()éƒ½è¡¨ç¤ºæ—¥æœŸåœ¨å‘¨çš„ç¬¬å‡ å¤©ï¼Œåªæ˜¯å‚è€ƒæ ‡å‡†ä¸åŒï¼Œweekday()å‘¨ä¸€ä¸ºç¬¬0å¤©ï¼Œå‘¨æ—¥ä¸ºç¬¬6å¤©)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> YEARWEEK</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 201720(å¹´å’Œå‘¨)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DAY</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MICROSECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">QUARTER </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">WEEK </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">YEAR_MONTH </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DAY_HOUR </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DAY_MINUTE </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 151037(æ—¥æ—¶åˆ†)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DAY_SECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 15103714(æ—¥æ—¶åˆ†ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">DAY_MICROSECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 15103714123456(æ—¥æ—¶åˆ†ç§’æ¯«ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HOUR_MINUTE </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 1037(æ—¶åˆ†)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HOUR_SECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 103714(æ—¶åˆ†ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">HOUR_MICROSECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 103714123456(æ—¥æ—¶åˆ†ç§’æ¯«ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MINUTE_SECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 3714(åˆ†ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">MINUTE_MICROSECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 3714123456(åˆ†ç§’æ¯«ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">SECOND_MICROSECOND </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 14123456(ç§’æ¯«ç§’)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL Extract() å‡½æ•°é™¤äº†æ²¡æœ‰date(),time() çš„åŠŸèƒ½å¤–ï¼Œå…¶ä»–åŠŸèƒ½ä¸€åº”å…·å…¨ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å¹¶ä¸”è¿˜å…·æœ‰é€‰å–â€˜day_microsecond' ç­‰åŠŸèƒ½ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- æ³¨æ„è¿™é‡Œä¸æ˜¯åªé€‰å– day å’Œ microsecondï¼Œè€Œæ˜¯ä»æ—¥æœŸçš„ day éƒ¨åˆ†ä¸€ç›´é€‰å–åˆ° microsecond éƒ¨åˆ†ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DAYNAME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- Monday(è¿”å›è‹±æ–‡æ˜ŸæœŸ)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> MONTHNAME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- May(è¿”å›è‹±æ–‡æœˆä»½)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> LAST_DAY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2016-02-01'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2016-02-29 (è¿”å›æœˆä»½ä¸­æœ€åä¸€å¤©)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> LAST_DAY</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2016-05-01'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2016-05-31</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- DATE_ADD(date,INTERVAL expr type) ä»æ—¥æœŸåŠ ä¸ŠæŒ‡å®šçš„æ—¶é—´é—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- typeå‚æ•°å¯å‚è€ƒï¼šhttp://www.w3school.com.cn/sql/func_date_sub.asp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2018-05-15 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> QUARTER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-08-15 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-06-15 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> WEEK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-22 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-16 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 11:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 10:38:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 10:37:15.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> MICROSECOND</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 10:37:14.123457</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- DATE_SUB(date,INTERVAL expr type) ä»æ—¥æœŸå‡å»æŒ‡å®šçš„æ—¶é—´é—´éš”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2016-05-15 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> QUARTER</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-02-15 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-04-15 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> WEEK</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-08 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-14 10:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 09:37:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 10:36:14.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 10:37:13.123456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14.123456'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> MICROSECOND</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è¡¨ç¤ºï¼š2017-05-15 10:37:14.123455</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- ç»ç‰¹æ®Šæ—¥æœŸæµ‹è¯•ï¼ŒDATE_SUB(date,INTERVAL expr type)å¯æ”¾å¿ƒä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å‰ä¸€å¤©ï¼š2017-05-11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- åä¸€å¤©ï¼š2017-05-13</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- ä¸€ä¸ªæœˆå‰æ—¥æœŸï¼š2017-04-12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- ä¸€ä¸ªæœˆåæ—¥æœŸï¼š2017-06-12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- ä¸€å¹´å‰æ—¥æœŸï¼š2016-05-12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_SUB</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CURDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- ä¸€å¹´åæ—¥æœŸï¼š20178-06-12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL date_sub() æ—¥æœŸæ—¶é—´å‡½æ•° å’Œ date_add() ç”¨æ³•ä¸€è‡´ï¼Œå¹¶ä¸”å¯ä»¥ç”¨INTERNAL -1 xxxçš„å½¢å¼äº’æ¢ä½¿ç”¨ï¼›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å¦å¤–ï¼ŒMySQL ä¸­è¿˜æœ‰ä¸¤ä¸ªå‡½æ•° subdate(), subtime()ï¼Œå»ºè®®ï¼Œç”¨ date_sub() æ¥æ›¿ä»£ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL å¦ç±»æ—¥æœŸå‡½æ•°ï¼šperiod_add(P,N), period_diff(P1,P2)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å‡½æ•°å‚æ•°â€œPâ€ çš„æ ¼å¼ä¸ºâ€œYYYYMMâ€ æˆ–è€… â€œYYMMâ€ï¼Œç¬¬äºŒä¸ªå‚æ•°â€œNâ€ è¡¨ç¤ºå¢åŠ æˆ–å‡å» N monthï¼ˆæœˆï¼‰ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL period_add(P,N)ï¼šæ—¥æœŸåŠ /å‡å»Næœˆã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> PERIOD_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">201705</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PERIOD_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">201705</span><span class="token punctuation" style="color:#393A34">,</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 201707  20170503</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- period_diff(P1,P2)ï¼šæ—¥æœŸ P1-P2ï¼Œè¿”å› N ä¸ªæœˆã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> PERIOD_DIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">201706</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">201703</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- datediff(date1,date2)ï¼šä¸¤ä¸ªæ—¥æœŸç›¸å‡ date1 - date2ï¼Œè¿”å›å¤©æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATEDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-06-05'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'2017-05-29'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- TIMEDIFF(time1,time2)ï¼šä¸¤ä¸ªæ—¥æœŸç›¸å‡ time1 - time2ï¼Œè¿”å› TIME å·®å€¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMEDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-06-05 19:28:37'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-05 17:00:00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 02:28:37</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQLæ—¥æœŸè½¬æ¢å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIME_TO_SEC</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'01:00:05'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 3605</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> SEC_TO_TIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3605</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 01:00:05</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL ï¼ˆæ—¥æœŸã€å¤©æ•°ï¼‰è½¬æ¢å‡½æ•°ï¼što_days(date), from_days(days)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TO_DAYS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'0000-00-00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- NULL </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TO_DAYS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-06-05'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 736850</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> FROM_DAYS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">-- '0000-00-00' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> FROM_DAYS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">736850</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '2017-06-05'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL Str to Date ï¼ˆå­—ç¬¦ä¸²è½¬æ¢ä¸ºæ—¥æœŸï¼‰å‡½æ•°ï¼šstr_to_date(str, format)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> STR_TO_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'06.05.2017 19:40:30'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%m.%d.%Y %H:%i:%s'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-06-05 19:40:30</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> STR_TO_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'06/05/2017'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%m/%d/%Y'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-06-05</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> STR_TO_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017/12/3'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'%Y/%m/%d'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-12-03</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> STR_TO_DATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'20:09:30'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%h:%i:%s'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">-- NULL(è¶…è¿‡12æ—¶çš„å°æ—¶ç”¨å°å†™hï¼Œå¾—åˆ°çš„ç»“æœä¸ºNULL)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- æ—¥æœŸæ—¶é—´æ ¼å¼åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-12 17:03:51'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017å¹´05æœˆ12æ—¥ 17æ—¶03åˆ†51ç§’(å…·ä½“éœ€è¦ä»€ä¹ˆæ ¼å¼çš„æ•°æ®æ ¹æ®å®é™…æƒ…å†µæ¥;å°å†™hä¸º12å°æ—¶åˆ¶;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIME_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-12 17:03:51'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%Yå¹´%mæœˆ%dæ—¥ %Hæ—¶%iåˆ†%sç§’'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 0000å¹´00æœˆ00æ—¥ 17æ—¶03åˆ†51ç§’(time_format()åªèƒ½ç”¨äºæ—¶é—´çš„æ ¼å¼åŒ–)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- STR_TO_DATE()å’ŒDATE_FORMATE()ä¸ºäº’é€†æ“ä½œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL è·å¾—å›½å®¶åœ°åŒºæ—¶é—´æ ¼å¼å‡½æ•°ï¼šget_format()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL get_format() è¯­æ³•ï¼šget_format(date|time|datetime, 'eur'|'usa'|'jis'|'iso'|'internal'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL get_format() ç”¨æ³•çš„å…¨éƒ¨ç¤ºä¾‹ï¼š</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'usa'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%m.%d.%Y' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'jis'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y-%m-%d' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'iso'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y-%m-%d' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'eur'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%d.%m.%Y' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'internal'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y%m%d' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'usa'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y-%m-%d %H.%i.%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'jis'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y-%m-%d %H:%i:%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'iso'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y-%m-%d %H:%i:%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'eur'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y-%m-%d %H.%i.%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DATETIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'internal'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- '%Y%m%d%H%i%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">TIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'usa'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%h:%i:%s %p' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">TIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'jis'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%H:%i:%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">TIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'iso'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%H:%i:%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">TIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'eur'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">-- '%H.%i.%s' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> GET_FORMAT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">TIME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">'internal'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">-- '%H%i%s'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL æ‹¼å‡‘æ—¥æœŸã€æ—¶é—´å‡½æ•°ï¼šmakdedate(year,dayofyear), maketime(hour,minute,second)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> MAKEDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2017</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">31</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">-- '2017-01-31' </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> MAKEDATE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2017</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">-- '2017-02-01'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> MAKETIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">19</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">52</span><span class="token punctuation" style="color:#393A34">,</span><span class="token number" style="color:#36acaa">35</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">-- '19:52:35'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL æ—¶åŒºï¼ˆtimezoneï¼‰è½¬æ¢å‡½æ•°ï¼šconvert_tz(dt,from_tz,to_tz)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> CONVERT_TZ</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-06-05 19:54:12'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'+08:00'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'+00:00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-06-05 11:54:12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL ï¼ˆUnix æ—¶é—´æˆ³ã€æ—¥æœŸï¼‰è½¬æ¢å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- unix_timestamp(), unix_timestamp(date), from_unixtime(unix_timestamp), from_unixtime(unix_timestamp,format)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å°†å…·ä½“æ—¶é—´æ—¶é—´è½¬ä¸ºtimestamp</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> UNIX_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ï¼š1494815779</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> UNIX_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- æŒ‡å®šæ—¥æœŸçš„æ—¶é—´æˆ³ï¼š1494777600</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> UNIX_TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 10:37:14'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- æŒ‡å®šæ—¥æœŸæ—¶é—´çš„æ—¶é—´æˆ³ï¼š1494815834</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- å°†æ—¶é—´æˆ³è½¬ä¸ºå…·ä½“æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> FROM_UNIXTIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1494815834</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 10:37:14</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> FROM_UNIXTIME</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1494815834</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'%Yå¹´%mæœˆ%dæ—¥ %hæ—¶%åˆ†:%sç§’'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- è·å–æ—¶é—´æˆ³å¯¹åº”çš„æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">-- MySQL æ—¶é—´æˆ³ï¼ˆtimestampï¼‰è½¬æ¢ã€å¢ã€å‡å‡½æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 00:00:00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">TIMESTAMP</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 08:12:25'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'01:01:01'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-15 09:13:26</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> DATE_ADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'2017-05-15 08:12:25'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-16 08:12:25</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPADD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-05-15 08:12:25'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- 2017-05-16 08:12:25; MySQL timestampadd() å‡½æ•°ç±»ä¼¼äº date_add()ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">YEAR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-01'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2016-05-15'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- -1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">MONTH</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-01'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2016-06-15'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- -11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">DAY</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-01'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2016-06-15'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- -351</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-01 08:12:25'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2016-06-15 00:00:00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- -8432</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">MINUTE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-01 08:12:25'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2016-06-15 00:00:00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- -505932</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> TIMESTAMPDIFF</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">SECOND</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2017-06-01 08:12:25'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'2016-06-15 00:00:00'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token comment" style="color:#999988;font-style:italic">-- -30355945</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ ¼å¼åŒ–å‚æ•°">æ ¼å¼åŒ–å‚æ•°<a href="#æ ¼å¼åŒ–å‚æ•°" class="hash-link" aria-label="æ ¼å¼åŒ–å‚æ•°çš„ç›´æ¥é“¾æ¥" title="æ ¼å¼åŒ–å‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>ä¾‹å­æ ¼å¼åŒ– åŸºäº 2023-05-25 13:54:00</p></blockquote><table><thead><tr><th align="center">æ ¼å¼</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="center">%a</td><td align="left">ç¼©å†™æ˜ŸæœŸå  eg:(Thu)</td></tr><tr><td align="center">%b</td><td align="left">ç¼©å†™æœˆå   eg:(May)</td></tr><tr><td align="center">%c</td><td align="left">æœˆ æ•°å­—     eg:(5)</td></tr><tr><td align="center">%D</td><td align="left">å¸¦æœ‰è‹±æ–‡å‰ç¼€çš„æœˆä¸­çš„å¤©  eg:(25th)</td></tr><tr><td align="center">%d</td><td align="left">æœˆçš„å¤©(00-31)  eg:(25)</td></tr><tr><td align="center">%e</td><td align="left">æœˆçš„å¤© (0-31)</td></tr><tr><td align="center">%f</td><td align="left">å¾®ç§’   eg:(000000)</td></tr><tr><td align="center">%H</td><td align="left">å°æ—¶(00-23)  eg:(13)</td></tr><tr><td align="center">%h</td><td align="left">å°æ—¶(01-12)  eg:(01)</td></tr><tr><td align="center">%I</td><td align="left">å°æ—¶(01-12)  eg:(01)</td></tr><tr><td align="center">%i</td><td align="left">åˆ†é’Ÿ(0-59)    eg:(55)</td></tr><tr><td align="center">%j</td><td align="left">å¹´çš„å¤©æ•°(001-366) eg:(145)</td></tr><tr><td align="center">%k</td><td align="left">å°æ—¶(0-23 )     eg:(13)</td></tr><tr><td align="center">%l</td><td align="left">å°æ—¶(1-12)       eg:(1)</td></tr><tr><td align="center">%M</td><td align="left">æœˆå           eg:(May)</td></tr><tr><td align="center">%m</td><td align="left">æœˆï¼Œæ•°å€¼(00-12)       eg:(05)</td></tr><tr><td align="center">%p</td><td align="left">AM æˆ– PM  eg:(PM)</td></tr><tr><td align="center">%r</td><td align="left">æ—¶é—´ï¼Œ12-å°æ—¶ï¼ˆhh:mm:ss AM æˆ– PMï¼‰ eg:01:50:07 PM</td></tr><tr><td align="center">%S</td><td align="left">ç§’(00-59)          eg:(14)</td></tr><tr><td align="center">%s</td><td align="left">ç§’(00-59)            eg:(29)</td></tr><tr><td align="center">%T</td><td align="left">æ—¶é—´, 24-å°æ—¶ (hh:mm:ss)  eg:(13:58:25)</td></tr><tr><td align="center">%U</td><td align="left">å‘¨ (00-53) æ˜ŸæœŸæ—¥æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©   eg:(21)</td></tr><tr><td align="center">%u</td><td align="left">å‘¨ (00-53) æ˜ŸæœŸä¸€æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©  eg:(21)</td></tr><tr><td align="center">%V</td><td align="left">å‘¨(01-53) æ˜ŸæœŸå¤©æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©,ä¸%Xä½¿ç”¨   eg:(21)</td></tr><tr><td align="center">%v</td><td align="left">å‘¨(01-53) æ˜ŸæœŸä¸€æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©,ä¸%xä½¿ç”¨   eg:(21)</td></tr><tr><td align="center">%W</td><td align="left">æ˜ŸæœŸå           eg:(Thursday)</td></tr><tr><td align="center">%w</td><td align="left">å‘¨çš„å¤©            eg:(4)</td></tr><tr><td align="center">%X</td><td align="left">å¹´å…¶ä¸­çš„æ˜ŸæœŸæ—¥æ˜¯å‘¨çš„ç¬¬ä¸€å¤©,4ä½ ä¸%Vä½¿ç”¨   eg:(202321)</td></tr><tr><td align="center">%x</td><td align="left">å¹´ å…¶ä¸­çš„æ˜ŸæœŸä¸€æ˜¯å‘¨çš„ä¸€å¤©,4ä½ä¸%vä½¿ç”¨    eg:(202321)</td></tr><tr><td align="center">%Y</td><td align="left">å¹´,4ä½            eg:(2023)</td></tr><tr><td align="center">%t</td><td align="left">å¹´,2ä½             eg:(23)</td></tr></tbody></table>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>mysql</category>
            <category>åŸºç¡€çŸ¥è¯†</category>
        </item>
        <item>
            <title><![CDATA[CPU è¯¦è§£]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/18/cpu</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/18/cpu</guid>
            <pubDate>Thu, 18 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305181" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»‹ç»">ä»‹ç»<a href="#ä»‹ç»" class="hash-link" aria-label="ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸­å¤®å¤„ç†å™¨,ç®€ç§° CPU( Center Processing Unit )</p><p>ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ† <code>æ§åˆ¶å™¨</code> <code>è¿ç®—å™¨</code>,å…¶ä¸­è¿˜åŒ…æ‹¬ é«˜é€Ÿç¼“å†² å­˜å‚¨å™¨åŠå®ç°å®ƒä»¬ä¹‹é—´è”ç³»çš„æ•°æ®,æ§åˆ¶çš„æ€»çº¿.ç”µå­è®¡ç®—æœºçš„ä¸‰å¤§æ ¸å¿ƒéƒ¨ä»¶(CPU,å†…å­˜å­˜å‚¨å™¨,è¾“å…¥\è¾“å‡ºè®¾å¤‡).</p><p>ä¸­å¤®å¤„ç†å™¨ä¸»è¦ä¸ºå¤„ç†æŒ‡ä»¤,æ‰§è¡Œæ“ä½œ,æ§åˆ¶æ—¶é—´,å¤„ç†æ•°æ®.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i7">i7<a href="#i7" class="hash-link" aria-label="i7çš„ç›´æ¥é“¾æ¥" title="i7çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i5">i5<a href="#i5" class="hash-link" aria-label="i5çš„ç›´æ¥é“¾æ¥" title="i5çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="i3">i3<a href="#i3" class="hash-link" aria-label="i3çš„ç›´æ¥é“¾æ¥" title="i3çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>CPU</category>
            <category>åŸºç¡€çŸ¥è¯†</category>
        </item>
        <item>
            <title><![CDATA[git  tag]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/14/git</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/14/git</guid>
            <pubDate>Sun, 14 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305141" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è·å–git-tag-åˆ—è¡¨">è·å–git tag åˆ—è¡¨<a href="#è·å–git-tag-åˆ—è¡¨" class="hash-link" aria-label="è·å–git tag åˆ—è¡¨çš„ç›´æ¥é“¾æ¥" title="è·å–git tag åˆ—è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ›å»ºæ ‡ç­¾">åˆ›å»ºæ ‡ç­¾<a href="#åˆ›å»ºæ ‡ç­¾" class="hash-link" aria-label="åˆ›å»ºæ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="åˆ›å»ºæ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag -a v1.0.3 -m</span><span class="token string" style="color:#e3116c">"tag å¤‡æ³¨"</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥çœ‹å¤‡æ³¨">æŸ¥çœ‹å¤‡æ³¨<a href="#æŸ¥çœ‹å¤‡æ³¨" class="hash-link" aria-label="æŸ¥çœ‹å¤‡æ³¨çš„ç›´æ¥é“¾æ¥" title="æŸ¥çœ‹å¤‡æ³¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain">  show v1.0.3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¹å†å²è¿›è¡Œæ ‡ç­¾">å¯¹å†å²è¿›è¡Œæ ‡ç­¾<a href="#å¯¹å†å²è¿›è¡Œæ ‡ç­¾" class="hash-link" aria-label="å¯¹å†å²è¿›è¡Œæ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="å¯¹å†å²è¿›è¡Œæ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> log --pretty</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">oneline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag -a v1.0.3 0d52aaab44</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æäº¤tag">æäº¤tag<a href="#æäº¤tag" class="hash-link" aria-label="æäº¤tagçš„ç›´æ¥é“¾æ¥" title="æäº¤tagçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin --tags</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åˆ é™¤æ ‡ç­¾">åˆ é™¤æ ‡ç­¾<a href="#åˆ é™¤æ ‡ç­¾" class="hash-link" aria-label="åˆ é™¤æ ‡ç­¾çš„ç›´æ¥é“¾æ¥" title="åˆ é™¤æ ‡ç­¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> tag -d v1.0.3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> push origin --delete </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">tagname</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>git</category>
            <category>command</category>
        </item>
        <item>
            <title><![CDATA[sambaä¿®æ”¹å¯†ç ]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/04/samb</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/04/samb</guid>
            <pubDate>Thu, 04 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> smbpasswd -a </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">username</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>samba</category>
            <category>ç¾¤æœºå™¨äºº</category>
            <category>go</category>
        </item>
        <item>
            <title><![CDATA[go ä¼ä¸šå¾®ä¿¡æœºå™¨äººå®ä¾‹]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/05/04/webchat</link>
            <guid>https://ahkevinxy.github.io/blog/2023/05/04/webchat</guid>
            <pubDate>Thu, 04 May 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2305041" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><blockquote><p>åœ¨ç»ˆç«¯æŸä¸ªç¾¤ç»„æ·»åŠ æœºå™¨äººä¹‹åï¼Œåˆ›å»ºè€…å¯ä»¥åœ¨æœºå™¨äººè¯¦æƒ…é¡µçœ‹çš„è¯¥æœºå™¨äººç‰¹æœ‰çš„webhookurlã€‚å¼€å‘è€…å¯ä»¥æŒ‰ä»¥ä¸‹è¯´æ˜å‘è¿™ä¸ªåœ°å€å‘èµ·HTTP POST è¯·æ±‚ï¼Œå³å¯å®ç°ç»™è¯¥ç¾¤ç»„å‘é€æ¶ˆæ¯
go è¯­è¨€å®ç°æœºå™¨äººæ¨é€æ¶ˆæ¯</p></blockquote><ul><li>ä½¿ç”¨curl å·¥å…·</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=693axxx6-7aoc-4bc4-97a0-0ec2sifa5aaa'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -H </span><span class="token string" style="color:#e3116c">'Content-Type: application/json'</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   -d </span><span class="token string" style="color:#e3116c">'</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">   {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">     "msgtype": "text",</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">     "text": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">         "content": "hello world"</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">     }</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">   }'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>å½“å‰è‡ªå®šä¹‰æœºå™¨äººæ”¯æŒæ–‡æœ¬ï¼ˆtextï¼‰ã€markdownï¼ˆmarkdownï¼‰ã€å›¾ç‰‡ï¼ˆimageï¼‰ã€å›¾æ–‡ï¼ˆnewsï¼‰å››ç§æ¶ˆæ¯ç±»å‹</p></li><li><p>æœºå™¨äººçš„text/markdownç±»å‹æ¶ˆæ¯æ”¯æŒåœ¨contentä¸­ä½¿ç”¨&lt;@userid&gt;æ‰©å±•è¯­æ³•æ¥@ç¾¤æˆå‘˜</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go-è¯­è¨€å®ç°">go è¯­è¨€å®ç°<a href="#go-è¯­è¨€å®ç°" class="hash-link" aria-label="go è¯­è¨€å®ç°çš„ç›´æ¥é“¾æ¥" title="go è¯­è¨€å®ç°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> helps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"bytes"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"encoding/json"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"errors"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"io"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"io/ioutil"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"net/http"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"net/http/cookiejar"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"strings"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// PushMessageToQwx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  @Description:   æ¨é€æ¶ˆæ¯åˆ°ä¼ä¸šå¾®ä¿¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  @Author  ahKevinXy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//  @Date 2023-04-12 10:32:59</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">PushMessageToQwx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mp </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> noticeUrl </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MakeHttpRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"POST"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> noticeUrl</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> mp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">request</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"å¤„ç†ç»“æœ"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> POST  </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"POST"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> GET   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"GET"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> PUT   </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"PUT"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> PATCH </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"PATCH"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// MakeHttpRequest</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Description: HTTPè¯·æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Author ahKevinXy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Date 2022-11-08 16:49:40</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MakeHttpRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> entity </span><span class="token keyword" style="color:#00009f">map</span><span class="token punctuation" style="color:#393A34">[</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">]</span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> jar </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cookiejar</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Jar</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> body io</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> err </span><span class="token builtin">error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">switch</span><span class="token plain"> method </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> POST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PUT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> PATCH</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> json</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Marshal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\\u003c"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&lt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\\u003e"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&gt;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   b </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"\\u0026"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"&amp;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   body </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> bytes</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewBuffer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> GET</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">entity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    index </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> entity </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     _v </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%v"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     params</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">index</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%s=%v"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> k</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     index</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    queryStr </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> strings</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">params</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"&amp;"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    url </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sprintf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"%s?%s"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> queryStr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewRequest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">method</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> url</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> entity </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">method </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> POST </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> method </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> PUT </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> method </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> PATCH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Content-Type"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application/json;charset=utf-8"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Accept"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"application/json"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"Connection"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"close"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"User-Agent"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> client </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DefaultClient</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> jar </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Jar</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> jar</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Do</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Body</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusCode </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusOK </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusCode </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusCreated </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusCode </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> http</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusNoContent </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"http request failed to call"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> resBody</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> ioutil</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ReadAll</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Body</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">""</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> errors</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">New</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"the response could not be read"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">resBody</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StatusCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>ä¼ä¸šå¾®ä¿¡</category>
            <category>ç¾¤æœºå™¨äºº</category>
            <category>go</category>
        </item>
        <item>
            <title><![CDATA[å¸¸ç”¨MySQL ä¿¡æ¯æŸ¥è¯¢]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/04/18/mysql</link>
            <guid>https://ahkevinxy.github.io/blog/2023/04/18/mysql</guid>
            <pubDate>Tue, 18 Apr 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304181" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥è¯¢æ‰€æœ‰ç©ºé—´">æŸ¥è¯¢æ‰€æœ‰ç©ºé—´<a href="#æŸ¥è¯¢æ‰€æœ‰ç©ºé—´" class="hash-link" aria-label="æŸ¥è¯¢æ‰€æœ‰ç©ºé—´çš„ç›´æ¥é“¾æ¥" title="æŸ¥è¯¢æ‰€æœ‰ç©ºé—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_schema </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®åº“'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_rows</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'è®°å½•æ•°'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®å®¹é‡(MB)'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ç´¢å¼•å®¹é‡(MB)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">group</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> table_schema</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥è¯¢ç©ºé—´">æŸ¥è¯¢ç©ºé—´<a href="#æŸ¥è¯¢ç©ºé—´" class="hash-link" aria-label="æŸ¥è¯¢ç©ºé—´çš„ç›´æ¥é“¾æ¥" title="æŸ¥è¯¢ç©ºé—´çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_schema </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®åº“'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_name </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'è¡¨å'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_rows </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'è®°å½•æ•°'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®å®¹é‡(MB)'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ç´¢å¼•å®¹é‡(MB)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> data_length </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index_length </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å®¹é‡å¤§å°">æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å®¹é‡å¤§å°<a href="#æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å®¹é‡å¤§å°" class="hash-link" aria-label="æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å®¹é‡å¤§å°çš„ç›´æ¥é“¾æ¥" title="æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å®¹é‡å¤§å°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_schema </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®åº“'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">table_rows</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'è®°å½•æ•°'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®å®¹é‡(MB)'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sum</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ç´¢å¼•å®¹é‡(MB)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'mysql'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å„è¡¨å®¹é‡å¤§å°">æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å„è¡¨å®¹é‡å¤§å°<a href="#æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å„è¡¨å®¹é‡å¤§å°" class="hash-link" aria-label="æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å„è¡¨å®¹é‡å¤§å°çš„ç›´æ¥é“¾æ¥" title="æŸ¥çœ‹æŒ‡å®šæ•°æ®åº“å„è¡¨å®¹é‡å¤§å°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_schema </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®åº“'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_name </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'è¡¨å'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">table_rows </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'è®°å½•æ•°'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'æ•°æ®å®¹é‡(MB)'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">truncate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">index_length</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token operator" style="color:#393A34">/</span><span class="token number" style="color:#36acaa">1024</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'ç´¢å¼•å®¹é‡(MB)'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> information_schema</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword" style="color:#00009f">tables</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> table_schema</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'mysql'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">order</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">by</span><span class="token plain"> data_length </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> index_length </span><span class="token keyword" style="color:#00009f">desc</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>mysql</category>
            <category>å·¥å…·</category>
        </item>
        <item>
            <title><![CDATA[Go ä¸­çš„sync poll]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/15/sync_poll</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/15/sync_poll</guid>
            <pubDate>Wed, 15 Mar 2023 23:07:03 GMT</pubDate>
            <description><![CDATA[Go ä¸­çš„waitgroup]]></description>
            <content:encoded><![CDATA[<blockquote><p>ä½¿ç”¨åœºæ™¯ï¼šé¢‘ç¹æ„é€ ç»“æ„ä½“ï¼Œåˆ†é…å†…å­˜ï¼Œå¯ä»¥è€ƒè™‘å¯¹è±¡æ± .
<img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304152" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p></blockquote><p><a href="https://juejin.cn/post/7209625823580520504" target="_blank" rel="noopener noreferrer">from</a></p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
            <category>GoåŸºç¡€çŸ¥è¯†</category>
        </item>
        <item>
            <title><![CDATA[åšå®¢]]></title>
            <link>https://ahkevinxy.github.io/blog/index</link>
            <guid>https://ahkevinxy.github.io/blog/index</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[å¼€æºè½¯ä»¶]]></description>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
        </item>
        <item>
            <title><![CDATA[èµ„æºæ±‡é›†åœ°]]></title>
            <link>https://ahkevinxy.github.io/blog/awesome/awesome</link>
            <guid>https://ahkevinxy.github.io/blog/awesome/awesome</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[èµ„æºæ±‡é›†åœ°]]></description>
            <content:encoded><![CDATA[<p><a href="https://github.com/topics/awesome" target="_blank" rel="noopener noreferrer">github</a></p><p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=awesome" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åç«¯èµ„æº">åç«¯èµ„æº<a href="#åç«¯èµ„æº" class="hash-link" aria-label="åç«¯èµ„æºçš„ç›´æ¥é“¾æ¥" title="åç«¯èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go-èµ„æºç½‘ç«™å¯¼èˆª"><a href="https://hao.studygolang.com/" target="_blank" rel="noopener noreferrer">Go èµ„æºç½‘ç«™å¯¼èˆª</a><a href="#go-èµ„æºç½‘ç«™å¯¼èˆª" class="hash-link" aria-label="go-èµ„æºç½‘ç«™å¯¼èˆªçš„ç›´æ¥é“¾æ¥" title="go-èµ„æºç½‘ç«™å¯¼èˆªçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‰ç«¯èµ„æº">å‰ç«¯èµ„æº<a href="#å‰ç«¯èµ„æº" class="hash-link" aria-label="å‰ç«¯èµ„æºçš„ç›´æ¥é“¾æ¥" title="å‰ç«¯èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-èµ„æº">Java èµ„æº<a href="#java-èµ„æº" class="hash-link" aria-label="Java èµ„æºçš„ç›´æ¥é“¾æ¥" title="Java èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="php-èµ„æº">php èµ„æº<a href="#php-èµ„æº" class="hash-link" aria-label="php èµ„æºçš„ç›´æ¥é“¾æ¥" title="php èµ„æºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
        </item>
        <item>
            <title><![CDATA[ä¸“ä¸šè‹±è¯­ç¿»è¯‘]]></title>
            <link>https://ahkevinxy.github.io/blog/english</link>
            <guid>https://ahkevinxy.github.io/blog/english</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[ä¸“ä¸šè‹±è¯­ç¿»è¯‘]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=english" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¾®æœåŠ¡-microservice">å¾®æœåŠ¡ Microservice<a href="#å¾®æœåŠ¡-microservice" class="hash-link" aria-label="å¾®æœåŠ¡ Microserviceçš„ç›´æ¥é“¾æ¥" title="å¾®æœåŠ¡ Microserviceçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ ˆstack">(æ ˆ)Stack<a href="#æ ˆstack" class="hash-link" aria-label="(æ ˆ)Stackçš„ç›´æ¥é“¾æ¥" title="(æ ˆ)Stackçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¡ˆä¾‹-case">æ¡ˆä¾‹ case<a href="#æ¡ˆä¾‹-case" class="hash-link" aria-label="æ¡ˆä¾‹ caseçš„ç›´æ¥é“¾æ¥" title="æ¡ˆä¾‹ caseçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¾‹å­-example">ä¾‹å­ example<a href="#ä¾‹å­-example" class="hash-link" aria-label="ä¾‹å­ exampleçš„ç›´æ¥é“¾æ¥" title="ä¾‹å­ exampleçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªç”±èŒä¸šè€…-freelancer------work-å·¥ä½œ">è‡ªç”±èŒä¸šè€… freelancer  --  work ï¼ˆå·¥ä½œï¼‰<a href="#è‡ªç”±èŒä¸šè€…-freelancer------work-å·¥ä½œ" class="hash-link" aria-label="è‡ªç”±èŒä¸šè€… freelancer  --  work ï¼ˆå·¥ä½œï¼‰çš„ç›´æ¥é“¾æ¥" title="è‡ªç”±èŒä¸šè€… freelancer  --  work ï¼ˆå·¥ä½œï¼‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¡¬ä»¶-hardware">ç¡¬ä»¶ hardware<a href="#ç¡¬ä»¶-hardware" class="hash-link" aria-label="ç¡¬ä»¶ hardwareçš„ç›´æ¥é“¾æ¥" title="ç¡¬ä»¶ hardwareçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ„è§åé¦ˆ-feedback">æ„è§åé¦ˆ feedback<a href="#æ„è§åé¦ˆ-feedback" class="hash-link" aria-label="æ„è§åé¦ˆ feedbackçš„ç›´æ¥é“¾æ¥" title="æ„è§åé¦ˆ feedbackçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¦‚è¦-summary">æ¦‚è¦ summary<a href="#æ¦‚è¦-summary" class="hash-link" aria-label="æ¦‚è¦ summaryçš„ç›´æ¥é“¾æ¥" title="æ¦‚è¦ summaryçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
        </item>
        <item>
            <title><![CDATA[ç™½å«–çš„å†·çŸ¥è¯†]]></title>
            <link>https://ahkevinxy.github.io/blog/free</link>
            <guid>https://ahkevinxy.github.io/blog/free</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[ç™½å«–å·¥å…·]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=english" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€æ”¾-å›¾ç‰‡ç”Ÿæˆå™¨-any-idea-you-can-imagine-and-create">å¼€æ”¾ å›¾ç‰‡ç”Ÿæˆå™¨ any idea you can imagine and create<a href="#å¼€æ”¾-å›¾ç‰‡ç”Ÿæˆå™¨-any-idea-you-can-imagine-and-create" class="hash-link" aria-label="å¼€æ”¾ å›¾ç‰‡ç”Ÿæˆå™¨ any idea you can imagine and createçš„ç›´æ¥é“¾æ¥" title="å¼€æ”¾ å›¾ç‰‡ç”Ÿæˆå™¨ any idea you can imagine and createçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://undraw.co/" target="_blank" rel="noopener noreferrer">undraw</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰˜ç®¡å¹³å°-å‡ ä¹æ— é™åˆ¶ä½¿ç”¨">æ‰˜ç®¡å¹³å° (å‡ ä¹æ— é™åˆ¶ä½¿ç”¨)<a href="#æ‰˜ç®¡å¹³å°-å‡ ä¹æ— é™åˆ¶ä½¿ç”¨" class="hash-link" aria-label="æ‰˜ç®¡å¹³å° (å‡ ä¹æ— é™åˆ¶ä½¿ç”¨)çš„ç›´æ¥é“¾æ¥" title="æ‰˜ç®¡å¹³å° (å‡ ä¹æ— é™åˆ¶ä½¿ç”¨)çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://codeup.aliyun.com/" target="_blank" rel="noopener noreferrer">é˜¿é‡Œcodeup</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¿œç¨‹ç¼–è¾‘å™¨">è¿œç¨‹ç¼–è¾‘å™¨<a href="#è¿œç¨‹ç¼–è¾‘å™¨" class="hash-link" aria-label="è¿œç¨‹ç¼–è¾‘å™¨çš„ç›´æ¥é“¾æ¥" title="è¿œç¨‹ç¼–è¾‘å™¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><a href="https://ide.aliyun.com/" target="_blank" rel="noopener noreferrer">é˜¿é‡Œide</a></p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>å…è´¹</category>
        </item>
        <item>
            <title><![CDATA[letcode æ‰“å¡]]></title>
            <link>https://ahkevinxy.github.io/blog/letcode</link>
            <guid>https://ahkevinxy.github.io/blog/letcode</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[letcode ä¸ªäººå­¦ä¹ ]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=letcode" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>letcode</category>
        </item>
        <item>
            <title><![CDATA[ä¼˜è´¨å¼€æºè½¯ä»¶]]></title>
            <link>https://ahkevinxy.github.io/blog/source</link>
            <guid>https://ahkevinxy.github.io/blog/source</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[å¼€æºè½¯ä»¶]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=source" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gihub-æ˜é‡‘è®¡åˆ’"><a href="https://www.zhihu.com/people/github-stars" target="_blank" rel="noopener noreferrer">Gihub æ˜é‡‘è®¡åˆ’</a><a href="#gihub-æ˜é‡‘è®¡åˆ’" class="hash-link" aria-label="gihub-æ˜é‡‘è®¡åˆ’çš„ç›´æ¥é“¾æ¥" title="gihub-æ˜é‡‘è®¡åˆ’çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼€æºå¤§å±å±•ç¤º"><a href="https://zhuanlan.zhihu.com/p/384830720" target="_blank" rel="noopener noreferrer">å¼€æºå¤§å±å±•ç¤º</a><a href="#å¼€æºå¤§å±å±•ç¤º" class="hash-link" aria-label="å¼€æºå¤§å±å±•ç¤ºçš„ç›´æ¥é“¾æ¥" title="å¼€æºå¤§å±å±•ç¤ºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sns">SNS<a href="#sns" class="hash-link" aria-label="SNSçš„ç›´æ¥é“¾æ¥" title="SNSçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ul><li><a href="https://github.com/slimkit/plus" target="_blank" rel="noopener noreferrer">ThinkSNS</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬”è®°">ç¬”è®°<a href="#ç¬”è®°" class="hash-link" aria-label="ç¬”è®°çš„ç›´æ¥é“¾æ¥" title="ç¬”è®°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>An open source, markdown-based, self-hosted note taking webapp.</p></div></div><ul><li><p><a href="https://github.com/batnoter/batnoter.git" target="_blank" rel="noopener noreferrer">batnoter</a></p></li><li><p><a href="https://www.topgoer.com/" target="_blank" rel="noopener noreferrer">topgoer</a></p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go-å­¦ä¹ èµ„æ–™å…¨">go å­¦ä¹ èµ„æ–™(å…¨)<a href="#go-å­¦ä¹ èµ„æ–™å…¨" class="hash-link" aria-label="go å­¦ä¹ èµ„æ–™(å…¨)çš„ç›´æ¥é“¾æ¥" title="go å­¦ä¹ èµ„æ–™(å…¨)çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>letcode</category>
        </item>
        <item>
            <title><![CDATA[ä¼˜ç§€åšå®¢]]></title>
            <link>https://ahkevinxy.github.io/blog/stars</link>
            <guid>https://ahkevinxy.github.io/blog/stars</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[å¼€æºè½¯ä»¶]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=starts" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><p><a href="https://github.com/balloonwj/CppGuide" target="_blank" rel="noopener noreferrer">CppGuide</a></p><p><a href="https://csdiy.wiki/" target="_blank" rel="noopener noreferrer">é™ˆå¤©å¥‡,cså…¥é—¨ä¸€æ¡é¾™æœåŠ¡</a></p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
        </item>
        <item>
            <title><![CDATA[TODO]]></title>
            <link>https://ahkevinxy.github.io/blog/todos</link>
            <guid>https://ahkevinxy.github.io/blog/todos</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[* go unsafe 2023-3-15 2326]]></description>
            <content:encoded><![CDATA[<ul><li>go unsafe 2023-3-15 23:22:26</li><li>Goå¼‚æ­¥ä»»åŠ¡å¤„ç†è§£å†³æ–¹æ¡ˆï¼šAsynq 2023-3-15 23:21:25</li><li>go æµ‹è¯• testing 2023-3-15 23:21:30</li><li>go 1.18åæ³›å‹å­¦ä¹  2023-3-15 23:21:35</li><li><a href="https://www.cloudwego.io/zh/" target="_blank" rel="noopener noreferrer">CloudWeGo</a> å­¦ä¹  2023-3-15 23:19:41</li><li>giné€šè¿‡embed æ‰“åŒ…é™æ€æ–‡ä»¶ 2023-3-15 23:18:05</li></ul><p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=todos" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
        </item>
        <item>
            <title><![CDATA[Go defer è¯¦è§£]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/07/index</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/07/index</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[Go defer è¯¦è§£]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304072" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºæœ¬åŠŸèƒ½ä»‹ç»">åŸºæœ¬åŠŸèƒ½ä»‹ç»<a href="#åŸºæœ¬åŠŸèƒ½ä»‹ç»" class="hash-link" aria-label="åŸºæœ¬åŠŸèƒ½ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="åŸºæœ¬åŠŸèƒ½ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>deferæ˜¯ä¸€ç§å»¶è¿Ÿå¤„ç†æœºåˆ¶ï¼Œæ˜¯åœ¨å‡½æ•°è¿›è¡Œreturnä¹‹å‰è¿›è¡Œæ‰§è¡Œã€‚</li><li>deferæ˜¯é‡‡ç”¨æ ˆçš„æ–¹å¼æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´å…ˆå®šä¹‰çš„deferåæ‰§è¡Œï¼Œåå®šä¹‰çš„deferæœ€å…ˆè¢«æ‰§è¡Œã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ‰©å±•">æ‰©å±•<a href="#æ‰©å±•" class="hash-link" aria-label="æ‰©å±•çš„ç›´æ¥é“¾æ¥" title="æ‰©å±•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>defer æ‰§è¡Œé¡ºåº . é‡‡ç”¨æ ˆçš„æ–¹å¼æ‰§è¡Œ,å…ˆå®šä¹‰å…ˆæ‰§è¡Œ</li><li>defer ä¸ return è°å…ˆè°æ‰§è¡Œ return ä¹‹åçš„è¯­å¥å…ˆæ‰§è¡Œï¼Œdefer åçš„è¯­å¥åæ‰§è¡Œã€‚</li><li>å‡½æ•°çš„è¿”å›å€¼åˆå§‹åŒ–ä¸ defer é—´æ¥å½±å“ã€‚deferä¸­ä¿®æ”¹äº†è¿”å›å€¼ï¼Œå®é™…è¿”å›çš„å€¼æ˜¯æŒ‰ç…§deferä¿®æ”¹åçš„å€¼è¿›è¡Œè¿”å›</li><li>defer é‡è§ panicã€‚æŒ‰ç…§deferçš„æ ˆé¡ºåºï¼Œè¾“å‡ºpanicè§¦å‘ä¹‹å‰å®šä¹‰å¥½çš„defer</li><li>defer ä¸­åŒ…å« panicã€‚æŒ‰ç…§deferçš„æ ˆé¡ºåºï¼Œè¾“å‡ºpanicè§¦å‘ä¹‹å‰çš„deferã€‚å¹¶ä¸”deferä¸­ä¼šæ¥æ”¶åˆ°panicä¿¡æ¯ã€‚</li><li>defer ä¸‹çš„å‡½æ•°å‚æ•°åŒ…å«å­å‡½æ•°ã€‚ä¼šå…ˆè¿›è¡Œå­å‡½æ•°çš„ç»“æœå€¼ï¼Œç„¶ååœ¨æŒ‰ç…§æ ˆçš„é¡ºåºè¿›è¡Œè¾“å‡º</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="defer-ä¸panic">defer ä¸panic<a href="#defer-ä¸panic" class="hash-link" aria-label="defer ä¸panicçš„ç›´æ¥é“¾æ¥" title="defer ä¸panicçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>panicæ˜¯Goè¯­è¨€ä¸­çš„ä¸€ç§å¼‚å¸¸ç°è±¡ï¼Œå®ƒä¼šä¸­æ–­ç¨‹åºçš„æ‰§è¡Œï¼Œå¹¶æŠ›å‡ºå…·ä½“çš„å¼‚å¸¸ä¿¡æ¯</p><p>å½“å‡½æ•°ä¸­å‘ç”Ÿäº†panicå¼‚å¸¸ï¼Œä¼šé©¬ä¸Šä¸­æ­¢å½“å‰å‡½æ•°çš„æ‰§è¡Œï¼Œpanicä¹‹å‰å®šä¹‰çš„deferéƒ½ä¼šè¢«æ‰§è¡Œï¼Œæ‰€æœ‰çš„ defer è¯­å¥éƒ½ä¼šä¿è¯æ‰§è¡Œå¹¶æŠŠæ§åˆ¶æƒäº¤è¿˜ç»™æ¥æ”¶åˆ° panic çš„å‡½æ•°è°ƒç”¨è€…ã€‚è¿™æ ·å‘ä¸Šå†’æ³¡ç›´åˆ°æœ€é¡¶å±‚ï¼Œå¹¶æ‰§è¡Œï¼ˆæ¯å±‚çš„ï¼‰ deferï¼Œåœ¨æ ˆé¡¶å¤„ç¨‹åºå´©æºƒï¼Œå¹¶åœ¨å‘½ä»¤è¡Œä¸­ç”¨ä¼ ç»™ panic çš„å€¼æŠ¥å‘Šé”™è¯¯æƒ…å†µï¼šè¿™ä¸ªç»ˆæ­¢è¿‡ç¨‹å°±æ˜¯ panickingã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deferä¸­åŒ…å«panic">deferä¸­åŒ…å«panic<a href="#deferä¸­åŒ…å«panic" class="hash-link" aria-label="deferä¸­åŒ…å«panicçš„ç›´æ¥é“¾æ¥" title="deferä¸­åŒ…å«panicçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç¨‹åºä¸­è™½ç„¶å‘ç”Ÿäº†panicï¼Œä½†æ˜¯åœ¨panicä¹‹å‰å®šä¹‰çš„deferè¯­å¥ï¼Œè¿˜æ˜¯ä¼šè¢«æ‰§è¡Œã€‚è¦æƒ³åœ¨deferä¸­è·å–åˆ°å…·ä½“çš„panicä¿¡æ¯ï¼Œéœ€è¦ä½¿ç”¨ recover() è¿›è¡Œè·å–ã€‚</p><p>è¿™ä¸ªï¼ˆrecoverï¼‰å†…å»ºå‡½æ•°è¢«ç”¨äºä» panic æˆ– é”™è¯¯åœºæ™¯ä¸­æ¢å¤ï¼šè®©ç¨‹åºå¯ä»¥ä» panicking é‡æ–°è·å¾—æ§åˆ¶æƒï¼Œåœæ­¢ç»ˆæ­¢è¿‡ç¨‹è¿›è€Œæ¢å¤æ­£å¸¸æ‰§è¡Œã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deferä¸‹çš„å‡½æ•°å‚æ•°åŒ…å«å­å‡½æ•°">deferä¸‹çš„å‡½æ•°å‚æ•°åŒ…å«å­å‡½æ•°<a href="#deferä¸‹çš„å‡½æ•°å‚æ•°åŒ…å«å­å‡½æ•°" class="hash-link" aria-label="deferä¸‹çš„å‡½æ•°å‚æ•°åŒ…å«å­å‡½æ•°çš„ç›´æ¥é“¾æ¥" title="deferä¸‹çš„å‡½æ•°å‚æ•°åŒ…å«å­å‡½æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æ‰§è¡Œç¬¬1ä¸ªdeferæ—¶ï¼Œå‹å…¥deferæ ˆä¸­ï¼Œè¯¥deferä¼šæ‰§è¡Œä¸€ä¸ªfunctionçš„å‡½æ•°ï¼Œåœ¨å‡½æ•°è¿”å›ä¹‹å‰æ‰§è¡Œ</li><li>å› ä¸ºè¯¥å‡½æ•°ä¸­åˆåŒ…å«äº†ä¸€ä¸ªå‡½æ•°(å­å‡½æ•°)ï¼ŒGoè¯­è¨€å¤„ç†çš„æœºåˆ¶æ˜¯ï¼Œå…ˆæ‰§è¡Œè¯¥å­å‡½æ•°ã€‚</li><li>æ‰§è¡Œå®Œå­å‡½æ•°ï¼Œæ¥ç€å†æ‰§è¡Œç¬¬2ä¸ªdeferè¯­å¥ã€‚æ­¤æ—¶ï¼Œç¬¬2ä¸ªdeferä¸­ä¹Ÿæœ‰ä¸€ä¸ªå­å‡½æ•°ï¼ŒæŒ‰ç…§ç¬¬2ç‚¹çš„é€»è¾‘ï¼Œè¿™ä¸ªå­å‡½æ•°ä¼šè¢«ç›´æ¥æ‰§è¡Œ</li><li>å®šä¹‰å®Œdeferè¯­å¥ä¹‹åï¼Œæ­¤æ—¶ç»“æŸè¯¥å‡½æ•°çš„è°ƒç”¨ã€‚æ‰€æœ‰è¢«å®šä¹‰çš„deferè¯­å¥ï¼ŒæŒ‰ç…§æ ˆé¡ºåºè¿›è¡Œè¾“å‡º</li></ol><p>å½“deferä¸­å­˜åœ¨å­å‡½æ•°æ—¶ï¼Œå­å‡½æ•°ä¼šæŒ‰ç…§deferå®šä¹‰çš„è¯­å¥é¡ºåºï¼Œä¼˜å…ˆæ‰§è¡Œã€‚deferæœ€å¤–å±‚çš„é€»è¾‘ï¼Œåˆ™æŒ‰ç…§æ ˆçš„é¡ºåºæ‰§è¡Œã€‚</p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
        </item>
        <item>
            <title><![CDATA[Goè¯­è¨€å®ç°åå¤§æ’åºç®—æ³•]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/07/sort_go</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/07/sort_go</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[Go defer è¯¦è§£]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304073" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å†’æ³¡æ’åº">å†’æ³¡æ’åº<a href="#å†’æ³¡æ’åº" class="hash-link" aria-label="å†’æ³¡æ’åºçš„ç›´æ¥é“¾æ¥" title="å†’æ³¡æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>ä»å·¦åˆ°å³éå†æ•°ç»„ï¼Œç›¸é‚»å…ƒç´ ä¸¤ä¸¤è¿›è¡Œæ¯”è¾ƒã€‚æ¯æ¬¡æ¯”è¾ƒå®Œä¸€è½®ï¼Œå°±ä¼šæ‰¾åˆ°æ•°ç»„ä¸­æœ€å¤§çš„ä¸€ä¸ªæˆ–æœ€å°çš„ä¸€ä¸ªã€‚è¿™ä¸ªæ•°å°±ä¼šä»åºåˆ—çš„æœ€å³è¾¹å†’å‡ºæ¥</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é€‰æ‹©æ’åº">é€‰æ‹©æ’åº<a href="#é€‰æ‹©æ’åº" class="hash-link" aria-label="é€‰æ‹©æ’åºçš„ç›´æ¥é“¾æ¥" title="é€‰æ‹©æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>é¦–å…ˆåœ¨å¼€å§‹çš„æ—¶å€™éå†æ•´ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°åºåˆ—ä¸­çš„æœ€å°å…ƒç´ ï¼Œç„¶åå°†è¿™ä¸ªå…ƒç´ ä¸ç¬¬ä¸€ä¸ªå…ƒç´ äº¤æ¢ï¼Œè¿™æ ·æœ€å°çš„å…ƒç´ å°±æ”¾åˆ°äº†å®ƒçš„æœ€ç»ˆä½ç½®ä¸Šäº†,ç„¶åï¼Œä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹éå†ï¼Œæ‰¾åˆ°å‰©ä¸‹çš„n-1ä¸ªå…ƒç´ ä¸­çš„æœ€å°å…ƒç´ ï¼Œå†ä¸ç¬¬äºŒä¸ªå…ƒç´ è¿›è¡Œäº¤æ¢ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ æ”¾åˆ°äº†æœ€ç»ˆä½</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ’å…¥æ’åº">æ’å…¥æ’åº<a href="#æ’å…¥æ’åº" class="hash-link" aria-label="æ’å…¥æ’åºçš„ç›´æ¥é“¾æ¥" title="æ’å…¥æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>å°†ä¸€ä¸ªè®°å½•æ’å…¥åˆ°å·²ç»æ’å¥½åºçš„æœ‰åºè¡¨ä¸­ï¼Œä»è€Œä¸€ä¸ªæ–°çš„ã€è®°å½•æ•°å¢1çš„æœ‰åºè¡¨,åœ¨å…¶å®ç°è¿‡ç¨‹ä½¿ç”¨åŒå±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯å¯¹é™¤äº†ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ ï¼Œå†…å±‚å¾ªç¯å¯¹å½“å‰å…ƒç´ å‰é¢çš„æœ‰åºè¡¨è¿›è¡Œå¾…æ’å…¥ä½ç½®æŸ¥æ‰¾ï¼Œå¹¶è¿›è¡Œç§»åŠ¨</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¿«é€Ÿæ’åº">å¿«é€Ÿæ’åº<a href="#å¿«é€Ÿæ’åº" class="hash-link" aria-label="å¿«é€Ÿæ’åºçš„ç›´æ¥é“¾æ¥" title="å¿«é€Ÿæ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>å¿«é€Ÿæ’åºè¦æ±‚æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªåŸºå‡†ï¼Œæ ¹æ®è¿™ä¸ªåŸºå‡†ä¸ºåŸæ•°ç»„åˆ†ç»„ï¼Œæ¯”åŸºå‡†å¤§çš„ä¸€ç»„ï¼Œæ¯”åŸºå‡†å°çš„ä¸€ç»„ï¼Œå†é‡å¤é€’å½’åœ°è¿›è¡Œå¿«é€Ÿæ’åºï¼Œé‡æ–°åˆå¹¶æ¯ç»„æ’åºåçš„åºåˆ—ï¼Œå³ä¸ºæ’å¥½åºçš„åºåˆ—</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å½’å¹¶æ’åº">å½’å¹¶æ’åº<a href="#å½’å¹¶æ’åº" class="hash-link" aria-label="å½’å¹¶æ’åºçš„ç›´æ¥é“¾æ¥" title="å½’å¹¶æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>å½’å¹¶æ’åºæ˜¯é‡‡ç”¨åˆ†æ²»æ³•çš„ä¸€ä¸ªå…¸å‹çš„æ’åºç®—æ³•ï¼Œå°†å·²æœ‰åºçš„å­åºåˆ—åˆå¹¶ä¸ºä¸€ä¸ªå®Œå…¨æœ‰åºçš„åºåˆ—ã€‚</p><p>å½’å¹¶æ’åºçš„è¿‡ç¨‹æ˜¯ï¼šé¦–å…ˆå°†åºåˆ—æ‹†åˆ†æˆå­åºåˆ—ï¼Œç„¶åå¯¹å­åºåˆ—è¿›è¡Œæ’åºï¼Œæœ€åå°†æ’åºå¥½çš„å­åºåˆ—åˆå¹¶ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªæœ‰åºçš„åºåˆ—ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å †æ’åº">å †æ’åº<a href="#å †æ’åº" class="hash-link" aria-label="å †æ’åºçš„ç›´æ¥é“¾æ¥" title="å †æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>å…ˆæ¥ä»‹ç»ä¸€ä¸‹ä»€ä¹ˆæ˜¯å †ï¼Ÿå †æ˜¯ä¸€ç§è¿‘ä¼¼å®Œå…¨äºŒå‰æ ‘çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åˆ†ä¸ºå¤§æ ¹å †ï¼Œå°æ ¹å †ã€‚</p><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å †æ’åºçš„è¿‡ç¨‹ï¼š</p><ol><li>å°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§æ ¹å †ï¼Œæ­¤æ—¶ï¼Œæ•´ä¸ªæ•°ç»„çš„æœ€å¤§å€¼å°±æ˜¯å †ç»“æ„é¡¶ç«¯çš„æ ¹èŠ‚ç‚¹ã€‚</li><li>å°†å †æ ¹èŠ‚ç‚¹çš„æ•°ä¸æœ«å°¾çš„æ•°äº¤æ¢ï¼Œæ­¤æ—¶ï¼Œæœ«å°¾çš„æ•°ä¸ºæœ€å¤§å€¼ï¼Œå‰©ä½™å¾…æ’åºåºåˆ—ä¸ªæ•°ä¸ºn-1ã€‚</li><li>å°†å‰©ä½™çš„n-1ä¸ªæ•°å†æ„é€ æˆä¸€ä¸ªå¤§æ ¹å †ï¼Œå†å°†é¡¶ç«¯æ•°ä¸n-1ä½ç½®çš„æ•°äº¤æ¢ï¼Œå¦‚æ­¤åå¤æ‰§è¡Œï¼Œä¾¿èƒ½å¾—åˆ°æœ‰åºæ•°ç»„ã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¸Œå°”æ’åº">å¸Œå°”æ’åº<a href="#å¸Œå°”æ’åº" class="hash-link" aria-label="å¸Œå°”æ’åºçš„ç›´æ¥é“¾æ¥" title="å¸Œå°”æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>å¸Œå°”æ’åºæ˜¯æŠŠè®°å½•æŒ‰ä¸‹æ ‡çš„ä¸€å®šå¢é‡åˆ†ç»„ï¼Œå¯¹æ¯ç»„ä½¿ç”¨ç›´æ¥æ’å…¥æ’åºç®—æ³•æ’åºï¼›éšç€å¢é‡é€æ¸å‡å°‘ï¼Œæ¯ç»„åŒ…å«çš„å…³é”®è¯è¶Šæ¥è¶Šå¤šï¼Œå½“å¢é‡å‡è‡³1æ—¶ï¼Œæ•´ä¸ªæ–‡ä»¶æ°è¢«åˆ†æˆä¸€ç»„ï¼Œç®—æ³•ä¾¿ç»ˆæ­¢ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è®¡æ•°æ’åº">è®¡æ•°æ’åº<a href="#è®¡æ•°æ’åº" class="hash-link" aria-label="è®¡æ•°æ’åºçš„ç›´æ¥é“¾æ¥" title="è®¡æ•°æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>è®¡æ•°æ’åºæ˜¯ä¸€ç§é€šè¿‡è®¡æ•°è€Œä¸æ˜¯æ¯”è¾ƒè¿›è¡Œæ’åºçš„ç®—æ³•ï¼Œé€‚ç”¨äºèŒƒå›´è¾ƒå°çš„æ•´æ•°åºåˆ—ã€‚
å®ƒçš„ä¼˜åŠ¿åœ¨äºåœ¨å¯¹ä¸€å®šèŒƒå›´å†…çš„æ•´æ•°æ’åºæ—¶ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºÎŸ(n+k)ï¼ˆå…¶ä¸­kæ˜¯æ•´æ•°çš„èŒƒå›´ï¼‰ï¼Œå¿«äºä»»ä½•æ¯”è¾ƒæ’åºç®—æ³•ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ¡¶æ’åº">æ¡¶æ’åº<a href="#æ¡¶æ’åº" class="hash-link" aria-label="æ¡¶æ’åºçš„ç›´æ¥é“¾æ¥" title="æ¡¶æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>å°†æ•°ç»„æŒ‰ç…§å…ƒç´ æ‰€å±èŒƒå›´åˆ†åˆ°æœ‰é™æ•°é‡çš„æ¡¶é‡Œï¼Œå†å•ç‹¬å¯¹æ¯ä¸ªæ¡¶æ’åºï¼ˆå¯ä»¥ä½¿ç”¨åˆ«çš„æ’åºç®—æ³•æˆ–æ˜¯ä»¥é€’å½’æ–¹å¼ç»§ç»­ä½¿ç”¨æ¡¶æ’åºè¿›è¡Œæ’åºï¼‰ï¼Œæœ€åä¾æ¬¡æŠŠå„ä¸ªæ¡¶ä¸­çš„è®°å½•åˆ—å‡ºæ¥è®°å¾—åˆ°æœ‰åºåºåˆ—ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºæ•°æ’åº">åŸºæ•°æ’åº<a href="#åŸºæ•°æ’åº" class="hash-link" aria-label="åŸºæ•°æ’åºçš„ç›´æ¥é“¾æ¥" title="åŸºæ•°æ’åºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><blockquote><p>åŸç†</p></blockquote><p>ä¾æ¬¡æŒ‰ç…§ä¸ªä½ã€åä½ã€ç™¾ä½...çš„é¡ºåºå¯¹å¾…æ’åºæ•°ç»„åˆ†ç»„ï¼Œç„¶åå°†æ¯ä¸€æ¬¡çš„åˆ†ç»„æŒ‰ç…§ç´¢å¼•å¤§å°é‡æ–°ç»„æˆæ–°çš„æ•°ç»„ã€‚æœ€åä¸€è½®çš„æ–°æ•°ç»„å³ä¸ºæ’å¥½åºçš„æ•°ç»„</p><ol><li>æˆ‘ä»¬æŒ‰ç…§ä¸ªä½å°†å¾…æ’åºæ•°ç»„åˆ†ç»„ã€‚</li><li>æˆ‘ä»¬æŒ‰ç…§åä½å°†å¾…æ’åºæ•°ç»„åˆ†ç»„</li><li>æˆ‘ä»¬æŒ‰ç…§ç™¾ä½å°†å¾…æ’åºæ•°ç»„åˆ†ç»„ã€‚</li></ol>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
            <category>ç®—æ³•</category>
        </item>
        <item>
            <title><![CDATA[Goè¯­è¨€ ä¸‰å‰‘å®¢]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/07/three_tools</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/07/three_tools</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[Goè¯­è¨€ ä¸‰å‰‘å®¢]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304073" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="viper"><a href="https://github.com/spf13/viper" target="_blank" rel="noopener noreferrer">viper</a><a href="#viper" class="hash-link" aria-label="viperçš„ç›´æ¥é“¾æ¥" title="viperçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Go configuration with fangs</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="cobra"><a href="https://github.com/spf13/cobra" target="_blank" rel="noopener noreferrer">Cobra</a><a href="#cobra" class="hash-link" aria-label="cobraçš„ç›´æ¥é“¾æ¥" title="cobraçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>A Commander for modern Go CLI interactions</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pflag"><a href="https://github.com/spf13/pflag" target="_blank" rel="noopener noreferrer">Pflag</a><a href="#pflag" class="hash-link" aria-label="pflagçš„ç›´æ¥é“¾æ¥" title="pflagçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>Drop-in replacement for Go's flag package, implementing POSIX/GNU-style --flags.</p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
        </item>
        <item>
            <title><![CDATA[Go ä¸­çš„waitgroup]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/15/wait_group</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/15/wait_group</guid>
            <pubDate>Tue, 07 Mar 2023 13:09:13 GMT</pubDate>
            <description><![CDATA[Go ä¸­çš„waitgroup]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304151" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯waitgroup">ä»€ä¹ˆæ˜¯WaitGroup<a href="#ä»€ä¹ˆæ˜¯waitgroup" class="hash-link" aria-label="ä»€ä¹ˆæ˜¯WaitGroupçš„ç›´æ¥é“¾æ¥" title="ä»€ä¹ˆæ˜¯WaitGroupçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p><code>WaitGroup</code> æ˜¯åŒæ­¥goroutinesçš„ä¸€ç§æœ‰æ•ˆæ–¹å¼ï¼Œ</p><p><code>WaitGroup</code> æ˜¯é€šè¿‡è°ƒç”¨æ ‡å‡†åº“<code>sync</code> åŒ…</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> wg sync</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">WaitGroup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>WaitGroup æœ‰ä¸‰ä¸ªé‡è¦çš„æ–¹æ³•</p><ol><li>Add: æ·»åŠ åˆ°ä½ éœ€è¦ç­‰å¾…çš„goroutinesçš„æ€»é‡ä¸Š</li><li>Done: ä»ä½ éœ€è¦ç­‰å¾…çš„goroutinesä¸Šå‡é™¤1</li><li>Wait: é˜»æ­¢ä»£ç è¿›è¡Œè¿›è¡Œä¸‹å»ï¼Œç›´åˆ°æ‰€æœ‰çš„goroutineså…¨éƒ¨æ‰§è¡Œå®Œæˆ</li></ol>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
            <category>GoåŸºç¡€çŸ¥è¯†</category>
        </item>
        <item>
            <title><![CDATA[é«˜æ€§èƒ½åç¨‹æ± antsæºç å‰–æ]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/06/ants</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/06/ants</guid>
            <pubDate>Mon, 06 Mar 2023 15:17:31 GMT</pubDate>
            <description><![CDATA[é«˜æ€§èƒ½åç¨‹æ± antsæºç å‰–æ antsæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ goroutine æ± ï¼Œå®ç°äº†å¯¹å¤§è§„æ¨¡ goroutine çš„è°ƒåº¦ç®¡ç†]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304061" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç®€ä»‹">ç®€ä»‹<a href="#ç®€ä»‹" class="hash-link" aria-label="ç®€ä»‹çš„ç›´æ¥é“¾æ¥" title="ç®€ä»‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="antsæ˜¯ä»€ä¹ˆ">antsæ˜¯ä»€ä¹ˆ<a href="#antsæ˜¯ä»€ä¹ˆ" class="hash-link" aria-label="antsæ˜¯ä»€ä¹ˆçš„ç›´æ¥é“¾æ¥" title="antsæ˜¯ä»€ä¹ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><p>antsæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ goroutine æ± ï¼Œå®ç°äº†å¯¹å¤§è§„æ¨¡ goroutine çš„è°ƒåº¦ç®¡ç†ã€goroutine å¤ç”¨ï¼Œå…è®¸ä½¿ç”¨è€…åœ¨å¼€å‘å¹¶å‘ç¨‹åºçš„æ—¶å€™é™åˆ¶ goroutine æ•°é‡ï¼Œå¤ç”¨èµ„æºï¼Œè¾¾åˆ°æ›´é«˜æ•ˆæ‰§è¡Œä»»åŠ¡çš„æ•ˆæœã€‚</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="åŠŸèƒ½ç‰¹ç‚¹">åŠŸèƒ½ç‰¹ç‚¹<a href="#åŠŸèƒ½ç‰¹ç‚¹" class="hash-link" aria-label="åŠŸèƒ½ç‰¹ç‚¹çš„ç›´æ¥é“¾æ¥" title="åŠŸèƒ½ç‰¹ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>è‡ªåŠ¨è°ƒåº¦æµ·é‡çš„ goroutinesï¼Œå¤ç”¨ goroutines</li><li>å®šæœŸæ¸…ç†è¿‡æœŸçš„ goroutinesï¼Œè¿›ä¸€æ­¥èŠ‚çœèµ„æº</li><li>æä¾›äº†å¤§é‡æœ‰ç”¨çš„æ¥å£ï¼šä»»åŠ¡æäº¤ã€è·å–è¿è¡Œä¸­çš„ goroutine æ•°é‡ã€åŠ¨æ€è°ƒæ•´ Pool å¤§å°ã€é‡Šæ”¾ Poolã€é‡å¯ Pool</li><li>ä¼˜é›…å¤„ç† panicï¼Œé˜²æ­¢ç¨‹åºå´©æºƒ</li><li>èµ„æºå¤ç”¨ï¼Œæå¤§èŠ‚çœå†…å­˜ä½¿ç”¨é‡ï¼›åœ¨å¤§è§„æ¨¡æ‰¹é‡å¹¶å‘ä»»åŠ¡åœºæ™¯ä¸‹æ¯”åŸç”Ÿ goroutine å¹¶å‘å…·æœ‰æ›´é«˜çš„æ€§èƒ½</li><li>éé˜»å¡æœºåˆ¶</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="antsæ ¸å¿ƒæ¦‚å¿µ">antsæ ¸å¿ƒæ¦‚å¿µ<a href="#antsæ ¸å¿ƒæ¦‚å¿µ" class="hash-link" aria-label="antsæ ¸å¿ƒæ¦‚å¿µçš„ç›´æ¥é“¾æ¥" title="antsæ ¸å¿ƒæ¦‚å¿µçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>Pool ï¼šåç¨‹æ± </li><li>WorkerArrayï¼šPoolæ± ä¸­çš„workeré˜Ÿåˆ—ï¼Œå­˜æ”¾æ‰€æœ‰çš„goWorker</li><li>goWorkerï¼šè¿è¡Œä»»åŠ¡çš„å®é™…æ‰§è¡Œè€…ï¼Œå®ƒå¯åŠ¨ä¸€ä¸ª goroutine æ¥æ¥å—ä»»åŠ¡å¹¶æ‰§è¡Œå‡½æ•°è°ƒç”¨ã€‚</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="poolåç¨‹æ± ">Poolåç¨‹æ± <a href="#poolåç¨‹æ± " class="hash-link" aria-label="Poolåç¨‹æ± çš„ç›´æ¥é“¾æ¥" title="Poolåç¨‹æ± çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="poolç»“æ„">Poolç»“æ„<a href="#poolç»“æ„" class="hash-link" aria-label="Poolç»“æ„çš„ç›´æ¥é“¾æ¥" title="Poolç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>Ants æä¾›äº†ä¸¤ç§Poolç»“æ„ï¼šPoolå’ŒPoolWithFunc ï¼›ä½†ä¸¤è€…é€»è¾‘å¤§è‡´ä¸€æ ·ï¼Œæœ¬æ–‡ç€é‡ä»‹ç»Poolçš„ç»“æ„</p></blockquote><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Pool accepts the tasks from client, it limits the total of goroutines to a given number by recycling goroutines.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Pool </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// capacity of the pool, a negative value means that the capacity of pool is limitless, an infinite pool is used to</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// avoid potential issue of endless blocking caused by nested usage of a pool: submitting a task to pool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// which submits a new task to the same pool.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// åç¨‹æ± çš„å®¹é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> capacity </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// running is the number of the currently running goroutines.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// æ­£åœ¨è¿è¡Œçš„goroutinesçš„æ•°é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> running </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// lock for protecting the worker queue.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// é”ï¼Œè‡ªæ—‹é”ï¼Œä¿æŠ¤é˜Ÿåˆ—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> lock sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Locker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// workers is a slice that store the available workers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// å­˜æ”¾æ± ä¸­æ‰€æœ‰çš„worker,workerArrayåŒ…å«å¯ç”¨workersé˜Ÿåˆ—å’Œè¿‡æœŸworkersé˜Ÿåˆ—ï¼Œåªä¼šä»å¯ç”¨workersé˜Ÿåˆ—ä¸­å–å¯ç”¨worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> workers workerArray</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// state is used to notice the pool to closed itself.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// è®°å½•æ± å­çš„çŠ¶æ€ ï¼ˆå…³é—­ã€å¼€å¯ï¼‰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> state </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// cond for waiting to get an idle worker.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// æ¡ä»¶å˜é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cond </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Cond</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// workerCache speeds up the obtainment of a usable worker in function:retrieveWorker.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// worker å¯¹è±¡æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> workerCache sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// waiting is the number of goroutines already been blocked on pool.Submit(), protected by pool.lock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//é˜»å¡ç­‰å¾…çš„ä»»åŠ¡é‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waiting </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ¸…é“å¤«ï¼Œå®šæ—¶æ¸…ç†workerarray é˜Ÿåˆ—ä¸­è¿‡æœŸçš„worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> purgeDone </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stopPurge context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CancelFunc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å®šæ—¶å™¨ æ›´æ–°poolä¸­nowçš„å­—æ®µ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ticktockDone </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stopTicktock context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CancelFunc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> now atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Value</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// éœ€è¦è‡ªå®šä¹‰åŠ è½½çš„é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> options </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="poolåˆ›å»º">Poolåˆ›å»º<a href="#poolåˆ›å»º" class="hash-link" aria-label="Poolåˆ›å»ºçš„ç›´æ¥é“¾æ¥" title="Poolåˆ›å»ºçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// NewPool generates an instance of ants pool.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size </span><span class="token builtin">int</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> options </span><span class="token operator" style="color:#393A34">...</span><span class="token plain">Option</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> opts </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadOptions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">options</span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// åŠ è½½è‡ªå®šä¹‰çš„optionsä¸­çš„é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> size </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  size </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisablePurge </span><span class="token punctuation" style="color:#393A34">{</span><span class="token comment" style="color:#999988;font-style:italic">// å½“ DisablePurge ä¸º true æ—¶ï¼Œworker ä¸ä¼šè¢«æ¸…é™¤å¹¶ä¸”æ˜¯é©»ç•™çš„ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> expiry </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExpiryDuration</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> expiry </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ErrInvalidPoolExpiry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> expiry </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExpiryDuration </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DefaultCleanIntervalTime </span><span class="token comment" style="color:#999988;font-style:italic">// é»˜è®¤é—´éš”æ—¶é—´1s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Logger </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  opts</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Logger </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> defaultLogger</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  capacity</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lock</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">     syncx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewSpinLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//è‡ªæ—‹é”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  options</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  opts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workerCache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">New </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//sync.pool åˆå§‹åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   pool</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   task</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workerChanCap</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PreAlloc </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> size </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ErrInvalidPreAllocSize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">newWorkerArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">loopQueueType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//å¾ªç¯é˜Ÿåˆ—</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workers </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">newWorkerArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stackType</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æ•°ç»„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewCond</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// sync.condåˆå§‹åŒ–</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goPurge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">goTicktock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="è‡ªæ—‹é”spinlocké‡ç‚¹">è‡ªæ—‹é”SpinLock(é‡ç‚¹)<a href="#è‡ªæ—‹é”spinlocké‡ç‚¹" class="hash-link" aria-label="è‡ªæ—‹é”SpinLock(é‡ç‚¹)çš„ç›´æ¥é“¾æ¥" title="è‡ªæ—‹é”SpinLock(é‡ç‚¹)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>æ€è€ƒï¼šå¦‚ä½•è®¾è®¡ä¸€ç§è‡ªæ—‹é”ï¼Œè®¾è®¡è‡ªæ—‹é”æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</p></blockquote><p>spinLockæ˜¯åŸºäºCASæœºåˆ¶å’ŒæŒ‡æ•°é€€é¿ç®—æ³•å®ç°çš„ä¸€ç§è‡ªæ—‹é”</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> sync</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"runtime"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sync"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"sync/atomic"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> spinLock </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å®ç°sync.Lockeræ¥å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> maxBackoff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">16</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æœ€å¤§çš„å›é¿æ¬¡æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sl </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">spinLock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> backoff </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// åŸºäºCASæœºåˆ¶ï¼Œå°è¯•è·å–é”ï¼Œä¸”ä½¿ç”¨æŒ‡æ•°é€€é¿ç®—æ³•æ¥æä¾›è·å–é”çš„æˆåŠŸç‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">CompareAndSwapUint32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token builtin">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Leverage the exponential backoff algorithm, see https://en.wikipedia.org/wiki/Exponential_backoff.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> backoff</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">//runtime.Gosched()å‡½æ•°åŠŸèƒ½ï¼šä½¿å½“å‰goroutineè®©å‡ºCPUæ—¶é—´ç‰‡ï¼ˆâ€œå›é¿â€ï¼‰ï¼Œè®©å…¶ä»–çš„goroutineè·å¾—æ‰§è¡Œçš„æœºä¼šã€‚å½“å‰çš„goroutineä¼šåœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹ç»§ç»­è¿è¡Œã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">//æ³¨æ„ï¼šå½“ä¸€ä¸ªgoroutineå‘ç”Ÿé˜»å¡ï¼ŒGoä¼šè‡ªåŠ¨åœ°æŠŠä¸è¯¥goroutineå¤„äºåŒä¸€ç³»ç»Ÿçº¿ç¨‹çš„å…¶ä»–goroutinesè½¬ç§»åˆ°å¦ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ä¸Šå»ï¼Œä»¥ä½¿è¿™äº›goroutinesä¸é˜»å¡ï¼ˆä»GMPæ¨¡å‹è§’åº¦æ¥è¯´ï¼Œå°±æ˜¯å½“ä¸Pç»‘å®šçš„Må‘ç”Ÿé˜»å¡ï¼ŒPå°±ä¸å…¶è§£ç»‘ï¼Œç„¶åä¸å¦ä¸€ä¸ªç©ºé—²çš„Mè¿›è¡Œç»‘å®š æˆ–è€… å»åˆ›å»ºä¸€ä¸ªMè¿›è¡Œç»‘å®šï¼‰ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Gosched</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> backoff </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> maxBackoff </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   backoff </span><span class="token operator" style="color:#393A34">&lt;&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sl </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">spinLock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//åŸå­æ“ä½œï¼Œå¹¶å‘å®‰å…¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StoreUint32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token builtin">uint32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sl</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// NewSpinLock instantiates a spin-lock.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewSpinLock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Locker </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">spinLock</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>sync.Locker</p><blockquote><p>è®¾è®¡é”æ—¶å¿…é¡»å®ç°è¯¥æ¥å£ä¸­çš„æ–¹æ³•</p></blockquote><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// A Locker represents an object that can be locked and unlocked.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> Locker </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å…³é”®çŸ¥è¯†ç‚¹">å…³é”®çŸ¥è¯†ç‚¹<a href="#å…³é”®çŸ¥è¯†ç‚¹" class="hash-link" aria-label="å…³é”®çŸ¥è¯†ç‚¹çš„ç›´æ¥é“¾æ¥" title="å…³é”®çŸ¥è¯†ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>sync.Lockeræ¥å£</li><li>æŒ‡æ•°é€€é¿ç®—æ³•</li><li>atomic åŸå­åŒ…ä¸­çš„æ–¹æ³•äº†è§£</li><li>runtime.Gosched()</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»»åŠ¡æ‰§è¡Œ">ä»»åŠ¡æ‰§è¡Œ<a href="#ä»»åŠ¡æ‰§è¡Œ" class="hash-link" aria-label="ä»»åŠ¡æ‰§è¡Œçš„ç›´æ¥é“¾æ¥" title="ä»»åŠ¡æ‰§è¡Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="goworkerçš„ç»“æ„">goWorkerçš„ç»“æ„<a href="#goworkerçš„ç»“æ„" class="hash-link" aria-label="goWorkerçš„ç»“æ„çš„ç›´æ¥é“¾æ¥" title="goWorkerçš„ç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// goWorker is the actual executor who runs the tasks,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// it starts a goroutine that accepts tasks and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// performs function calls.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//goWorker æ˜¯è¿è¡Œä»»åŠ¡çš„å®é™…æ‰§è¡Œè€…ï¼Œå®ƒå¯åŠ¨ä¸€ä¸ª goroutine æ¥æ¥å—ä»»åŠ¡å¹¶æ‰§è¡Œå‡½æ•°è°ƒç”¨ã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> goWorker </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// pool who owns this worker.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pool </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool </span><span class="token comment" style="color:#999988;font-style:italic">// æ‹¥æœ‰workerçš„åè®®æ± </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// task is a job should be done.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> task </span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œæ³¨æ„ï¼šè¯¥chan å¯èƒ½æ˜¯ç¼“å­˜åŒºæˆ–è€…éç¼“å­˜åŒºï¼Œå¦‚æœæ˜¯å¤šæ ¸çš„è¯ï¼Œç¼“å­˜åŒºçš„å¤§å°æ˜¯1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// recycleTime will be updated when putting a worker back into queue.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> recycleTime time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Time </span><span class="token comment" style="color:#999988;font-style:italic">// å›æ”¶æ—¶é—´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gowokerçš„åˆå§‹åŒ–">goWokerçš„åˆå§‹åŒ–<a href="#gowokerçš„åˆå§‹åŒ–" class="hash-link" aria-label="goWokerçš„åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥" title="goWokerçš„åˆå§‹åŒ–çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><blockquote><p>goWorker æ˜¯sync.pool å¯¹è±¡æ± åˆ›å»ºçš„ï¼›åˆå§‹åŒ–åœ¨Poolåˆ›å»ºæ—¶</p></blockquote><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workerCache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">New </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">interface</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   pool</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   task</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">chan</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> workerChanCap</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workerchancapçš„å€¼">workerChanCapçš„å€¼<a href="#workerchancapçš„å€¼" class="hash-link" aria-label="workerChanCapçš„å€¼çš„ç›´æ¥é“¾æ¥" title="workerChanCapçš„å€¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// workerChanCap determines whether the channel of a worker should be a buffered channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// to get the best performance. Inspired by fasthttp at</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// https://github.com/valyala/fasthttp/blob/master/workerpool.go#L139</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> workerChanCap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Use blocking channel if GOMAXPROCS=1.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This switches context from sender to receiver immediately,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// which results in higher performance (under go1.5 at least).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GOMAXPROCS</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Use non-blocking workerChan if GOMAXPROCS&gt;1,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// since otherwise the sender might be dragged down if the receiver is CPU-bound.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="task-ä»»åŠ¡æäº¤">Task ä»»åŠ¡æäº¤<a href="#task-ä»»åŠ¡æäº¤" class="hash-link" aria-label="Task ä»»åŠ¡æäº¤çš„ç›´æ¥é“¾æ¥" title="Task ä»»åŠ¡æäº¤çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Submit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">task </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsClosed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å‰ç½®æ£€æŸ¥ åç¨‹æ± æ˜¯å¦å…³é—­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ErrPoolClosed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">retrieveWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è·å–ä¸€ä¸ªå¯ç”¨çš„workerå–æ‰§è¡Œä»»åŠ¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ErrPoolOverload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> task</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="retrieveworker-å¯ç”¨workerè·å–">retrieveWorker ï¼ˆå¯ç”¨workerè·å–ï¼‰<a href="#retrieveworker-å¯ç”¨workerè·å–" class="hash-link" aria-label="retrieveWorker ï¼ˆå¯ç”¨workerè·å–ï¼‰çš„ç›´æ¥é“¾æ¥" title="retrieveWorker ï¼ˆå¯ç”¨workerè·å–ï¼‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// retrieveWorker returns an available worker to run the tasks.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">retrieveWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> spawnWorker </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ä½¿ç”¨sync.pool åˆ›å»ºworker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workerCache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è‡ªæ—‹é” åŠ é”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">detach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å°è¯•ä»workeræ± å­ä¸­è·å–å¯ç”¨çš„workerï¼Œæ³¨ï¼šä»»åŠ¡æ‰§è¡Œå®Œåï¼Œä¼šå›æ”¶worker ä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// first try to fetch the worker from the queue  è·å–åˆ°è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> capacity </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Cap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> capacity </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> capacity </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Running</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ¤æ–­æ­£åœ¨è¿è¡Œçš„worker æ˜¯å¦è¶…è¿‡ poolåç¨‹è¯è®¾ç½®çš„å®¹é‡å¤§å°ï¼Œæ³¨ capacity=-1 è¡¨ç¤ºæ± å­å®¹é‡æ— é™å¤§</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// if the worker queue is empty and we don't run out of the pool capacity,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// then just spawn a new worker goroutine.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">spawnWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ›å»ºworker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// otherwise, we'll have to keep them blocked and wait for at least one worker to be put back into pool.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Nonblocking </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ¤æ–­åç¨‹æ± æ˜¯å¦ æ˜¯éé˜»å¡æ¨¡å¼ ï¼Œå¦‚æœæ˜¯éé˜»å¡æ¨¡å¼ä¸‹å°±ç›´æ¥è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> retry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é˜»å¡æ¨¡å¼ä¸‹çš„é€»è¾‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// åˆ¤æ–­é˜»å¡çš„ä»»åŠ¡æ•°é‡æ˜¯å¦è¶…è¿‡äº†è®¾ç½®çš„æœ€å¤§é˜ˆå€¼ï¼Œå¦‚æœè¶…è¿‡ç›´æ¥è¿”å›</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MaxBlockingTasks </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Waiting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">MaxBlockingTasks </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addWaiting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é˜»å¡ä»»åŠ¡æ•°é‡åŠ 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Wait</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// block and wait for an available worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addWaiting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è·å–åˆ°å¯ç”¨çš„workeråï¼Œé˜»å¡æ•°é‡å‡ä¸€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsClosed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// check poolæ± æ˜¯å¦å…³é—­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> nw </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> nw </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Running</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> nw </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å¦‚æœæ­£åœ¨æ‰§è¡Œçš„workeræ•°é‡ä¸º0æ—¶ï¼Œéœ€è¦é‡æ–°åˆ›å»ºwoker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token function" style="color:#d73a49">spawnWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">detach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//ä»workerArrayä¸­è·å–å¯ç”¨çš„worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> nw </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Cap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è·å–ä¸åˆ°ï¼Œåˆ¤æ–­æ­£åœ¨è¿è¡Œçš„goroutinesçš„æ•°é‡æ˜¯å¦è¶…è¿‡åå±‚æ± çš„å®¹é‡ï¼Œæ²¡æœ‰å°±åˆ›å»º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">spawnWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">goto</span><span class="token plain"> retry </span><span class="token comment" style="color:#999988;font-style:italic">// goto é‡è¯•é˜»å¡æ¨¡å¼ä¸‹è·å–å¯ç”¨workerçš„é€»è¾‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workerarray-å·¥ä½œæ± çš„ç»“æ„">WorkerArray å·¥ä½œæ± çš„ç»“æ„<a href="#workerarray-å·¥ä½œæ± çš„ç»“æ„" class="hash-link" aria-label="WorkerArray å·¥ä½œæ± çš„ç»“æ„çš„ç›´æ¥é“¾æ¥" title="WorkerArray å·¥ä½œæ± çš„ç»“æ„çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> workerArray </span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é•¿åº¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">isEmpty</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦ä¸ºç©º</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">worker </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ’å…¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">detach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker </span><span class="token comment" style="color:#999988;font-style:italic">// ä»WorkerArrayè·å–å¯ç”¨çš„worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">retrieveExpiry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">duration time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Duration</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker  </span><span class="token comment" style="color:#999988;font-style:italic">//æ¸…é“å¤«è°ƒç”¨pool.workerä¸­çš„æ­¤æ–¹æ³•æ¥æ¸…ç†pool.workersä¸­çš„è¿‡æœŸworker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">reset</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// é‡ç½®ï¼Œæ¸…ç©ºWorkerArrayä¸­æ‰€æœ‰çš„Worker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>workerArray æ¥å£çš„å®ç°workerStack å’ŒloopQueue</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»»åŠ¡æ‰§è¡Œ-1">ä»»åŠ¡æ‰§è¡Œ<a href="#ä»»åŠ¡æ‰§è¡Œ-1" class="hash-link" aria-label="ä»»åŠ¡æ‰§è¡Œçš„ç›´æ¥é“¾æ¥" title="ä»»åŠ¡æ‰§è¡Œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// run starts a goroutine to repeat the process</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// that performs the function calls.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addRunning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// poolçš„running åŠ  ä¸€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">addRunning</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workerCache</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">recover</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> p </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> ph </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PanicHandler</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> ph </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token function" style="color:#d73a49">ph</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"worker exits from a panic: %v\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> buf </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4096</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               n </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Stack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Logger</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"worker exits from panic: %s\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">n</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token comment" style="color:#999988;font-style:italic">// Call Signal() here in case there are goroutines waiting for available workers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> f </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token function" style="color:#d73a49">f</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ä»»åŠ¡æ‰§è¡Œ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> ok </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">revertWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">ok </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å›æ”¶woker</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>revertWorker</code>workerå›æ”¶</p><blockquote><p>é€»è¾‘ç®€å•ï¼š1ã€å¾€workerArray é˜Ÿåˆ—ä¸­æ’å…¥ï¼›2ã€é€šçŸ¥æ­£åœ¨é˜»å¡è·å–workerçš„goroutines</p></blockquote><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// revertWorker puts a worker back into free pool, recycling the goroutines.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">revertWorker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">worker </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">goWorker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> capacity </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Cap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">capacity </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Running</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> capacity</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsClosed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Broadcast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> worker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">recycleTime </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">nowTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// To avoid memory leaks, add a double check in the lock scope.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Issue: https://github.com/panjf2000/ants/issues/113</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsClosed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">insert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">worker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Notify the invoker stuck in 'retrieveWorker()' of there is an available worker in the worker queue.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Signal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="å®šæ—¶æ¸…ç†è¿‡æœŸçš„worker">å®šæ—¶æ¸…ç†è¿‡æœŸçš„worker<a href="#å®šæ—¶æ¸…ç†è¿‡æœŸçš„worker" class="hash-link" aria-label="å®šæ—¶æ¸…ç†è¿‡æœŸçš„workerçš„ç›´æ¥é“¾æ¥" title="å®šæ—¶æ¸…ç†è¿‡æœŸçš„workerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">goPurge</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">DisablePurge </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Start a goroutine to clean up expired workers periodically.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ctx</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stopPurge </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">WithCancel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">go</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">purgeStaleWorkers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// purgeStaleWorkers clears stale workers periodically, it runs in an individual goroutine, as a scavenger.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">Pool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">purgeStaleWorkers</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ticker </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewTicker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExpiryDuration</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ticker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  atomic</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">StoreInt32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">purgeDone</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Done</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain">ticker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">C</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">IsClosed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expiredWorkers </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">workers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">retrieveExpiry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ExpiryDuration</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Notify obsolete workers to stop.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// This notification must be outside the p.lock, since w.task</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// may be blocking and may consume a lot of time if many workers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// are located on non-local CPUs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> expiredWorkers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   expiredWorkers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">task </span><span class="token operator" style="color:#393A34">&lt;-</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   expiredWorkers</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// There might be a situation where all workers have been cleaned up(no worker is running),</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// or another case where the pool capacity has been Tuned up,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// while some invokers still get stuck in "p.cond.Wait()",</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// then it ought to wake all those invokers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Running</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Waiting</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Free</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   p</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">cond</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Broadcast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>antsæºç  è‡ªæ—‹é”çš„è®¾è®¡ã€sync.cond æ¡ä»¶å˜é‡ ã€sync.pool å¯¹è±¡æ± ï¼ŒåŸå­æ“ä½œï¼Œchannelé€šä¿¡ç­‰</p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
            <category>ants</category>
        </item>
        <item>
            <title><![CDATA[Goçš„å†…å­˜å¯¹é½æœºåˆ¶]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/06/memory_struct</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/06/memory_struct</guid>
            <pubDate>Mon, 06 Mar 2023 15:17:31 GMT</pubDate>
            <description><![CDATA[Goçš„ç»“æ„ä½“å†…å­˜å¯¹é½æœºåˆ¶]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304065" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½">ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½<a href="#ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½" class="hash-link" aria-label="ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½çš„ç›´æ¥é“¾æ¥" title="ä»€ä¹ˆæ˜¯å†…å­˜å¯¹é½çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸ºäº†èƒ½è®©CPUå¯ä»¥æ›´å¿«çš„å­˜å–åˆ°å„ä¸ªå­—æ®µï¼ŒGoç¼–è¯‘å™¨ä¼šå¸®ä½ æŠŠ<code>structç»“æ„ä½“</code>åšæ•°æ®çš„å¯¹é½ã€‚æ‰€è°“çš„æ•°æ®å¯¹é½ï¼Œæ˜¯æŒ‡å†…å­˜åœ°å€æ˜¯æ‰€å­˜å‚¨æ•°æ®çš„å¤§å°ï¼ˆæŒ‰å­—èŠ‚ä¸ºå•ä½ï¼‰çš„æ•´æ•°å€ï¼Œä»¥ä¾¿CUå¯ä»¥ä¸€æ¬¡å°†è¯¥æ•°æ®ä»å†…å­˜ä¸­è¯»å–å‡ºæ¥ã€‚ç¼–è¯‘å™¨é€šè¿‡åœ¨ç»“æ„ä½“çš„å„ä¸ªå­—æ®µä¹‹é—´å¡«å……ä¸€äº›ç©ºç™½å·²è¾¾åˆ°å¯¹é½çš„ç›®çš„ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¯¹é½ç³»æ•°">å¯¹é½ç³»æ•°<a href="#å¯¹é½ç³»æ•°" class="hash-link" aria-label="å¯¹é½ç³»æ•°çš„ç›´æ¥é“¾æ¥" title="å¯¹é½ç³»æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸åŒç¡¬ä»¶å¹³å°å ç”¨çš„å¤§å°å’Œå¯¹é½å€¼éƒ½å¯èƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯ä¸ªç‰¹å®šå¹³å°ä¸Šçš„ç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±çš„é»˜è®¤"å¯¹é½ç³»æ•°"ï¼Œ32ä½ç³»ç»Ÿå¯¹é½ç³»æ•°æ˜¯4ï¼Œ64ä½ç³»ç»Ÿå¯¹é½ç³»æ•°æ˜¯8</p><p>ä¸åŒç±»å‹çš„å¯¹é½ç³»æ•°ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ï¼Œä½¿ç”¨Goè¯­è¨€ä¸­çš„<code>unsafe.Alignof</code>å‡½æ•°å¯ä»¥è¿”å›ç›¸åº”ç±»å‹çš„å¯¹é½ç³»æ•°ï¼Œå¯¹é½ç³»æ•°éƒ½ç¬¦åˆ2^nè¿™ä¸ªè§„å¾‹ï¼Œæœ€å¤§ä¹Ÿä¸ä¼šè¶…è¿‡8</p><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">"unsafe"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"bool alignof is %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"string alignof is %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"a"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"int alignof is %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">int</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"float alignof is %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">float64</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"int32 alignof is %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">int32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Printf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"float32 alignof is %d\n"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Alignof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">float32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¯ä»¥æŸ¥çœ‹åˆ°å„ç§ç±»å‹åœ¨Windows 64ä½ä¸Šçš„å¯¹é½ç³»æ•°å¦‚ä¸‹ï¼š</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bool alignof is </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">string alignof is </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int alignof is </span><span class="token number" style="color:#36acaa">8</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float alignof is </span><span class="token number" style="color:#36acaa">8</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">int32 alignof is </span><span class="token number" style="color:#36acaa">4</span><span class="token plain">  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">float32 alignof is </span><span class="token number" style="color:#36acaa">4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç¼ºç‚¹">ç¼ºç‚¹<a href="#ç¼ºç‚¹" class="hash-link" aria-label="ç¼ºç‚¹çš„ç›´æ¥é“¾æ¥" title="ç¼ºç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å­˜åœ¨å†…å­˜ç©ºé—´çš„æµªè´¹ï¼Œå®é™…ä¸Šæ˜¯ç©ºé—´æ¢æ—¶é—´ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä¼˜ç‚¹">ä¼˜ç‚¹<a href="#ä¼˜ç‚¹" class="hash-link" aria-label="ä¼˜ç‚¹çš„ç›´æ¥é“¾æ¥" title="ä¼˜ç‚¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>æé«˜å¯ç§»æ¤æ€§ï¼Œæœ‰äº›CPUå¯ä»¥è®¿é—®ä»»æ„åœ°å€ä¸Šçš„ä»»æ„æ•°æ®ï¼Œè€Œæœ‰äº›CPUåªèƒ½åœ¨ç‰¹å®šåœ°å€è®¿é—®æ•°æ®ï¼Œå› æ­¤ä¸åŒç¡¬ä»¶å¹³å°å…·æœ‰å·®å¼‚æ€§ï¼Œè¿™æ ·çš„ä»£ç å°±ä¸å…·æœ‰ç§»æ¤æ€§ï¼Œå¦‚æœåœ¨ç¼–è¯‘æ—¶ï¼Œå°†åˆ†é…çš„å†…å­˜è¿›è¡Œå¯¹é½ï¼Œè¿™å°±å…·æœ‰å¹³å°å¯ä»¥ç§»æ¤æ€§äº†</li><li>æé«˜å†…å­˜çš„è®¿é—®æ•ˆç‡ï¼Œ32ä½CPUä¸‹ä¸€æ¬¡å¯ä»¥ä»å†…å­˜ä¸­è¯»å–32ä½ï¼ˆ4ä¸ªå­—èŠ‚ï¼‰çš„æ•°æ®ï¼Œ64ä½CPUä¸‹ä¸€æ¬¡å¯ä»¥ä»å†…å­˜ä¸­è¯»å–64ä½ï¼ˆ8ä¸ªå­—èŠ‚ï¼‰çš„æ•°æ®ï¼Œè¿™ä¸ªé•¿åº¦ä¹Ÿç§°ä¸ºCPUçš„å­—é•¿ã€‚CPUä¸€æ¬¡å¯ä»¥è¯»å–1ä¸ªå­—é•¿çš„æ•°æ®åˆ°å†…å­˜ä¸­ï¼Œå¦‚æœæ‰€éœ€è¦è¯»å–çš„æ•°æ®æ­£å¥½è·¨äº†1ä¸ªå­—é•¿ï¼Œé‚£å°±å¾—èŠ±ä¸¤ä¸ªCPUå‘¨æœŸçš„æ—¶é—´å»è¯»å–äº†ã€‚å› æ­¤åœ¨å†…å­˜ä¸­å­˜æ”¾æ•°æ®æ—¶è¿›è¡Œå¯¹é½ï¼Œå¯ä»¥æé«˜å†…å­˜è®¿é—®æ•ˆç‡ã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»“æ„ä½“å¯¹é½åŸåˆ™">ç»“æ„ä½“å¯¹é½åŸåˆ™<a href="#ç»“æ„ä½“å¯¹é½åŸåˆ™" class="hash-link" aria-label="ç»“æ„ä½“å¯¹é½åŸåˆ™çš„ç›´æ¥é“¾æ¥" title="ç»“æ„ä½“å¯¹é½åŸåˆ™çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¯¹é½åŸåˆ™ï¼š</p><ol><li>ç¬¬ä¸€ä¸ªæˆå‘˜åœ¨ç»“æ„ä½“å˜é‡åç§»å¤„ä¸º0çš„åœ°å€å¤„</li><li>å…¶ä»–æˆå‘˜è¦å¯¹é½åˆ°æŸä¸ªæ•°å­—(å¯¹é½æ•°)çš„æ•´æ•°å€çš„åœ°å€å¤„ã€‚å¯¹é½æ•°=ç¼–è¯‘å™¨é»˜è®¤çš„ä¸€ä¸ªå¯¹é½æ•°ä¸è¯¥æˆå‘˜å¤§å°çš„è¾ƒå°å€¼ã€‚æ¯ä¸ªç‰¹å®šå¹³å°ä¸Šçš„ç¼–è¯‘å™¨éƒ½æœ‰è‡ªå·±çš„é»˜è®¤"å¯¹é½ç³»æ•°"ï¼Œ32ä½ç³»ç»Ÿå¯¹é½ç³»æ•°æ˜¯4ï¼Œ64ä½ç³»ç»Ÿå¯¹é½ç³»æ•°æ˜¯8ã€‚</li><li>ç»“æ„ä½“æ€»å¤§å°ä¸ºæœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€</li><li>å¦‚æœåµŒå¥—äº†ç»“æ„ä½“çš„æƒ…å†µï¼ŒåµŒå¥—çš„ç»“æ„ä½“å¯¹é½åˆ°è‡ªå·±çš„æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€å¤„ï¼Œç»“æ„ä½“æ•´ä½“å°±æ˜¯æ‰€æœ‰æœ€å¤§å¯¹é½æ•°çš„æ•´æ•°å€ã€‚</li></ol><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> T1 </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i16  </span><span class="token builtin">int16</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 2 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 1 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> T2 </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i8  </span><span class="token builtin">int8</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 1 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i64 </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 8 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i32 </span><span class="token builtin">int32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> T3 </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i8  </span><span class="token builtin">int8</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 1 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i32 </span><span class="token builtin">int32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i64 </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 8 byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">runtime</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">GOARCH</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// amd64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t1 </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> T1</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 4 bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t2 </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> T2</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 24 bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t3 </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> T3</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Sizeof</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 16 bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ä»¥T1 ç»“æ„
i16å¹¶æ²¡æœ‰ç›´æ¥æ”¾åœ¨boolçš„åé¢ï¼Œè€Œæ˜¯åœ¨boolä¸­å¡«å……äº†ä¸€ä¸ªç©ºç™½åï¼Œæ”¾åˆ°äº†åç§»é‡ä¸º2çš„ä½ç½®ä¸Šã€‚å¦‚æœi16ä»åç§»é‡ä¸º1çš„ä½ç½®å¼€å§‹å ç”¨2ä¸ªå­—èŠ‚ï¼Œæ ¹æ®å¯¹é½åŸåˆ™2ï¼šæ„ä½“å˜é‡ä¸­æˆå‘˜çš„åç§»é‡å¿…é¡»æ˜¯æˆå‘˜å¤§å°çš„æ•´æ•°å€ï¼Œå¥—ç”¨å…¬å¼ 1 % 2 = 1ï¼Œå°±ä¸æ»¡è¶³å¯¹é½çš„è¦æ±‚ï¼Œæ‰€ä»¥i16ä»åç§»é‡ä¸º2çš„ä½ç½®å¼€å§‹</p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
        </item>
        <item>
            <title><![CDATA[æ‡‚ç§’æ€ç³»ç»Ÿ]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/06/ms</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/06/ms</guid>
            <pubDate>Mon, 06 Mar 2023 15:17:31 GMT</pubDate>
            <description><![CDATA[æ‡‚ç§’æ€ç³»ç»Ÿ]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a>
<img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304066" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="çŸ¥è¯†ç‚¹è¯¦è§£">çŸ¥è¯†ç‚¹è¯¦è§£<a href="#çŸ¥è¯†ç‚¹è¯¦è§£" class="hash-link" aria-label="çŸ¥è¯†ç‚¹è¯¦è§£çš„ç›´æ¥é“¾æ¥" title="çŸ¥è¯†ç‚¹è¯¦è§£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
        </item>
        <item>
            <title><![CDATA[è®° IM å³æ—¶é€šä¿¡å¼€å‘]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/06/im</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/06/im</guid>
            <pubDate>Mon, 06 Mar 2023 14:10:16 GMT</pubDate>
            <description><![CDATA[IM å³æ—¶é€šä¿¡å¼€å‘]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304064" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†<a href="#åŸºç¡€çŸ¥è¯†" class="hash-link" aria-label="åŸºç¡€çŸ¥è¯†çš„ç›´æ¥é“¾æ¥" title="åŸºç¡€çŸ¥è¯†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯ç½‘ç»œ">ä»€ä¹ˆæ˜¯ç½‘ç»œ<a href="#ä»€ä¹ˆæ˜¯ç½‘ç»œ" class="hash-link" aria-label="ä»€ä¹ˆæ˜¯ç½‘ç»œçš„ç›´æ¥é“¾æ¥" title="ä»€ä¹ˆæ˜¯ç½‘ç»œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>åœ¨è®¡ç®—æœºé¢†åŸŸä¸­ï¼Œç½‘ç»œæ˜¯ä¿¡æ¯ä¼ è¾“ï¼Œæ¥æ”¶ï¼Œå…±äº«çš„è™šæ‹Ÿå¹³å°</li><li>é€šè¿‡æŠŠå„ä¸ªç‚¹ï¼Œé¢ï¼Œä½“çš„ä¿¡æ¯è”ç³»åˆ°ä¸€èµ·ï¼Œä»è€Œå®ç°è¿™äº›èµ„æºçš„å…±äº«</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹">ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹<a href="#ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹" class="hash-link" aria-label="ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹çš„ç›´æ¥é“¾æ¥" title="ä»€ä¹ˆæ˜¯ç½‘ç»œç¼–ç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ç½‘ç»œç¼–ç¨‹ä»å¤§çš„æ–¹é¢è¯´å°±æ˜¯å¯¹ä¿¡æ¯çš„å‘é€åˆ°æ¥æ”¶</li><li>é€šè¿‡æ“ä½œç›¸å¯¹åº”apiè°ƒåº¦è®¡ç®—æœºç¡¬ä»¶èµ„æºï¼Œå¹¶åˆ©ç”¨ä¼ è¾“ç®¡é“è¿›è¡Œæ•°æ®äº¤æ¢çš„è¿‡ç¨‹</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-å±‚ç½‘ç»œæ¨¡å‹-osi">7 å±‚ç½‘ç»œæ¨¡å‹ OSI<a href="#7-å±‚ç½‘ç»œæ¨¡å‹-osi" class="hash-link" aria-label="7 å±‚ç½‘ç»œæ¨¡å‹ OSIçš„ç›´æ¥é“¾æ¥" title="7 å±‚ç½‘ç»œæ¨¡å‹ OSIçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>åŸºç¡€å±‚ï¼š ç‰©ç†å±‚ï¼ˆphysicalï¼‰,æ•°æ®é“¾è·¯å±‚(datalink),ç½‘ç»œå±‚(network)</li><li>ä¼ è¾“å±‚(Tramsport) :TCP-UDP åè®®å±‚ï¼ŒSocket</li><li>é«˜çº§å±‚ï¼š ä¼šè¯å±‚ï¼ˆsessionï¼‰,è¡¨ç¤ºå±‚(presentation),åº”ç”¨å±‚(Application)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="socketçš„ä½œç”¨ä¸ç»„æˆ">Socketçš„ä½œç”¨ä¸ç»„æˆ<a href="#socketçš„ä½œç”¨ä¸ç»„æˆ" class="hash-link" aria-label="Socketçš„ä½œç”¨ä¸ç»„æˆçš„ç›´æ¥é“¾æ¥" title="Socketçš„ä½œç”¨ä¸ç»„æˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>åœ¨ç½‘ç»œä¼ è¾“ä¸­ç”¨äºå”¯ä¸€æ ‡ç¤ºä¸¤ä¸ªç«¯ç‚¹ä¹‹é—´çš„é“¾æ¥</li><li>ç«¯ç‚¹: åŒ…æ‹¬ï¼ˆip+port)</li><li>4ä¸ªè¦ç´ </li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="æŠ¥æ–‡æ®µ">æŠ¥æ–‡æ®µ<a href="#æŠ¥æ–‡æ®µ" class="hash-link" aria-label="æŠ¥æ–‡æ®µçš„ç›´æ¥é“¾æ¥" title="æŠ¥æ–‡æ®µçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>æŠ¥æ–‡æ®µæ˜¯æŒ‡TCP/IP åè®®ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œèµ·åˆ°è·¯ç”±å¯¼èˆªçš„ä½œç”¨</li><li>ç”¨ä»¥æŸ¥è¯¢å„ä¸ªç½‘ç»œè·¯ç”±ç½‘æ®µï¼ŒIPåœ°å€ï¼Œäº¤æ¢åè®®ç­‰IPæ•°æ®åŒ…</li><li>æŠ¥æ–‡æ®µå……å½“æ•´ä¸ªTCP/IPåè®®æ•°æ®åŒ…çš„å¯¼èˆªè·¯ç”±åŠŸèƒ½</li><li>æŠ¥æ–‡åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸æ–­åœ°å°è£…æˆåˆ†ç»„ï¼ŒåŒ…ï¼Œå¸§æ¥ä¼ è¾“</li><li>å°è£…æ–¹å¼å°±æ˜¯æ·»åŠ ä¸€äº›æ§åˆ¶ä¿¡æ¯ç»„æˆçš„é¦–éƒ¨ï¼Œå³æŠ¥æ–‡å¤´</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ä¼ è¾“åè®®">ä¼ è¾“åè®®<a href="#ä¼ è¾“åè®®" class="hash-link" aria-label="ä¼ è¾“åè®®çš„ç›´æ¥é“¾æ¥" title="ä¼ è¾“åè®®çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="macåœ°å€">Macåœ°å€<a href="#macåœ°å€" class="hash-link" aria-label="Macåœ°å€çš„ç›´æ¥é“¾æ¥" title="Macåœ°å€çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>Media Access Control</li><li>åª’ä½“è®¿é—®æ§åˆ¶ï¼Œæˆ–ç‰©ç†åœ°å€ ç¡¬ä»¶åœ°å€</li><li>ç”¨æ¥å®šä¹‰ç½‘ç»œè®¾å¤‡çš„ä½ç½®</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç«¯å£">ç«¯å£<a href="#ç«¯å£" class="hash-link" aria-label="ç«¯å£çš„ç›´æ¥é“¾æ¥" title="ç«¯å£çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>ç«¯å£ç›¸å½“äºçª—å£ 0-1023 å·ç«¯å£  ä»¥åŠ1024-49151 å·ç«¯å£éƒ½æ˜¯ç‰¹æ®Šç«¯å£</li><li>49142-65525åŠ¨æ€ç«¯å£</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="udp">UDP<a href="#udp" class="hash-link" aria-label="UDPçš„ç›´æ¥é“¾æ¥" title="UDPçš„ç›´æ¥é“¾æ¥">â€‹</a></h3><ul><li>User Datagram Protocol</li><li>ç”¨æˆ·æ•°æ®åè®®ï¼Œåˆç§°ç”¨æˆ·æ•°æ®æŠ¥æ–‡åè®®</li><li>æ˜¯ä¸€ä¸ªç®€å•çš„é¢å‘æ•°æ®æŠ¥çš„ä¼ è¾“å±‚åè®®ï¼Œæ­£å¼è§„èŒƒä¸ºRFC 768</li><li>ç”¨æˆ·æ•°æ®åè®®ï¼Œéè¿æ¥åè®®</li><li>ä¸€æ—¦æŠŠåº”ç”¨ç¨‹åºå‘ç»™ç½‘ç»œå±‚çš„æ•°æ®å‘é€å‡ºå»ï¼Œå°±ä¸ä¿ç•™æ•°æ®å¤‡ä»½</li><li>udp åœ¨IPæ•°æ®çš„æŠ¥çš„å¤´éƒ¨ä»…ä»…åŠ å…¥äº†å¤ç”¨å’Œæ•°æ®æ ¡éªŒ</li><li>å‘é€ç«¯ç”Ÿäº§æ•°æ®ï¼Œæ¥æ”¶ç«¯ä»ç½‘ç»œä¸­æŠ“å–æ•°æ®</li><li>ç»“æ„ç®€å•ï¼Œæ— æ ¡éªŒï¼Œé€Ÿåº¦å¿«ï¼Œå®¹æ˜“ä¸¢åŒ…ï¼Œå¯å¹¿æ’­</li><li>udp åŒ…æœ€å¤§é•¿åº¦ 65535 2^16-1 è‡ªèº«åè®®å ç”¨ 32+32 = 64 ä½=8å­—èŠ‚  65535-8=65527</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="udp-æ ¸å¿ƒapi">UDP æ ¸å¿ƒAPI<a href="#udp-æ ¸å¿ƒapi" class="hash-link" aria-label="UDP æ ¸å¿ƒAPIçš„ç›´æ¥é“¾æ¥" title="UDP æ ¸å¿ƒAPIçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>im</category>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•å†™å¥½ä¸€ä»½æŠ€æœ¯æ–‡æ¡£]]></title>
            <link>https://ahkevinxy.github.io/blog/2022/11/28/index</link>
            <guid>https://ahkevinxy.github.io/blog/2022/11/28/index</guid>
            <pubDate>Mon, 06 Mar 2023 13:46:13 GMT</pubDate>
            <description><![CDATA[å¦‚ä½•å†™å¥½ä¸€ä»½æŠ€æœ¯æ–‡æ¡£]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2211282" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><blockquote><p>å‚è€ƒ <a href="https://juejin.cn/post/6854573217747894279" target="_blank" rel="noopener noreferrer">é£äº«-å³æ—¶èŠå¤©ç³»ç»ŸæŠ€æœ¯æ–‡æ¡£</a></p></blockquote><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>ä¿¡æ¯</div><div class="admonitionContent_S0QG"><p>ä¸‰éƒ¨æ›²:</p><ol><li>æ¦‚è¿°</li><li>ç³»ç»Ÿæ¶æ„</li><li>ç³»ç»Ÿæµç¨‹å›¾</li><li>ç³»ç»Ÿå…³é”®ä»‹ç»(ç™»å½•è®¾è®¡,......)</li><li>ç³»ç»Ÿæ¥å£æ–‡æ¡£</li></ol></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>æ–‡æ¡£</category>
        </item>
        <item>
            <title><![CDATA[Go æºç å­¦ä¹  --- chan]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/06/go_chan</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/06/go_chan</guid>
            <pubDate>Mon, 06 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304062" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h1>hchan</h1><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> hchan </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> qcount   </span><span class="token builtin">uint</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// é€šé“ä¸­çš„æ€»æ•°æ® total data in the queue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dataqsiz </span><span class="token builtin">uint</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// å¾ªç¯é˜Ÿåˆ—çš„å¤§å° size of the circular queue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> buf      unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pointer </span><span class="token comment" style="color:#999988;font-style:italic">// æŒ‡å‘dataqsizå…ƒç´ æ•°ç»„  points to an array of dataqsiz elements</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> elemsize </span><span class="token builtin">uint16</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å¤§å°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> closed   </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ˜¯å¦å…³é—­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> elemtype </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_type </span><span class="token comment" style="color:#999988;font-style:italic">// èŠ‚ç‚¹ç±»å‹ element type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sendx    </span><span class="token builtin">uint</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// å‘é€æ•°æ® send index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> recvx    </span><span class="token builtin">uint</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// æ¥å— receive index</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> recvq    waitq  </span><span class="token comment" style="color:#999988;font-style:italic">// ç­‰å¾…æ¥å— list of recv waiters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sendq    waitq  </span><span class="token comment" style="color:#999988;font-style:italic">//  ç­‰å¾…å‘é€ list of send waiters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// lock protects all fields in hchan, as well as several</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// fields in sudogs blocked on this channel.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Do not change another G's status while holding this lock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// (in particular, do not ready a G), as this can deadlock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// with stack shrinking.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> lock mutex </span><span class="token comment" style="color:#999988;font-style:italic">// é”</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> waitq </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> first </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// ç¬¬ä¸€ä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> last  </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// æœ€åä¸€ä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> sudog </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// The following fields are protected by the hchan.lock of the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// channel this sudog is blocking on. shrinkstack depends on</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this for sudogs involved in channel ops.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> g </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> next </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸‹ä¸€ä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> prev </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸Šä¸€ä¸ª</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> elem unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pointer </span><span class="token comment" style="color:#999988;font-style:italic">// æ•°æ®å…ƒç´ (å¯èƒ½æŒ‡å‘å †æ ˆ)  data element (may point to stack)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// The following fields are never accessed concurrently.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// For channels, waitlink is only accessed by g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// For semaphores, all fields (including the ones above)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// are only accessed when holding a semaRoot lock.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> acquiretime </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> releasetime </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ticket      </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// isSelect indicates g is participating in a select, so</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// g.selectDone must be CAS'd to win the wake-up race.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> isSelect </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// success indicates whether communication over channel c</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// succeeded. It is true if the goroutine was awoken because a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// value was delivered over channel c, and false if awoken</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// because c was closed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> success </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æ˜¯å¦æˆåŠŸ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> parent   </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// semaRootäºŒå‰æ ‘  semaRoot binary tree</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waitlink </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// g.ç­‰å¾…åˆ—è¡¨æˆ–semaRoot  g.waiting list or semaRoot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waittail </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog </span><span class="token comment" style="color:#999988;font-style:italic">// ç­‰å¾… semaRoot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> c        </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">hchan </span><span class="token comment" style="color:#999988;font-style:italic">// é€šé“ channel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>æºç </category>
            <category>Go</category>
        </item>
        <item>
            <title><![CDATA[æºç  ä¸Šè§£è¯» GMPæ¨¡å‹]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/06/go_gmp</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/06/go_gmp</guid>
            <pubDate>Mon, 06 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[path : src/runtime/runtime1.go]]></description>
            <content:encoded><![CDATA[<blockquote><p>path : src/runtime/runtime1.go</p></blockquote><blockquote><p>go  version 1.16.1
<img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304063" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="g">G<a href="#g" class="hash-link" aria-label="Gçš„ç›´æ¥é“¾æ¥" title="Gçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-Go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">type g struct {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Stack (æ ˆ)parameters(å‚æ•°).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // stack describes the actual stack memory: [stack.lo, stack.hi).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // stackguard0 is the stack pointer compared in the Go stack growth prologue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//stackguard0æ˜¯åœ¨Goå †æ ˆå¢é•¿åºè¨€ä¸­æ¯”è¾ƒçš„å †æ ˆæŒ‡é’ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // It is stack.lo+StackGuard normally, but can be StackPreempt to trigger a preemption.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//lo+StackGuardæ­£å¸¸ï¼Œä½†å¯ä»¥æ˜¯StackPreemptè§¦å‘æŠ¢å </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // stackguard1 is the stack pointer compared in the C stack growth prologue.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">//stackguard1æ˜¯åœ¨Cå †æ ˆå¢é•¿åºè¨€ä¸­æ¯”è¾ƒçš„å †æ ˆæŒ‡é’ˆ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // It is stack.lo+StackGuard on g0 and gsignal stacks.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // It is ~0 on other goroutine stacks, to trigger a call to morestackc (and crash).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stack       stack   // offset known to runtime/cgo å·²çŸ¥çš„åç§»é‡ä¸ºruntime/cgo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stackguard0 uintptr // offset known to liblink å·²çŸ¥liblinkçš„åç§»é‡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stackguard1 uintptr // offset known to liblink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> _panic       *_panic // innermost panic - offset known to liblink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> _defer       *_defer // innermost defer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> m            *m      // current m; offset known to arm liblink</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sched        gobuf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> syscallsp    uintptr        // if status==Gsyscall, syscallsp = sched.sp to use during gc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> syscallpc    uintptr        // if status==Gsyscall, syscallpc = sched.pc to use during gc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stktopsp     uintptr        // expected sp at top of stack, to check in traceback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> param        unsafe.Pointer // passed parameter on wakeup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> atomicstatus uint32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> stackLock    uint32 // sigprof/scang lock; TODO: fold in to atomicstatus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> goid         int64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> schedlink    guintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waitsince    int64      // approx time when the g become blocked</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waitreason   waitReason // if status==Gwaiting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> preempt       bool // preemption signal, duplicates stackguard0 = stackpreempt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> preemptStop   bool // transition to _Gpreempted on preemption; otherwise, just deschedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> preemptShrink bool // shrink stack at synchronous safe point</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // asyncSafePoint is set if g is stopped at an asynchronous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // safe point. This means there are frames on the stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // without precise pointer information.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> asyncSafePoint bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> paniconfault bool // panic (instead of crash) on unexpected fault address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcscandone   bool // g has scanned stack; protected by _Gscan bit in status</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> throwsplit   bool // must not split stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // activeStackChans indicates that there are unlocked channels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // pointing into this goroutine's stack. If true, stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // copying needs to acquire channel locks to protect these</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // areas of the stack.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> activeStackChans bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // parkingOnChan indicates that the goroutine is about to</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // park on a chansend or chanrecv. Used to signal an unsafe point</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // for stack shrinking. It's a boolean value, but is updated atomically.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> parkingOnChan uint8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> raceignore     int8     // ignore race detection events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sysblocktraced bool     // StartTrace has emitted EvGoInSyscall about this goroutine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sysexitticks   int64    // cputicks when syscall has returned (for tracing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> traceseq       uint64   // trace event sequencer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tracelastp     puintptr // last P emitted an event for this goroutine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> lockedm        muintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sig            uint32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> writebuf       []byte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sigcode0       uintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sigcode1       uintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sigpc          uintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gopc           uintptr         // pc of go statement that created this goroutine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ancestors      *[]ancestorInfo // ancestor information goroutine(s) that created this goroutine (only used if debug.tracebackancestors)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> startpc        uintptr         // pc of goroutine function</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> racectx        uintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waiting        *sudog         // sudog structures this g is waiting on (that have a valid elem ptr); in lock order</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cgoCtxt        []uintptr      // cgo traceback context</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> labels         unsafe.Pointer // profiler labels</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> timer          *timer         // cached timer for time.Sleep</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> selectDone     uint32         // are we participating in a select and did someone win the race?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Per-G GC state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // gcAssistBytes is this G's GC assist credit in terms of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // bytes allocated. If this is positive, then the G has credit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // to allocate gcAssistBytes bytes without assisting. If this</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // is negative, then the G must correct this by performing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // scan work. We track this in bytes to make it fast to update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // and check for debt in the malloc hot path. The assist ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // determines how this corresponds to scan work debt.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcAssistBytes int64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="m">M<a href="#m" class="hash-link" aria-label="Mçš„ç›´æ¥é“¾æ¥" title="Mçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> m </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> g0      </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">g     </span><span class="token comment" style="color:#999988;font-style:italic">// goroutine with scheduling stack</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> morebuf gobuf  </span><span class="token comment" style="color:#999988;font-style:italic">// gobuf arg to morestack</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> divmod  </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// div/mod denominator for arm - known to liblink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Fields not known to debuggers.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> procid        </span><span class="token builtin">uint64</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// for debuggers, but offset not hard-coded</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gsignal       </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">g           </span><span class="token comment" style="color:#999988;font-style:italic">// signal-handling g</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> goSigStack    gsignalStack </span><span class="token comment" style="color:#999988;font-style:italic">// Go-allocated signal handling stack</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sigmask       sigset       </span><span class="token comment" style="color:#999988;font-style:italic">// storage for saved signal mask</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tls           </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">uintptr</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// thread-local storage (for x86 extern register)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mstartfn      </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> curg          </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">g       </span><span class="token comment" style="color:#999988;font-style:italic">// current running goroutine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> caughtsig     guintptr </span><span class="token comment" style="color:#999988;font-style:italic">// goroutine running during fatal signal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> p             puintptr </span><span class="token comment" style="color:#999988;font-style:italic">// attached p for executing go code (nil if not executing go code)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> nextp         puintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> oldp          puintptr </span><span class="token comment" style="color:#999988;font-style:italic">// the p that was attached before executing a syscall</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id            </span><span class="token builtin">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mallocing     </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> throwing      </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> preemptoff    </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// if != "", keep curg running on this m</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> locks         </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dying         </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> profilehz     </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> spinning      </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// m is out of work and is actively looking for work</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> blocked       </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// m is blocked on a note</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> newSigstack   </span><span class="token builtin">bool</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// minit on C thread called sigaltstack</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> printlock     </span><span class="token builtin">int8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> incgo         </span><span class="token builtin">bool</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic">// m is executing a cgo call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> freeWait      </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// if == 0, safe to free g0 and delete m (atomic)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fastrand      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> needextram    </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> traceback     </span><span class="token builtin">uint8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ncgocall      </span><span class="token builtin">uint64</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// number of cgo calls in total</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ncgo          </span><span class="token builtin">int32</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// number of cgo calls currently in progress</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cgoCallersUse </span><span class="token builtin">uint32</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// if non-zero, cgoCallers in use temporarily</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cgoCallers    </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">cgoCallers </span><span class="token comment" style="color:#999988;font-style:italic">// cgo traceback if crashing in cgo call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> doesPark      </span><span class="token builtin">bool</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// non-P running threads: sysmon and newmHandoff never use .park</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> park          note</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> alllink       </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">m </span><span class="token comment" style="color:#999988;font-style:italic">// on allm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> schedlink     muintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> lockedg       guintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> createstack   </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">uintptr</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// stack that created this thread.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> lockedExt     </span><span class="token builtin">uint32</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// tracking for external LockOSThread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> lockedInt     </span><span class="token builtin">uint32</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// tracking for internal lockOSThread</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> nextwaitm     muintptr    </span><span class="token comment" style="color:#999988;font-style:italic">// next m waiting for lock</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waitunlockf   </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">g</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pointer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waitlock      unsafe</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Pointer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waittraceev   </span><span class="token builtin">byte</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> waittraceskip </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> startingtrace </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> syscalltick   </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> freelink      </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">m </span><span class="token comment" style="color:#999988;font-style:italic">// on sched.freem</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// mFixup is used to synchronize OS related m state (credentials etc)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// use mutex to access.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mFixup </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lock mutex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fn   </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// these are here because they are too large to be on the stack</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// of low-level NOSPLIT functions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> libcall   libcall</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> libcallpc </span><span class="token builtin">uintptr</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// for cpu profiler</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> libcallsp </span><span class="token builtin">uintptr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> libcallg  guintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> syscall   libcall </span><span class="token comment" style="color:#999988;font-style:italic">// stores syscall parameters on windows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vdsoSP </span><span class="token builtin">uintptr</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// SP for traceback while in VDSO call (0 if not in call)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> vdsoPC </span><span class="token builtin">uintptr</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// PC for traceback while in VDSO call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// preemptGen counts the number of completed preemption</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// signals. This is used to detect when a preemption is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// requested, but fails. Accessed atomically.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> preemptGen </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Whether this is a pending preemption signal on this M.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Accessed atomically.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> signalPending </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> dlogPerM</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mOS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Up to 10 locks held by this m, maintained by the lock ranking code.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> locksHeldLen </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> locksHeld    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">heldLockInfo</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="p">P<a href="#p" class="hash-link" aria-label="Pçš„ç›´æ¥é“¾æ¥" title="Pçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> p </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> id          </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> status      </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// one of pidle/prunning/...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> link        puintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> schedtick   </span><span class="token builtin">uint32</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// incremented on every scheduler call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> syscalltick </span><span class="token builtin">uint32</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic">// incremented on every system call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sysmontick  sysmontick </span><span class="token comment" style="color:#999988;font-style:italic">// last tick observed by sysmon</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> m           muintptr   </span><span class="token comment" style="color:#999988;font-style:italic">// back-link to associated m (nil if idle)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mcache      </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">mcache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pcache      pageCache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> raceprocctx </span><span class="token builtin">uintptr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> deferpool    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_defer </span><span class="token comment" style="color:#999988;font-style:italic">// pool of available defer structs of different sizes (see panic.go)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> deferpoolbuf </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_defer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cache of goroutine ids, amortizes accesses to runtimeÂ·sched.goidgen.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> goidcache    </span><span class="token builtin">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> goidcacheend </span><span class="token builtin">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Queue of runnable goroutines. Accessed without lock.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> runqhead </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> runqtail </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> runq     </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">256</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">guintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// runnext, if non-nil, is a runnable G that was ready'd by</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the current G and should be run next instead of what's in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// runq if there's time remaining in the running G's time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// slice. It will inherit the time left in the current time</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// slice. If a set of goroutines is locked in a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// communicate-and-wait pattern, this schedules that set as a</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// unit and eliminates the (potentially large) scheduling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// latency that otherwise arises from adding the ready'd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// goroutines to the end of the run queue.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> runnext guintptr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Available G's (status == Gdead)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gFree </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gList</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  n </span><span class="token builtin">int32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudogcache </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> sudogbuf   </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">sudog</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Cache of mspan objects from the heap.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> mspancache </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// We need an explicit length here because this field is used</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// in allocation codepaths where write barriers are not allowed,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// and eliminating the write barrier/keeping it eliminated from</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// slice updates is tricky, moreso than just managing the length</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// ourselves.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">len</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  buf </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">mspan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> tracebuf traceBufPtr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// traceSweep indicates the sweep events should be traced.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This is used to defer the sweep start event until a span</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// has actually been swept.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> traceSweep </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// traceSwept and traceReclaimed track the number of bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// swept and reclaimed by sweeping in the current sweep loop.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> traceSwept</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> traceReclaimed </span><span class="token builtin">uintptr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> palloc persistentAlloc </span><span class="token comment" style="color:#999988;font-style:italic">// per-P to avoid mutex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Alignment for atomic fields below</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// The when field of the first entry on the timer heap.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This is updated using atomic functions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This is 0 if the timer heap is empty.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> timer0When </span><span class="token builtin">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// The earliest known nextwhen field of a timer with</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// timerModifiedEarlier status. Because the timer may have been</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// modified again, there need not be any timer with this value.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This is updated using atomic functions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This is 0 if the value is unknown.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> timerModifiedEarliest </span><span class="token builtin">uint64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Per-P GC state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcAssistTime         </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Nanoseconds in assistAlloc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcFractionalMarkTime </span><span class="token builtin">int64</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Nanoseconds in fractional mark worker (atomic)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// gcMarkWorkerMode is the mode for the next mark worker to run in.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// That is, this is used to communicate with the worker goroutine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// selected for immediate execution by</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// gcController.findRunnableGCWorker. When scheduling other goroutines,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// this field must be set to gcMarkWorkerNotWorker.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcMarkWorkerMode gcMarkWorkerMode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// gcMarkWorkerStartTime is the nanotime() at which the most recent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// mark worker started.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcMarkWorkerStartTime </span><span class="token builtin">int64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// gcw is this P's GC work buffer cache. The work buffer is</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// filled by write barriers, drained by mutator assists, and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// disposed on certain GC state transitions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> gcw gcWork</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// wbBuf is this P's GC write barrier buffer.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// TODO: Consider caching this in the running G.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> wbBuf wbBuf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> runSafePointFn </span><span class="token builtin">uint32</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// if 1, run sched.safePointFn at next safe point</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// statsSeq is a counter indicating whether this P is currently</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// writing any stats. Its value is even when not, odd when it is.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> statsSeq </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Lock for timers. We normally access the timers while running</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// on this P, but the scheduler can also do it from a different P.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> timersLock mutex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Actions to take at some time. This is used to implement the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// standard library's time package.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Must hold timersLock to access.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> timers </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">timer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Number of timers in P's heap.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Modified using atomic instructions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> numTimers </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Number of timerModifiedEarlier timers on P's heap.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// This should only be modified while holding timersLock,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// or while the timer status is in a transient state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// such as timerModifying.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> adjustTimers </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Number of timerDeleted timers in P's heap.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Modified using atomic instructions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> deletedTimers </span><span class="token builtin">uint32</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Race context used while executing timer functions.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> timerRaceCtx </span><span class="token builtin">uintptr</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// preempt is set to indicate that this P should be enter the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// scheduler ASAP (regardless of what G is running on it).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> preempt </span><span class="token builtin">bool</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> pad cpu</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">CacheLinePad</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go-çš„æ¨¡å‹è°ƒåº¦">Go çš„æ¨¡å‹è°ƒåº¦<a href="#go-çš„æ¨¡å‹è°ƒåº¦" class="hash-link" aria-label="Go çš„æ¨¡å‹è°ƒåº¦çš„ç›´æ¥é“¾æ¥" title="Go çš„æ¨¡å‹è°ƒåº¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>M(thread) å†…æ ¸çº¿ç¨‹   , P(processor) è¿›ç¨‹ ,G (goroutine) åç¨‹</p><ul><li>G :  Go è¿è¡Œæ—¶å¯¹goroutineçš„æè¿°,Gä¸­å­˜æ”¾å¹¶å‘æ‰§è¡Œçš„ <code>ä»£ç å…¥å£åœ°å€</code>,<code>ä¸Šä¸‹æ–‡</code>,<code>è¿è¡Œç¯å¢ƒ</code> (å…³è”çš„På’ŒM),è¿è¡Œæ ˆç­‰æ‰§è¡Œç›¸å…³çš„ä¿¡æ¯,Gçš„æ–°å»º,ä¼‘çœ ,æ¢å¤,åœæ­¢éƒ½å—åˆ°Goè¿è¡Œæ—¶çš„ç®¡ç†</li></ul><p>GOè¿è¡Œæ—¶çš„ç›‘æ§çº¿ç¨‹ä¼šç›‘æ§Gçš„è°ƒåº¦ï¼ŒGä¸ä¼šé•¿ä¹…åœ°é˜»å¡ç³»ç»Ÿçº¿ç¨‹ï¼Œè¿è¡Œæ—¶çš„è°ƒåº¦å™¨ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°å…¶ä»–Gä¸Šè¿è¡Œã€‚Gæ–°å»ºæˆ–æ¢å¤æ—¶ä¼šæ·»åŠ åˆ°è¿è¡Œé˜Ÿåˆ—ï¼Œç­‰å¾…Må–å‡ºå¹¶è¿è¡Œã€‚</p><ul><li><p>M : OSå†…æ ¸çº¿ç¨‹,æ˜¯æ“ä½œç³»ç»Ÿå±‚é¢è°ƒåº¦å’Œæ‰§è¡Œçš„å®ä½“.Mä»…è´Ÿè´£æ‰§è¡Œ,Mä¸åœçš„å”¤é†’æˆ–åˆ›å»º,ç„¶åæ‰§è¡Œ</p></li><li><p>P : ä»£è¡¨Må’ŒPæ‰€éœ€è¦çš„èµ„æº,æ˜¯å¯¹èµ„æºçš„ä¸€ç§æŠ½è±¡ç®¡ç†,P ä¸æ˜¯ä¸€æ®µä»£ç å®ä½“,è€Œæ˜¯ä¸€ä¸ªç®¡ç†çš„æ•°æ®ç»“æ„,Pä¸»è¦æ˜¯é™ä½ Må¯¹Gçš„å¤æ‚æ€§,å¢åŠ ä¸€ä¸ªé—´æ¥çš„æ§åˆ¶å±‚æ•°æ®ç»“æ„,<code>Pæ§åˆ¶Goçš„å¹¶è¡Œåº¦</code>,å®ƒä¸æ˜¯å®ä½“</p></li></ul><p>PæŒæœ‰Gçš„é˜Ÿåˆ—ï¼ŒPå¯ä»¥éš”ç¦»è°ƒåº¦ï¼Œè§£é™¤På’ŒMçš„ç»‘å®šå°±è§£é™¤äº†Må¯¹ä¸€ä¸²Gçš„è°ƒç”¨ã€‚</p><p>Gå¹¶ä¸æ˜¯æ‰§è¡Œä½“ï¼Œè€Œæ˜¯å­˜æ”¾å¹¶å‘æ‰§è¡Œä½“çš„å…ƒä¿¡æ¯ï¼ŒåŒ…æ‹¬å¹¶å‘æ‰§è¡Œçš„å…¥å£å‡½æ•°ã€å †æ ˆã€ä¸Šä¸‹æ–‡ç­‰ä¿¡æ¯ã€‚Gç”±äºä¿å­˜çš„æ˜¯å…ƒä¿¡æ¯ï¼Œä¸ºäº†å‡å°‘å¯¹è±¡çš„åˆ†é…å’Œå›æ”¶ï¼ŒGå¯¹è±¡æ˜¯å¯ä»¥å¤ç”¨ï¼Œåªéœ€è¦å°†ç›¸å…³å…ƒä¿¡æ¯åˆå§‹åŒ–ä¸ºæ–°å€¼å³å¯ã€‚</p><p>Mä»…è´Ÿè´£æ‰§è¡Œï¼ŒMå¯åŠ¨æ—¶è¿›å…¥è¿è¡Œæ—¶çš„ç®¡ç†ä»£ç ï¼Œè¿™æ®µç®¡ç†ä»£ç å¿…é¡»æ‹¿åˆ°Påï¼Œæ‰èƒ½æ‰§è¡Œè°ƒåº¦ã€‚</p><p>Pçš„æ•°ç›®é»˜è®¤æ˜¯CPUæ ¸å¿ƒçš„æ•°é‡ã€‚Må’ŒPçš„æ•°ç›®å·®ä¸å¤šï¼Œä½†è¿è¡Œæ—¶ä¼šæ ¹æ®å½“å‰çš„çŠ¶æ€åŠ¨æ€åœ°åˆ›å»ºMï¼ŒMæœ‰ä¸€ä¸ªæœ€å¤§å€¼ä¸Šé™ï¼š10000ï¼›Gä¸Pæ˜¯M:Nçš„å…³ç³»ï¼ŒMå¯ä»¥æˆåƒä¸Šä¸‡ï¼Œè¿œè¿œå¤§äºN.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="work-stealingç®—æ³•çš„åŸºæœ¬åŸç†">Work Stealingç®—æ³•çš„åŸºæœ¬åŸç†<a href="#work-stealingç®—æ³•çš„åŸºæœ¬åŸç†" class="hash-link" aria-label="Work Stealingç®—æ³•çš„åŸºæœ¬åŸç†çš„ç›´æ¥é“¾æ¥" title="Work Stealingç®—æ³•çš„åŸºæœ¬åŸç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Må’ŒPæ„æˆä¸€ä¸ªè¿è¡Œæ—¶ç¯å¢ƒï¼Œæ¯ä¸ªPæœ‰ä¸€ä¸ªæœ¬åœ°çš„å¯è°ƒåº¦çš„Gé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—é‡Œé¢çš„Gä¼šè¢«Mä¾æ¬¡è°ƒåº¦æ‰§è¡Œï¼Œå¦‚æœæœ¬åœ°é˜Ÿåˆ—ç©ºäº†ï¼Œåˆ™å»å…¨å±€é˜Ÿåˆ—å·å–ä¸€éƒ¨åˆ†Gï¼Œå¦‚æœå…¨å±€é˜Ÿåˆ—ä¹Ÿæ˜¯ç©ºçš„ï¼Œåˆ™å»å…¶ä»–çš„Pä¸­å·å–ä¸€éƒ¨åˆ†Gã€‚</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ä»€ä¹ˆæ—¶å€™åˆ›å»ºmpg">ä»€ä¹ˆæ—¶å€™åˆ›å»ºMã€Pã€G<a href="#ä»€ä¹ˆæ—¶å€™åˆ›å»ºmpg" class="hash-link" aria-label="ä»€ä¹ˆæ—¶å€™åˆ›å»ºMã€Pã€Gçš„ç›´æ¥é“¾æ¥" title="ä»€ä¹ˆæ—¶å€™åˆ›å»ºMã€Pã€Gçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨ç¨‹åºå¯åŠ¨è¿‡ç¨‹ä¸­ä¼šåˆå§‹åŒ–ç©ºé—²Påˆ—è¡¨ï¼ŒPæ˜¯è¿™ä¸ªæ—¶å€™åˆ›å»ºçš„ï¼ŒåŒæ—¶ç¬¬ä¸€ä¸ªGä¹Ÿæ˜¯åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¢«åˆ›å»ºçš„ã€‚</p><p>æ¯ä¸ªå¹¶å‘è°ƒç”¨éƒ½ä¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Gä»»åŠ¡ï¼Œå¦‚ä½•å”¤é†’Mæ‰§è¡Œä»»åŠ¡ã€‚è¿™ä¸ªå”¤é†’ä¸æ˜¯ç‰¹å®šå”¤é†’æŸä¸ªçº¿ç¨‹å»å·¥ä½œï¼Œè€Œæ˜¯å…ˆå°è¯•è·å–å½“å‰çº¿ç¨‹Mï¼Œå¦‚æœæ— æ³•è·å–ï¼Œåˆ™ä»å…¨å±€è°ƒåº¦çš„ç©ºé—²Måˆ—è¡¨ä¸­è·å–å¯ç”¨çš„Mï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çš„Mï¼Œåˆ™æ–°å»ºMï¼Œç„¶åç»‘å®šPå’ŒGYè¿è¡Œã€‚Må’ŒPä¸æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œè€Œæ˜¯æŒ‰éœ€åˆ†é…çš„</p><p>Mçº¿ç¨‹æœ‰ç®¡ç†è°ƒåº¦å’Œåˆ‡æ¢å †æ ˆçš„é€»è¾‘ï¼Œä½†æ˜¯Må¿…é¡»æ‹¿åˆ°Påæ‰èƒ½è¿è¡Œï¼Œå¯ç”¨çœ‹åˆ°Mæ˜¯è‡ªé©±åŠ¨çš„ï¼Œå•éœ€è¦Pçš„é…åˆã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="goroutineç»å†çš„è¿‡ç¨‹">goroutineç»å†çš„è¿‡ç¨‹<a href="#goroutineç»å†çš„è¿‡ç¨‹" class="hash-link" aria-label="goroutineç»å†çš„è¿‡ç¨‹çš„ç›´æ¥é“¾æ¥" title="goroutineç»å†çš„è¿‡ç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><ol><li>é€šè¿‡go func()æ¥åˆ›å»ºä¸€ä¸ª goroutine</li><li>æœ‰ä¸¤ä¸ªå­˜å‚¨çš„Gé˜Ÿåˆ—,ä¸€ä¸ªæ˜¯å±€éƒ¨è°ƒåº¦å™¨Pçš„æœ¬åœ°é˜Ÿåˆ—,ä¸€ä¸ªæ˜¯å…¨å±€Gé˜Ÿåˆ—,æ–°åˆ›å»ºçš„Gä¼šå…ˆä¿å­˜åœ¨Pçš„æœ¬åœ°é˜Ÿåˆ—ä¸­,å¦‚æœPçš„æœ¬åœ°é˜Ÿåˆ—å·²ç»æ»¡äº†å°±ä¼šä¿å­˜åœ¨å…¨å±€é˜Ÿåˆ—ä¸­</li><li>Gåªèƒ½è¿è¡Œåœ¨Mä¸­,ä¸€ä¸ªMå¿…é¡»æœ‰ä¸€ä¸ªP,Mä¸Pæ˜¯1:1çš„å…³ç³». Mä¼šå¯¹Pçš„æœ¬åœ°é˜Ÿåˆ—å¼¹å‡ºä¸€ä¸ªå¯æ‰§è¡ŒçŠ¶æ€çš„Gæ¥æ‰§è¡Œ,å¦‚æœPçš„æœ¬åœ°é˜Ÿåˆ—ä¸ºç©º,å°±ä¼šå‘å…¶å®ƒçš„MPç»„åˆå–ä¸€ä¸ªå¯æ‰§è¡Œçš„Gæ¥æ‰§è¡Œ</li><li>ä¸€ä¸ªM è°ƒåº¦æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªç¯æœºåˆ¶</li><li>å½“ Mæ‰§è¡ŒæŸä¸€ä¸ªG æ—¶å€™ å¦‚æœå‘ç”Ÿäº† syscallæˆ–å…¶ä½™é˜»å¡æ“ä½œ,Mä¼šé˜»å¡,å¦‚æœ</li></ol>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>æºç </category>
            <category>Go</category>
        </item>
        <item>
            <title><![CDATA[é«˜å¹¶å‘ä¸‹å¦‚ä½•ä¿è¯æ¥å£çš„å¹‚ç­‰æ€§]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/05/idempotent</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/05/idempotent</guid>
            <pubDate>Sun, 05 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[é«˜å¹¶å‘å¹‚ç­‰è§£å†³æ–¹æ¡ˆ]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><p><a href="https://mp.weixin.qq.com/s?__biz=MzkwNjMwMTgzMQ==&amp;mid=2247490307&amp;idx=1&amp;sn=b9eeb427c33cb171da6c3f11243a88f4&amp;chksm=c0ebc3ebf79c4afd0d5a1851a975534b672d86c531d28c5933013140173e794f5f53e78a6765&amp;token=751314179&amp;lang=zh_CN&amp;scene=21#wechat_redirect" target="_blank" rel="noopener noreferrer">from</a></p><p><code>æ¥å£å¹‚ç­‰æ€§</code>é—®é¢˜ï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œæ˜¯ä¸€ä¸ªè·Ÿè¯­è¨€æ— å…³çš„å…¬å…±é—®é¢˜ã€‚æœ¬æ–‡åˆ†äº«äº†ä¸€äº›è§£å†³è¿™ç±»é—®é¢˜éå¸¸å®ç”¨çš„åŠæ³•ï¼Œç»å¤§éƒ¨åˆ†å†…å®¹æˆ‘åœ¨é¡¹ç›®ä¸­å®è·µè¿‡çš„ï¼Œç»™æœ‰éœ€è¦çš„å°ä¼™ä¼´ä¸€ä¸ªå‚è€ƒ</p><p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304052" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><p>åœºæ™¯</p><ol><li>æœ‰æ—¶æˆ‘ä»¬åœ¨å¡«å†™æŸäº›formè¡¨å•æ—¶ï¼Œä¿å­˜æŒ‰é’®ä¸å°å¿ƒå¿«é€Ÿç‚¹äº†ä¸¤æ¬¡ï¼Œè¡¨ä¸­ç«Ÿç„¶äº§ç”Ÿäº†ä¸¤æ¡é‡å¤çš„æ•°æ®ï¼Œåªæ˜¯idä¸ä¸€æ ·</li><li>æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä¸ºäº†è§£å†³<code>æ¥å£è¶…æ—¶</code>é—®é¢˜ï¼Œé€šå¸¸ä¼šå¼•å…¥äº†é‡è¯•æœºåˆ¶ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚<code>æ¥å£è¶…æ—¶</code>äº†ï¼Œè¯·æ±‚æ–¹æ²¡èƒ½åŠæ—¶è·å–è¿”å›ç»“æœï¼ˆæ­¤æ—¶æœ‰å¯èƒ½å·²ç»æˆåŠŸäº†ï¼‰ï¼Œä¸ºäº†é¿å…è¿”å›é”™è¯¯çš„ç»“æœï¼ˆè¿™ç§æƒ…å†µä¸å¯èƒ½ç›´æ¥è¿”å›å¤±è´¥å§ï¼Ÿï¼‰ï¼Œäºæ˜¯ä¼šå¯¹è¯¥è¯·æ±‚é‡è¯•å‡ æ¬¡ï¼Œè¿™æ ·ä¹Ÿä¼šäº§ç”Ÿé‡å¤çš„æ•°æ®ã€‚</li><li><code>mq</code>æ¶ˆè´¹è€…åœ¨è¯»å–æ¶ˆæ¯æ—¶ï¼Œæœ‰æ—¶å€™ä¼šè¯»å–åˆ°é‡å¤æ¶ˆæ¯ï¼Œå¦‚æœå¤„ç†ä¸å¥½ï¼Œä¹Ÿä¼šäº§ç”Ÿé‡å¤çš„æ•°æ®ã€‚</li></ol><p><code>æ¥å£å¹‚ç­‰æ€§</code>æ˜¯æŒ‡ç”¨æˆ·å¯¹äºåŒä¸€æ“ä½œå‘èµ·çš„ä¸€æ¬¡è¯·æ±‚æˆ–è€…å¤šæ¬¡è¯·æ±‚çš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šå› ä¸ºå¤šæ¬¡ç‚¹å‡»è€Œäº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚</p><ul><li>insertæ“ä½œï¼Œè¿™ç§æƒ…å†µä¸‹å¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šäº§ç”Ÿé‡å¤æ•°æ®</li><li>updateæ“ä½œï¼Œå¦‚æœåªæ˜¯å•çº¯çš„æ›´æ–°æ•°æ®ï¼Œæ¯”å¦‚ï¼šupdate user set status=1 where id=1ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¦‚æœè¿˜æœ‰è®¡ç®—ï¼Œæ¯”å¦‚ï¼šupdate user set status=status+1 where id=1ï¼Œè¿™ç§æƒ…å†µä¸‹å¤šæ¬¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®é”™è¯¯</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="insertå‰å…ˆselect">insertå‰å…ˆselect<a href="#insertå‰å…ˆselect" class="hash-link" aria-label="insertå‰å…ˆselectçš„ç›´æ¥é“¾æ¥" title="insertå‰å…ˆselectçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨ä¿å­˜æ•°æ®çš„æ¥å£ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†é˜²æ­¢äº§ç”Ÿé‡å¤æ•°æ®ï¼Œä¸€èˆ¬ä¼šåœ¨insertå‰ï¼Œå…ˆæ ¹æ®nameæˆ–codeå­—æ®µselectä¸€ä¸‹æ•°æ®ã€‚å¦‚æœè¯¥æ•°æ®å·²å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œupdateæ“ä½œï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ‰æ‰§è¡Œ  insertæ“ä½œã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ æ‚²è§‚é”">åŠ æ‚²è§‚é”<a href="#åŠ æ‚²è§‚é”" class="hash-link" aria-label="åŠ æ‚²è§‚é”çš„ç›´æ¥é“¾æ¥" title="åŠ æ‚²è§‚é”çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>åœ¨æ”¯ä»˜åœºæ™¯ä¸­ï¼Œç”¨æˆ·Açš„è´¦å·ä½™é¢æœ‰150å…ƒï¼Œæƒ³è½¬å‡º100å…ƒï¼Œæ­£å¸¸æƒ…å†µä¸‹ç”¨æˆ·Açš„ä½™é¢åªå‰©50å…ƒã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œsqlæ˜¯è¿™æ ·çš„ï¼š</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token plain"> amount </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> amount</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœå‡ºç°å¤šæ¬¡ç›¸åŒçš„è¯·æ±‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”¨æˆ·Açš„ä½™é¢å˜æˆè´Ÿæ•°ã€‚è¿™ç§æƒ…å†µï¼Œç”¨æˆ·Aæ¥å¯èƒ½è¦å“­äº†ã€‚äºæ­¤åŒæ—¶ï¼Œç³»ç»Ÿå¼€å‘äººå‘˜å¯èƒ½ä¹Ÿè¦å“­äº†ï¼Œå› ä¸ºè¿™æ˜¯å¾ˆä¸¥é‡çš„ç³»ç»Ÿbugã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åŠ æ‚²è§‚é”ï¼Œå°†ç”¨æˆ·Açš„é‚£è¡Œæ•°æ®é”ä½ï¼Œåœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€ä¸ªè¯·æ±‚è·å¾—é”ï¼Œæ›´æ–°æ•°æ®ï¼Œå…¶ä»–çš„è¯·æ±‚åˆ™ç­‰å¾…ã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹é€šè¿‡å¦‚ä¸‹sqlé”ä½å•è¡Œæ•°æ®ï¼š</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">update</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol><li>å¤šä¸ªè¯·æ±‚åŒæ—¶æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</li><li>åˆ¤æ–­ä½™é¢æ˜¯å¦ä¸è¶³100ï¼Œå¦‚æœä½™é¢ä¸è¶³ï¼Œåˆ™ç›´æ¥è¿”å›ä½™é¢ä¸è¶³ã€‚</li><li>å¦‚æœä½™é¢å……è¶³ï¼Œåˆ™é€šè¿‡for updateå†æ¬¡æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”å°è¯•è·å–é”</li><li>åªæœ‰ç¬¬ä¸€ä¸ªè¯·æ±‚èƒ½è·å–åˆ°è¡Œé”ï¼Œå…¶ä½™æ²¡æœ‰è·å–é”çš„è¯·æ±‚ï¼Œåˆ™ç­‰å¾…ä¸‹ä¸€æ¬¡è·å–é”çš„æœºä¼š</li><li>ç¬¬ä¸€ä¸ªè¯·æ±‚è·å–åˆ°é”ä¹‹åï¼Œåˆ¤æ–­ä½™é¢æ˜¯å¦ä¸è¶³100ï¼Œå¦‚æœä½™é¢è¶³å¤Ÿï¼Œåˆ™è¿›è¡Œupdateæ“ä½œã€‚</li><li>å¦‚æœä½™é¢ä¸è¶³ï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼Œåˆ™ç›´æ¥è¿”å›æˆåŠŸã€‚</li></ol><blockquote><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯mysqlæ•°æ®åº“ï¼Œå­˜å‚¨å¼•æ“å¿…é¡»ç”¨innodbï¼Œå› ä¸ºå®ƒæ‰æ”¯æŒäº‹åŠ¡ã€‚æ­¤å¤–ï¼Œè¿™é‡Œidå­—æ®µä¸€å®šè¦æ˜¯ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•ï¼Œä¸ç„¶ä¼šé”ä½æ•´å¼ è¡¨ã€‚</p></blockquote><p>æ‚²è§‚é”éœ€è¦åœ¨åŒä¸€ä¸ªäº‹åŠ¡æ“ä½œè¿‡ç¨‹ä¸­é”ä½ä¸€è¡Œæ•°æ®ï¼Œå¦‚æœäº‹åŠ¡è€—æ—¶æ¯”è¾ƒé•¿ï¼Œä¼šé€ æˆå¤§é‡çš„è¯·æ±‚ç­‰å¾…ï¼Œå½±å“æ¥å£æ€§èƒ½ã€‚</p><p>æ¯æ¬¡è¯·æ±‚æ¥å£å¾ˆéš¾ä¿è¯éƒ½æœ‰ç›¸åŒçš„è¿”å›å€¼ï¼Œæ‰€ä»¥ä¸é€‚åˆå¹‚ç­‰æ€§è®¾è®¡åœºæ™¯ï¼Œä½†æ˜¯åœ¨é˜²é‡åœºæ™¯ä¸­æ˜¯å¯ä»¥çš„ä½¿ç”¨çš„ã€‚</p><p>åœ¨è¿™é‡Œé¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œ<code>é˜²é‡è®¾è®¡</code> å’Œ <code>å¹‚ç­‰è®¾è®¡</code>ï¼Œå…¶å®æ˜¯æœ‰åŒºåˆ«çš„ã€‚é˜²é‡è®¾è®¡ä¸»è¦ä¸ºäº†é¿å…äº§ç”Ÿé‡å¤æ•°æ®ï¼Œå¯¹æ¥å£è¿”å›æ²¡æœ‰å¤ªå¤šè¦æ±‚ã€‚è€Œå¹‚ç­‰è®¾è®¡é™¤äº†é¿å…äº§ç”Ÿé‡å¤æ•°æ®ä¹‹å¤–ï¼Œè¿˜è¦æ±‚æ¯æ¬¡è¯·æ±‚éƒ½è¿”å›ä¸€æ ·çš„ç»“æœã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ ä¹è§‚é”">åŠ ä¹è§‚é”<a href="#åŠ ä¹è§‚é”" class="hash-link" aria-label="åŠ ä¹è§‚é”çš„ç›´æ¥é“¾æ¥" title="åŠ ä¹è§‚é”çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ—¢ç„¶æ‚²è§‚é”æœ‰æ€§èƒ½é—®é¢˜ï¼Œä¸ºäº†æå‡æ¥å£æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹è§‚é”ã€‚éœ€è¦åœ¨è¡¨ä¸­å¢åŠ ä¸€ä¸ªtimestampæˆ–è€…versionå­—æ®µï¼Œè¿™é‡Œä»¥versionå­—æ®µä¸ºä¾‹ã€‚</p><p>åœ¨æ›´æ–°æ•°æ®ä¹‹å‰å…ˆæŸ¥è¯¢ä¸€ä¸‹æ•°æ®ï¼š</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">select</span><span class="token plain"> id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">amount</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">version </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>å¦‚æœæ•°æ®å­˜åœ¨ï¼Œå‡è®¾æŸ¥åˆ°çš„versionç­‰äº1ï¼Œå†ä½¿ç”¨idå’Œversionå­—æ®µä½œä¸ºæŸ¥è¯¢æ¡ä»¶æ›´æ–°æ•°æ®ï¼š</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> amount</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amount</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ›´æ–°æ•°æ®çš„åŒæ—¶version+1ï¼Œç„¶ååˆ¤æ–­æœ¬æ¬¡updateæ“ä½œçš„å½±å“è¡Œæ•°ï¼Œå¦‚æœå¤§äº0ï¼Œåˆ™è¯´æ˜æœ¬æ¬¡æ›´æ–°æˆåŠŸï¼Œå¦‚æœç­‰äº0ï¼Œåˆ™è¯´æ˜æœ¬æ¬¡æ›´æ–°æ²¡æœ‰è®©æ•°æ®å˜æ›´ã€‚</p><p>ç”±äºç¬¬ä¸€æ¬¡è¯·æ±‚versionç­‰äº1æ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œæ“ä½œæˆåŠŸåversionå˜æˆ2äº†ã€‚è¿™æ—¶å¦‚æœå¹¶å‘çš„è¯·æ±‚è¿‡æ¥ï¼Œå†æ‰§è¡Œç›¸åŒçš„sqlï¼š</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">user</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> amount</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">amount</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">100</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">version</span><span class="token operator" style="color:#393A34">+</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> version</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>è¯¥updateæ“ä½œä¸ä¼šçœŸæ­£æ›´æ–°æ•°æ®ï¼Œæœ€ç»ˆsqlçš„æ‰§è¡Œç»“æœå½±å“è¡Œæ•°æ˜¯0ï¼Œå› ä¸ºversionå·²ç»å˜æˆ2äº†ï¼Œwhereä¸­çš„version=1è‚¯å®šæ— æ³•æ»¡è¶³æ¡ä»¶ã€‚ä½†ä¸ºäº†ä¿è¯æ¥å£å¹‚ç­‰æ€§ï¼Œæ¥å£å¯ä»¥ç›´æ¥è¿”å›æˆåŠŸï¼Œå› ä¸ºversionå€¼å·²ç»ä¿®æ”¹äº†ï¼Œé‚£ä¹ˆå‰é¢å¿…å®šå·²ç»æˆåŠŸè¿‡ä¸€æ¬¡ï¼Œåé¢éƒ½æ˜¯é‡å¤çš„è¯·æ±‚ã€‚</p><ol><li>å…ˆæ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…å«versionå­—æ®µ</li><li>æ ¹æ®idå’Œversionå­—æ®µå€¼ä½œä¸ºwhereæ¡ä»¶çš„å‚æ•°ï¼Œæ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒæ—¶version+1</li><li>åˆ¤æ–­æ“ä½œå½±å“è¡Œæ•°ï¼Œå¦‚æœå½±å“1è¡Œï¼Œåˆ™è¯´æ˜æ˜¯ä¸€æ¬¡è¯·æ±‚ï¼Œå¯ä»¥åšå…¶ä»–æ•°æ®æ“ä½œ</li><li>å¦‚æœå½±å“0è¡Œï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼Œåˆ™ç›´æ¥è¿”å›æˆåŠŸ</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å”¯ä¸€ç´¢å¼•">åŠ å”¯ä¸€ç´¢å¼•<a href="#åŠ å”¯ä¸€ç´¢å¼•" class="hash-link" aria-label="åŠ å”¯ä¸€ç´¢å¼•çš„ç›´æ¥é“¾æ¥" title="åŠ å”¯ä¸€ç´¢å¼•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç»å¤§æ•°æƒ…å†µä¸‹ï¼Œä¸ºäº†é˜²æ­¢é‡å¤æ•°æ®çš„äº§ç”Ÿï¼Œæˆ‘ä»¬éƒ½ä¼šåœ¨è¡¨ä¸­åŠ å”¯ä¸€ç´¢å¼•ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€å•ï¼Œå¹¶ä¸”æœ‰æ•ˆçš„æ–¹æ¡ˆã€‚</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">alter</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">table</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">order</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">add</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">UNIQUE</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">KEY</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">un_code</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">code</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>åŠ äº†å”¯ä¸€ç´¢å¼•ä¹‹åï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®å¯ä»¥æ’å…¥æˆåŠŸã€‚ä½†åé¢çš„ç›¸åŒè¯·æ±‚ï¼Œæ’å…¥æ•°æ®æ—¶ä¼šæŠ¥<code>Duplicate entry '002' for key 'order.un_code</code>å¼‚å¸¸ï¼Œè¡¨ç¤ºå”¯ä¸€ç´¢å¼•æœ‰å†²çªã€‚</p><p>è™½è¯´æŠ›å¼‚å¸¸å¯¹æ•°æ®æ¥è¯´æ²¡æœ‰å½±å“ï¼Œä¸ä¼šé€ æˆé”™è¯¯æ•°æ®ã€‚ä½†æ˜¯ä¸ºäº†ä¿è¯æ¥å£å¹‚ç­‰æ€§ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¯¥å¼‚å¸¸è¿›è¡Œæ•è·ï¼Œç„¶åè¿”å›æˆåŠŸã€‚</p><ol><li>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶é›†æ•°æ®ã€‚</li><li>å°†è¯¥æ•°æ®æ’å…¥mysql</li><li>åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™æ“ä½œå…¶ä»–æ•°æ®ï¼ˆå¯èƒ½è¿˜æœ‰å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘ï¼‰ã€‚</li><li>å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œæ•è·å”¯ä¸€ç´¢å¼•å†²çªå¼‚å¸¸ï¼Œç›´æ¥è¿”å›æˆåŠŸã€‚</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å»ºé˜²é‡è¡¨">å»ºé˜²é‡è¡¨<a href="#å»ºé˜²é‡è¡¨" class="hash-link" aria-label="å»ºé˜²é‡è¡¨çš„ç›´æ¥é“¾æ¥" title="å»ºé˜²é‡è¡¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ‰æ—¶å€™è¡¨ä¸­å¹¶éæ‰€æœ‰çš„åœºæ™¯éƒ½ä¸å…è®¸äº§ç”Ÿé‡å¤çš„æ•°æ®ï¼Œåªæœ‰æŸäº›ç‰¹å®šåœºæ™¯æ‰ä¸å…è®¸ã€‚è¿™æ—¶å€™ï¼Œç›´æ¥åœ¨è¡¨ä¸­åŠ å”¯ä¸€ç´¢å¼•ï¼Œæ˜¾ç„¶æ˜¯ä¸å¤ªåˆé€‚çš„ã€‚
é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>å»ºé˜²é‡è¡¨</code>æ¥è§£å†³é—®é¢˜ã€‚</p><p>è¯¥è¡¨å¯ä»¥åªåŒ…å«ä¸¤ä¸ªå­—æ®µï¼š<code>id</code> å’Œ <code>å”¯ä¸€ç´¢å¼•</code>ï¼Œå”¯ä¸€ç´¢å¼•å¯ä»¥æ˜¯å¤šä¸ªå­—æ®µæ¯”å¦‚ï¼šnameã€codeç­‰ç»„åˆèµ·æ¥çš„å”¯ä¸€æ ‡è¯†ï¼Œä¾‹å¦‚ï¼šsusan_0001ã€‚</p><ol><li>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶é›†æ•°æ®ã€‚</li><li>å°†è¯¥æ•°æ®æ’å…¥mysqlé˜²é‡è¡¨</li><li>åˆ¤æ–­æ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœæˆåŠŸï¼Œåˆ™åšmysqlå…¶ä»–çš„æ•°æ®æ“ä½œï¼ˆå¯èƒ½è¿˜æœ‰å…¶ä»–çš„ä¸šåŠ¡é€»è¾‘ï¼‰ã€‚</li><li>å¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œæ•è·å”¯ä¸€ç´¢å¼•å†²çªå¼‚å¸¸ï¼Œç›´æ¥è¿”å›æˆåŠŸã€‚</li></ol><blockquote><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šé˜²é‡è¡¨å’Œä¸šåŠ¡è¡¨å¿…é¡»åœ¨åŒä¸€ä¸ªæ•°æ®åº“ä¸­ï¼Œå¹¶ä¸”æ“ä½œè¦åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ ¹æ®çŠ¶æ€æœº">æ ¹æ®çŠ¶æ€æœº<a href="#æ ¹æ®çŠ¶æ€æœº" class="hash-link" aria-label="æ ¹æ®çŠ¶æ€æœºçš„ç›´æ¥é“¾æ¥" title="æ ¹æ®çŠ¶æ€æœºçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¾ˆå¤šæ—¶å€™ä¸šåŠ¡è¡¨æ˜¯æœ‰çŠ¶æ€çš„ï¼Œæ¯”å¦‚è®¢å•è¡¨ä¸­æœ‰ï¼š1-ä¸‹å•ã€2-å·²æ”¯ä»˜ã€3-å®Œæˆã€4-æ’¤é”€ç­‰çŠ¶æ€ã€‚å¦‚æœè¿™äº›çŠ¶æ€çš„å€¼æ˜¯æœ‰è§„å¾‹çš„ï¼ŒæŒ‰ç…§ä¸šåŠ¡èŠ‚ç‚¹æ­£å¥½æ˜¯ä»å°åˆ°å¤§ï¼Œæˆ‘ä»¬å°±èƒ½é€šè¿‡å®ƒæ¥ä¿è¯æ¥å£çš„å¹‚ç­‰æ€§ã€‚</p><p>å‡å¦‚<code>id=123</code>çš„è®¢å•çŠ¶æ€æ˜¯å·²æ”¯ä»˜ï¼Œç°åœ¨è¦å˜æˆå®ŒæˆçŠ¶æ€ã€‚</p><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">update</span><span class="token plain"> </span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token identifier">order</span><span class="token identifier punctuation" style="color:#393A34">`</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">set</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">status</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">where</span><span class="token plain"> id</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">and</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">status</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œè¯¥è®¢å•çš„çŠ¶æ€æ˜¯<code>å·²æ”¯ä»˜</code>ï¼Œå€¼æ˜¯<code>2</code>ï¼Œæ‰€ä»¥è¯¥<code>update</code>è¯­å¥å¯ä»¥æ­£å¸¸æ›´æ–°æ•°æ®ï¼Œ<code>sql</code>æ‰§è¡Œç»“æœçš„å½±å“è¡Œæ•°æ˜¯<code>1</code>ï¼Œè®¢å•çŠ¶æ€å˜æˆäº†<code>3</code>ã€‚</p><p>åé¢æœ‰ç›¸åŒçš„è¯·æ±‚è¿‡æ¥ï¼Œå†æ‰§è¡Œç›¸åŒçš„sqlæ—¶ï¼Œç”±äºè®¢å•çŠ¶æ€å˜æˆäº†3ï¼Œå†ç”¨status=2ä½œä¸ºæ¡ä»¶ï¼Œæ— æ³•æŸ¥è¯¢å‡ºéœ€è¦æ›´æ–°çš„æ•°æ®ï¼Œæ‰€ä»¥æœ€ç»ˆsqlæ‰§è¡Œç»“æœçš„å½±å“è¡Œæ•°æ˜¯0ï¼Œå³ä¸ä¼šçœŸæ­£çš„æ›´æ–°æ•°æ®ã€‚ä½†ä¸ºäº†ä¿è¯æ¥å£å¹‚ç­‰æ€§ï¼Œå½±å“è¡Œæ•°æ˜¯0æ—¶ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç›´æ¥è¿”å›æˆåŠŸã€‚</p><ol><li>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯æ”¶é›†æ•°æ®ã€‚</li><li>æ ¹æ®idå’Œå½“å‰çŠ¶æ€ä½œä¸ºæ¡ä»¶ï¼Œæ›´æ–°æˆä¸‹ä¸€ä¸ªçŠ¶æ€</li><li>åˆ¤æ–­æ“ä½œå½±å“è¡Œæ•°ï¼Œå¦‚æœå½±å“äº†1è¡Œï¼Œè¯´æ˜å½“å‰æ“ä½œæˆåŠŸï¼Œå¯ä»¥è¿›è¡Œå…¶ä»–æ•°æ®æ“ä½œã€‚</li><li>å¦‚æœå½±å“äº†0è¡Œï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼Œç›´æ¥è¿”å›æˆåŠŸã€‚</li></ol><blockquote><p>ä¸»è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œè¯¥æ–¹æ¡ˆä»…é™äºè¦æ›´æ–°çš„<code>è¡¨æœ‰çŠ¶æ€å­—æ®µ</code>ï¼Œå¹¶ä¸”åˆšå¥½è¦æ›´æ–°<code>çŠ¶æ€å­—æ®µ</code>çš„è¿™ç§ç‰¹æ®Šæƒ…å†µï¼Œå¹¶éæ‰€æœ‰åœºæ™¯éƒ½é€‚ç”¨ã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ åˆ†å¸ƒå¼é”">åŠ åˆ†å¸ƒå¼é”<a href="#åŠ åˆ†å¸ƒå¼é”" class="hash-link" aria-label="åŠ åˆ†å¸ƒå¼é”çš„ç›´æ¥é“¾æ¥" title="åŠ åˆ†å¸ƒå¼é”çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å…¶å®å‰é¢ä»‹ç»è¿‡çš„<code>åŠ å”¯ä¸€ç´¢å¼•</code>æˆ–è€…<code>åŠ é˜²é‡è¡¨</code>ï¼Œæœ¬è´¨æ˜¯ä½¿ç”¨äº†<code>æ•°æ®åº“</code>çš„<code>åˆ†å¸ƒå¼é”</code>ï¼Œä¹Ÿå±äº<code>åˆ†å¸ƒå¼é”</code>çš„ä¸€ç§ã€‚ä½†ç”±äº<code>æ•°æ®åº“åˆ†å¸ƒå¼é”</code>çš„æ€§èƒ½ä¸å¤ªå¥½ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹ç”¨ï¼š<code>redis</code>æˆ–<code>zookeeper</code>ã€‚</p><p>é‰´äºç°åœ¨å¾ˆå¤šå…¬å¸åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒæ”¹ç”¨<code>apollo</code>æˆ–<code>nacos</code>ï¼Œå·²ç»å¾ˆå°‘ç”¨<code>zookeeper</code>äº†ï¼Œæˆ‘ä»¬ä»¥<code>redis</code>ä¸ºä¾‹ä»‹ç»åˆ†å¸ƒå¼é”ã€‚</p><p>ç›®å‰ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°redisçš„åˆ†å¸ƒå¼é”ï¼š</p><ol><li>setNxå‘½ä»¤</li><li>setå‘½ä»¤</li><li>Redissionæ¡†æ¶</li></ol><p>å…·ä½“æ­¥éª¤ï¼š</p><ol><li>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡ç«¯ä¼šæ”¶é›†æ•°æ®ï¼Œå¹¶ä¸”ç”Ÿæˆè®¢å•å·codeä½œä¸ºå”¯ä¸€ä¸šåŠ¡å­—æ®µã€‚</li><li>ä½¿ç”¨redisçš„setå‘½ä»¤ï¼Œå°†è¯¥è®¢å•codeè®¾ç½®åˆ°redisä¸­ï¼ŒåŒæ—¶è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚</li><li>åˆ¤æ–­æ˜¯å¦è®¾ç½®æˆåŠŸï¼Œå¦‚æœè®¾ç½®æˆåŠŸï¼Œè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œåˆ™è¿›è¡Œæ•°æ®æ“ä½œã€‚</li><li>å¦‚æœè®¾ç½®å¤±è´¥ï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼Œåˆ™ç›´æ¥è¿”å›æˆåŠŸã€‚</li></ol><blockquote><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼šåˆ†å¸ƒå¼é”ä¸€å®šè¦è®¾ç½®ä¸€ä¸ªåˆç†çš„è¿‡æœŸæ—¶é—´ï¼Œå¦‚æœè®¾ç½®è¿‡çŸ­ï¼Œæ— æ³•æœ‰æ•ˆçš„é˜²æ­¢é‡å¤è¯·æ±‚ã€‚å¦‚æœè®¾ç½®è¿‡é•¿ï¼Œå¯èƒ½ä¼šæµªè´¹redisçš„å­˜å‚¨ç©ºé—´ï¼Œéœ€è¦æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µè€Œå®šã€‚</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è·å–token">è·å–token<a href="#è·å–token" class="hash-link" aria-label="è·å–tokençš„ç›´æ¥é“¾æ¥" title="è·å–tokençš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é™¤äº†ä¸Šè¿°æ–¹æ¡ˆä¹‹å¤–ï¼Œè¿˜æœ‰æœ€åä¸€ç§ä½¿ç”¨tokençš„æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆè·Ÿä¹‹å‰çš„æ‰€æœ‰æ–¹æ¡ˆéƒ½æœ‰ç‚¹ä¸ä¸€æ ·ï¼Œéœ€è¦ä¸¤æ¬¡è¯·æ±‚æ‰èƒ½å®Œæˆä¸€æ¬¡ä¸šåŠ¡æ“ä½œã€‚</p><ol><li>ç¬¬ä¸€æ¬¡è¯·æ±‚è·å–token</li><li>ç¬¬äºŒæ¬¡è¯·æ±‚å¸¦ç€è¿™ä¸ªtokenï¼Œå®Œæˆä¸šåŠ¡æ“ä½œã€‚</li></ol><p>å…·ä½“æ­¥éª¤ï¼š</p><ol><li>ç”¨æˆ·è®¿é—®é¡µé¢æ—¶ï¼Œæµè§ˆå™¨è‡ªåŠ¨å‘èµ·è·å–tokenè¯·æ±‚ã€‚</li><li>æœåŠ¡ç«¯ç”Ÿæˆtokenï¼Œä¿å­˜åˆ°redisä¸­ï¼Œç„¶åè¿”å›ç»™æµè§ˆå™¨ã€‚</li><li>ç”¨æˆ·é€šè¿‡æµè§ˆå™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œæºå¸¦è¯¥tokenã€‚</li><li>åœ¨redisä¸­æŸ¥è¯¢è¯¥tokenæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œåšåˆ™åç»­çš„æ•°æ®æ“ä½œã€‚</li><li>å¦‚æœå­˜åœ¨ï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼Œåˆ™ç›´æ¥è¿”å›æˆåŠŸã€‚</li><li>åœ¨redisä¸­tokenä¼šåœ¨è¿‡æœŸæ—¶é—´ä¹‹åï¼Œè¢«è‡ªåŠ¨åˆ é™¤ã€‚</li></ol><blockquote><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼štokenå¿…é¡»æ˜¯å…¨å±€å”¯ä¸€çš„ã€‚</p></blockquote>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>é«˜å¹¶å‘</category>
            <category>å¹‚ç­‰</category>
            <category>è§£å†³æ–¹æ¡ˆ</category>
        </item>
        <item>
            <title><![CDATA[å¦‚ä½•ä¼˜é›…çš„æ¥å£]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/03/05/index</link>
            <guid>https://ahkevinxy.github.io/blog/2023/03/05/index</guid>
            <pubDate>Sun, 05 Mar 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[å¦‚ä½•ä¼˜é›…çš„æ¥å£,æ¥å£è®¾è®¡,é¡µé¢ä¼˜åŒ–,ä»£ç è§„èŒƒ]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><p><a href="https://juejin.cn/post/7176220436714225721" target="_blank" rel="noopener noreferrer">from</a></p><p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2304051" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç­¾å">ç­¾å<a href="#ç­¾å" class="hash-link" aria-label="ç­¾åçš„ç›´æ¥é“¾æ¥" title="ç­¾åçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æ¥å£è¯·æ±‚å°† <code>è¯·æ±‚å‚æ•°</code> + <code>æ—¶é—´æˆ³</code> + <code>ç§˜é’¥</code> æ‹¼æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²,é€šè¿‡<code>md5</code> ç­‰hash ç®—æ³•,ç”Ÿæˆä¸€ä¸ªsign</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="åŠ å¯†">åŠ å¯†<a href="#åŠ å¯†" class="hash-link" aria-label="åŠ å¯†çš„ç›´æ¥é“¾æ¥" title="åŠ å¯†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sm2-å›½å¯†">sm2 å›½å¯†<a href="#sm2-å›½å¯†" class="hash-link" aria-label="sm2 å›½å¯†çš„ç›´æ¥é“¾æ¥" title="sm2 å›½å¯†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="rsa-åŠ å¯†">rsa åŠ å¯†<a href="#rsa-åŠ å¯†" class="hash-link" aria-label="rsa åŠ å¯†çš„ç›´æ¥é“¾æ¥" title="rsa åŠ å¯†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ip-ç™½åå•">ip ç™½åå•<a href="#ip-ç™½åå•" class="hash-link" aria-label="ip ç™½åå•çš„ç›´æ¥é“¾æ¥" title="ip ç™½åå•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸ºäº† é™åˆ¶ api æ¥å£çš„å®‰å…¨æ€§,é˜²æ­¢ æ¥å£ç­¾åæˆ–åŠ å¯†è¢«ç ´è§£,æ”»å‡»è€… å¯ä»¥åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šè¯·æ±‚æ”¹æ¥å£</p><p>åªæœ‰ åœ¨ç™½åå•ä¸­çš„ipåœ°å€,æ‰èƒ½æˆåŠŸè¯·æ±‚apiæ¥å£,å¦åˆ™è¿”å›æ— æƒé™</p><p>è¿™æ—¶å€™å°±éœ€è¦å¢åŠ webé˜²ç«å¢™äº†ï¼Œæ¯”å¦‚ï¼šModSecurity (todo ç ”ç©¶)ç­‰ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é™æµ">é™æµ<a href="#é™æµ" class="hash-link" aria-label="é™æµçš„ç›´æ¥é“¾æ¥" title="é™æµçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>é™æµæ–¹æ³•æœ‰ä¸‰ç§ï¼š</p><ol><li>å¯¹è¯·æ±‚ipåšé™æµ : ç­–ç•¥åˆ¶å®š</li><li>å¯¹è¯·æ±‚æ¥å£åšé™æµ</li><li>å¯¹è¯·æ±‚ç”¨æˆ·åšé™æµ</li></ol><p>æˆ‘ä»¬åœ¨å®é™…å·¥ä½œä¸­ï¼Œå¯ä»¥é€šè¿‡nginxï¼Œredisæˆ–è€…gatewayå®ç°é™æµçš„åŠŸèƒ½ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‚æ•°æ ¡éªŒ">å‚æ•°æ ¡éªŒ<a href="#å‚æ•°æ ¡éªŒ" class="hash-link" aria-label="å‚æ•°æ ¡éªŒçš„ç›´æ¥é“¾æ¥" title="å‚æ•°æ ¡éªŒçš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬éœ€è¦å¯¹APIæ¥å£åšå‚æ•°æ ¡éªŒï¼Œæ¯”å¦‚ï¼šæ ¡éªŒå¿…å¡«å­—æ®µæ˜¯å¦ä¸ºç©ºï¼Œæ ¡éªŒå­—æ®µç±»å‹ï¼Œæ ¡éªŒå­—æ®µé•¿åº¦ï¼Œæ ¡éªŒæšä¸¾å€¼ç­‰ç­‰ã€‚</p><p>è¿™æ ·åšå¯ä»¥æ‹¦æˆªä¸€äº›æ— æ•ˆçš„è¯·æ±‚ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»Ÿä¸€è¿”å›å€¼">ç»Ÿä¸€è¿”å›å€¼<a href="#ç»Ÿä¸€è¿”å›å€¼" class="hash-link" aria-label="ç»Ÿä¸€è¿”å›å€¼çš„ç›´æ¥é“¾æ¥" title="ç»Ÿä¸€è¿”å›å€¼çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä¹‹å‰è°ƒç”¨è¿‡åˆ«äººçš„APIæ¥å£ï¼Œæ­£å¸¸è¿”å›æ•°æ®æ˜¯ä¸€ç§jsonæ ¼å¼ï¼Œæ¯”å¦‚ï¼š</p><p>ç­¾åé”™è¯¯è¿”å›çš„jsonæ ¼å¼ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"code"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1001</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"message"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"ç­¾åé”™è¯¯"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"data"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æ²¡æœ‰æ•°æ®æƒé™è¿”å›çš„jsonæ ¼å¼ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"rt"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"errorMgt"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"æ²¡æœ‰æƒé™"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"result"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ç»Ÿä¸€å°è£…å¼‚å¸¸">ç»Ÿä¸€å°è£…å¼‚å¸¸<a href="#ç»Ÿä¸€å°è£…å¼‚å¸¸" class="hash-link" aria-label="ç»Ÿä¸€å°è£…å¼‚å¸¸çš„ç›´æ¥é“¾æ¥" title="ç»Ÿä¸€å°è£…å¼‚å¸¸çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬çš„APIæ¥å£éœ€è¦å¯¹å¼‚å¸¸è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§åœºæ™¯ï¼šæœ‰æ—¶å€™åœ¨APIæ¥å£ä¸­ï¼Œéœ€è¦è®¿é—®æ•°æ®åº“ï¼Œä½†è¡¨ä¸å­˜åœ¨ï¼Œæˆ–è€…sqlè¯­å¥å¼‚å¸¸ï¼Œå°±ä¼šç›´æ¥æŠŠsqlä¿¡æ¯åœ¨APIæ¥å£ä¸­ç›´æ¥è¿”å›ã€‚</p><p>è¿”å›å€¼ä¸­åŒ…å«äº†<code>å¼‚å¸¸å †æ ˆä¿¡æ¯</code>ã€<code>æ•°æ®åº“ä¿¡æ¯</code>ã€<code>é”™è¯¯ä»£ç </code>å’Œ<code>è¡Œæ•°</code>ç­‰ä¿¡æ¯ã€‚</p><p>å› æ­¤éå¸¸æœ‰å¿…è¦å¯¹APIæ¥å£ä¸­çš„å¼‚å¸¸åšç»Ÿä¸€å¤„ç†ï¼ŒæŠŠå¼‚å¸¸è½¬æ¢æˆè¿™æ ·ï¼š</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"code"</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"message"</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">"æœåŠ¡å™¨å†…éƒ¨é”™è¯¯"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">"data"</span><span class="token operator" style="color:#393A34">:</span><span class="token null keyword" style="color:#00009f">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>æˆ‘ä»¬å¯ä»¥åœ¨gatewayä¸­å¯¹å¼‚å¸¸è¿›è¡Œæ‹¦æˆªï¼Œåšç»Ÿä¸€å°è£…ï¼Œç„¶åç»™ç¬¬ä¸‰æ–¹å¹³å°çš„æ˜¯å¤„ç†åæ²¡æœ‰æ•æ„Ÿä¿¡æ¯çš„é”™è¯¯ä¿¡æ¯ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="è¯·æ±‚æ—¥å¿—">è¯·æ±‚æ—¥å¿—<a href="#è¯·æ±‚æ—¥å¿—" class="hash-link" aria-label="è¯·æ±‚æ—¥å¿—çš„ç›´æ¥é“¾æ¥" title="è¯·æ±‚æ—¥å¿—çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æˆ‘ä»¬éœ€è¦æŠŠAPIæ¥å£çš„è¯·æ±‚urlã€è¯·æ±‚å‚æ•°ã€è¯·æ±‚å¤´ã€è¯·æ±‚æ–¹å¼ã€å“åº”æ•°æ®å’Œå“åº”æ—¶é—´ç­‰ï¼Œè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‚</p><p>å½“ç„¶æœ‰äº›æ—¶å€™ï¼Œè¯·æ±‚æ—¥å¿—ä¸å…‰æ˜¯ä½ ä»¬å…¬å¸å¼€å‘äººå‘˜éœ€è¦æŸ¥çœ‹ï¼Œç¬¬ä¸‰æ–¹å¹³å°çš„ç”¨æˆ·ä¹Ÿéœ€è¦èƒ½æŸ¥çœ‹æ¥å£çš„è¯·æ±‚æ—¥å¿—ã€‚</p><p>è¿™æ—¶å°±éœ€è¦æŠŠæ—¥å¿—è½åœ°åˆ°æ•°æ®åº“ï¼Œæ¯”å¦‚ï¼šmongodbæˆ–è€…elastic searchï¼Œç„¶ååšä¸€ä¸ªUIé¡µé¢ï¼Œç»™ç¬¬ä¸‰æ–¹å¹³å°çš„ç”¨æˆ·å¼€é€šæŸ¥çœ‹æƒé™ã€‚è¿™æ ·ä»–ä»¬å°±èƒ½åœ¨å¤–ç½‘æŸ¥çœ‹è¯·æ±‚æ—¥å¿—äº†ï¼Œä»–ä»¬è‡ªå·±ä¹Ÿèƒ½å®šä½ä¸€éƒ¨åˆ†é—®é¢˜ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¹‚ç­‰è®¾è®¡">å¹‚ç­‰è®¾è®¡<a href="#å¹‚ç­‰è®¾è®¡" class="hash-link" aria-label="å¹‚ç­‰è®¾è®¡çš„ç›´æ¥é“¾æ¥" title="å¹‚ç­‰è®¾è®¡çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ç¬¬ä¸‰æ–¹å¹³å°ææœ‰å¯èƒ½åœ¨æçŸ­çš„æ—¶é—´å†…ï¼Œè¯·æ±‚æˆ‘ä»¬æ¥å£å¤šæ¬¡ï¼Œæ¯”å¦‚ï¼šåœ¨1ç§’å†…è¯·æ±‚ä¸¤æ¬¡ã€‚æœ‰å¯èƒ½æ˜¯ä»–ä»¬ä¸šåŠ¡ç³»ç»Ÿæœ‰bugï¼Œæˆ–è€…åœ¨åšæ¥å£è°ƒç”¨å¤±è´¥é‡è¯•ï¼Œå› æ­¤æˆ‘ä»¬çš„APIæ¥å£éœ€è¦åšå¹‚ç­‰è®¾è®¡ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´è¦æ”¯æŒåœ¨æçŸ­çš„æ—¶é—´å†…ï¼Œç¬¬ä¸‰æ–¹å¹³å°ç”¨ç›¸åŒçš„å‚æ•°è¯·æ±‚APIæ¥å£å¤šæ¬¡ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ•°æ®åº“ä¼šæ–°å¢æ•°æ®ï¼Œä½†ç¬¬äºŒæ¬¡è¯·æ±‚ä»¥åå°±ä¸ä¼šæ–°å¢æ•°æ®ï¼Œä½†ä¹Ÿä¼šè¿”å›æˆåŠŸã€‚</p><p>æˆ‘ä»¬åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œå¯ä»¥é€šè¿‡åœ¨æ•°æ®åº“ä¸­å¢åŠ å”¯ä¸€ç´¢å¼•ï¼Œæˆ–è€…åœ¨redisä¿å­˜requestIdå’Œè¯·æ±‚å‚æ¥ä¿è¯æ¥å£å¹‚ç­‰æ€§ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="é™åˆ¶è®°å½•æ¡æ•°">é™åˆ¶è®°å½•æ¡æ•°<a href="#é™åˆ¶è®°å½•æ¡æ•°" class="hash-link" aria-label="é™åˆ¶è®°å½•æ¡æ•°çš„ç›´æ¥é“¾æ¥" title="é™åˆ¶è®°å½•æ¡æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>å¯¹äºå¯¹æˆ‘æä¾›çš„æ‰¹é‡æ¥å£ï¼Œä¸€å®šè¦<code>é™åˆ¶è¯·æ±‚çš„è®°å½•æ¡æ•°</code>ã€‚</p><p>å¦‚æœè¯·æ±‚çš„æ•°æ®å¤ªå¤šï¼Œå¾ˆå®¹æ˜“é€ æˆAPIæ¥å£è¶…æ—¶ç­‰é—®é¢˜ï¼Œè®©APIæ¥å£å˜å¾—ä¸ç¨³å®šã€‚</p><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå»ºè®®ä¸€æ¬¡è¯·æ±‚ä¸­çš„å‚æ•°ï¼Œæœ€å¤šæ”¯æŒä¼ å…¥500æ¡è®°å½•ã€‚</p><p>å¦‚æœç”¨æˆ·ä¼ å…¥å¤šä½™500æ¡è®°å½•ï¼Œåˆ™æ¥å£ç›´æ¥ç»™å‡ºæç¤ºã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å‹æµ‹">å‹æµ‹<a href="#å‹æµ‹" class="hash-link" aria-label="å‹æµ‹çš„ç›´æ¥é“¾æ¥" title="å‹æµ‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸Šçº¿å‰æˆ‘ä»¬åŠ¡å¿…è¦å¯¹APIæ¥å£åšä¸€ä¸‹å‹åŠ›æµ‹è¯•ï¼ŒçŸ¥é“å„ä¸ªæ¥å£çš„<code>qps</code>æƒ…å†µã€‚</p><p>æˆ‘ä»¬åœ¨å·¥ä½œä¸­å¯ä»¥ç”¨<code>jmeter</code>æˆ–è€…<code>apache benc</code> æˆ– <code>ab</code>å¯¹APIæ¥å£åšå‹åŠ›æµ‹è¯•ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å¼‚æ­¥å¤„ç†">å¼‚æ­¥å¤„ç†<a href="#å¼‚æ­¥å¤„ç†" class="hash-link" aria-label="å¼‚æ­¥å¤„ç†çš„ç›´æ¥é“¾æ¥" title="å¼‚æ­¥å¤„ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>ä¸€èˆ¬çš„<code>API</code>æ¥å£çš„é€»è¾‘éƒ½æ˜¯åŒæ­¥å¤„ç†çš„ï¼Œè¯·æ±‚å®Œä¹‹åç«‹åˆ»è¿”å›ç»“æœã€‚</p><p>ä½†æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬çš„<code>API</code>æ¥å£é‡Œé¢çš„ä¸šåŠ¡é€»è¾‘éå¸¸å¤æ‚ï¼Œç‰¹åˆ«æ˜¯æœ‰äº›æ‰¹é‡æ¥å£ï¼Œå¦‚æœåŒæ­¥å¤„ç†ä¸šåŠ¡ï¼Œè€—æ—¶ä¼šéå¸¸é•¿ã€‚</p><p>è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†æå‡<code>API</code>æ¥å£çš„æ€§èƒ½ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹æˆå¼‚æ­¥å¤„ç†ã€‚</p><p>åœ¨APIæ¥å£ä¸­å¯ä»¥å‘é€ä¸€æ¡mqæ¶ˆæ¯ï¼Œç„¶åç›´æ¥è¿”å›æˆåŠŸã€‚ä¹‹åï¼Œæœ‰ä¸ªä¸“é—¨çš„mqæ¶ˆè´¹è€…å»å¼‚æ­¥æ¶ˆè´¹è¯¥æ¶ˆæ¯ï¼Œåšä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚</p><p>ç›´æ¥å¼‚æ­¥å¤„ç†çš„æ¥å£ï¼Œç¬¬ä¸‰æ–¹å¹³å°æœ‰ä¸¤ç§æ–¹å¼è·å–åˆ°ã€‚</p><p>ç¬¬ä¸€ç§æ–¹å¼æ˜¯ï¼šæˆ‘ä»¬å›è°ƒç¬¬ä¸‰æ–¹å¹³å°çš„æ¥å£ï¼Œå‘ŠçŸ¥ä»–ä»¬APIæ¥å£çš„å¤„ç†ç»“æœï¼Œå¾ˆå¤šæ”¯ä»˜æ¥å£å°±æ˜¯è¿™ä¹ˆç©çš„ã€‚</p><p>ç¬¬äºŒç§æ–¹å¼æ˜¯ï¼šç¬¬ä¸‰æ–¹å¹³å°é€šè¿‡è½®è¯¢è°ƒç”¨æˆ‘ä»¬å¦å¤–ä¸€ä¸ªæŸ¥è¯¢çŠ¶æ€çš„APIæ¥å£ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´æŸ¥è¯¢ä¸€æ¬¡çŠ¶æ€ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯ä¹‹å‰çš„é‚£ä¸ªAPIæ¥å£ä¸­çš„idé›†åˆã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="æ•°æ®è„±æ•">æ•°æ®è„±æ•<a href="#æ•°æ®è„±æ•" class="hash-link" aria-label="æ•°æ®è„±æ•çš„ç›´æ¥é“¾æ¥" title="æ•°æ®è„±æ•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>æœ‰æ—¶å€™ç¬¬ä¸‰æ–¹å¹³å°è°ƒç”¨æˆ‘ä»¬APIæ¥å£æ—¶ï¼Œè·å–çš„æ•°æ®ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯æ•æ„Ÿæ•°æ®ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·æ‰‹æœºå·ã€é“¶è¡Œå¡å·ç­‰ç­‰ã€‚</p><p>è¿™æ ·ä¿¡æ¯å¦‚æœé€šè¿‡APIæ¥å£ç›´æ¥ä¿ç•™åˆ°å¤–ç½‘ï¼Œæ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼Œå¾ˆå®¹æ˜“é€ æˆç”¨æˆ·éšç§æ•°æ®æ³„éœ²çš„é—®é¢˜ã€‚</p><p>è¿™å°±éœ€è¦å¯¹éƒ¨åˆ†æ•°æ®åšæ•°æ®è„±æ•äº†ã€‚</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="å®Œæ•´çš„æ¥å£æ–‡æ¡£">å®Œæ•´çš„æ¥å£æ–‡æ¡£<a href="#å®Œæ•´çš„æ¥å£æ–‡æ¡£" class="hash-link" aria-label="å®Œæ•´çš„æ¥å£æ–‡æ¡£çš„ç›´æ¥é“¾æ¥" title="å®Œæ•´çš„æ¥å£æ–‡æ¡£çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><p>è¯´å®è¯ï¼Œä¸€ä»½å®Œæ•´çš„APIæ¥å£æ–‡æ¡£ï¼Œåœ¨åŒæ–¹åšæ¥å£å¯¹æ¥æ—¶ï¼Œå¯ä»¥å‡å°‘å¾ˆå¤šæ²Ÿé€šæˆæœ¬ï¼Œè®©å¯¹æ–¹å°‘èµ°å¾ˆå¤šå¼¯è·¯ã€‚</p><p>æ¥å£æ–‡æ¡£ä¸­éœ€è¦åŒ…å«å¦‚ä¸‹ä¿¡æ¯ï¼š</p><ol><li>æ¥å£åœ°å€</li><li>è¯·æ±‚æ–¹å¼ï¼Œæ¯”å¦‚ï¼špostæˆ–get</li><li>è¯·æ±‚å‚æ•°å’Œå­—æ®µä»‹ç»</li><li>è¿”å›å€¼å’Œå­—æ®µä»‹ç»</li><li>è¿”å›ç å’Œé”™è¯¯ä¿¡æ¯</li><li>åŠ å¯†æˆ–ç­¾åç¤ºä¾‹</li><li>å®Œæ•´çš„è¯·æ±‚demo</li><li>é¢å¤–çš„è¯´æ˜ï¼Œæ¯”å¦‚ï¼šå¼€é€šipç™½åå•</li></ol><p>æ¥å£æ–‡æ¡£ä¸­æœ€å¥½èƒ½å¤Ÿç»Ÿä¸€æ¥å£å’Œå­—æ®µåç§°çš„å‘½åé£æ ¼ï¼Œæ¯”å¦‚éƒ½ç”¨<code>é©¼å³°æ ‡è¯†</code>å‘½åã€‚</p><p>ç»Ÿä¸€å­—æ®µçš„ç±»å‹å’Œé•¿åº¦ï¼Œæ¯”å¦‚ï¼šidå­—æ®µç”¨Longç±»å‹ï¼Œé•¿åº¦è§„å®š20ã€‚statuså­—æ®µç”¨intç±»å‹ï¼Œé•¿åº¦å›ºå®š2ç­‰ã€‚</p><p>ç»Ÿä¸€æ—¶é—´æ ¼å¼å­—æ®µï¼Œæ¯”å¦‚ï¼štimeç”¨Stringç±»å‹ï¼Œæ ¼å¼ä¸ºï¼šyyyy-MM-dd HH:mm:ssã€‚</p><p>æ¥å£æ–‡æ¡£ä¸­å†™æ˜AK/SKå’ŒåŸŸåï¼Œæ‰¾æŸæŸå•ç‹¬æä¾›ç­‰ã€‚</p>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>æ¥å£</category>
            <category>åŠ å¯†</category>
            <category>è§„èŒƒ</category>
        </item>
        <item>
            <title><![CDATA[umi4 é…ç½® antd é»˜è®¤ä¸­æ–‡æ¨¡å¼]]></title>
            <link>https://ahkevinxy.github.io/blog/2023/02/24/index</link>
            <guid>https://ahkevinxy.github.io/blog/2023/02/24/index</guid>
            <pubDate>Fri, 24 Feb 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[umi4 é…ç½® antd é»˜è®¤ä¸­æ–‡æ¨¡å¼]]></description>
            <content:encoded><![CDATA[<p>2023å¹´02æœˆ24æ—¥17:32:20
<img loading="lazy" src="https://www.dmoe.cc/random.php?type=2302231" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> defineConfig </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"umi"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> zhCN </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'antd/locale/zh_CN'</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">'@umijs/plugins/dist/antd'</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  antd</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    configProvider</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      locale</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> zhCN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  routes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"index"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"/docs"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> component</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"docs"</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  npmClient</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'yarn'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  base</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'/'</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  hash</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>umi</category>
            <category>antd</category>
        </item>
        <item>
            <title><![CDATA[Go ä¸ Java  RsaåŠ å¯†ç®—æ³•]]></title>
            <link>https://ahkevinxy.github.io/blog/2022/11/25/index</link>
            <guid>https://ahkevinxy.github.io/blog/2022/11/25/index</guid>
            <pubDate>Fri, 25 Nov 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[Go ä¸ Java  RsaåŠ å¯†ç®—æ³• å…¼å®¹æ€§åŠ å¯†è§£å†³æ–¹æ¡ˆ å®Œç¾è§£å†³è¯­è¨€ä¹‹é—´åŠ å¯†ä¸å…¼å®¹]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><p>âš¡ï¸ å’Œ ç”²æ–¹å¯¹æ¥ç³»ç»Ÿ é‡åˆ° java Rsa åŠ å¯†  go æ— æ³•è§£å¯†çš„é—®é¢˜</p><p><img loading="lazy" src="https://www.dmoe.cc/random.php?type=2211252" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>å¤‡æ³¨</div><div class="admonitionContent_S0QG"><ol><li>go ç”Ÿæˆçš„å…¬é’¥ ä¸èƒ½ç›´æ¥ç»™Javaä½¿ç”¨</li><li>javaçš„ å…¬é’¥ éœ€è¦æŠŠ  go ç”Ÿæˆçš„å¤´ <code>-----BEGIN RSA Public Key-----</code> å’Œ <code>-----END RSA Public Key-----</code> åˆ é™¤ ä¸èƒ½ä¿å­˜å³å¯</li></ol></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="go--ä»£ç ">go  ä»£ç <a href="#go--ä»£ç " class="hash-link" aria-label="go  ä»£ç çš„ç›´æ¥é“¾æ¥" title="go  ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> rsa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"crypto/rand"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"crypto/rsa"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"crypto/x509"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"encoding/pem"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"os"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"crypto"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"encoding/base64"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"encoding/pem"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"errors"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"fmt"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"os"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token string" style="color:#e3116c">"strings"</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//RSAè§£å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Decrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æ‰“å¼€æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è·å–æ–‡ä»¶å†…å®¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Stat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> buf </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//pemè§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> pem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//X509è§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> privateKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> x509</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ParsePKCS1PrivateKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> plainText</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DecryptPKCS1v15</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> privateKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cipherText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è¿”å›æ˜æ–‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> plainText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// DecryptByString</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Description: è§£å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Author ahKevinXy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Date 2022-11-22 16:50:15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DecryptByString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æ‰“å¼€æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> content </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Base64Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//X509è§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> pem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> privateKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> x509</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ParsePKCS1PrivateKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//å¯¹å¯†æ–‡è¿›è¡Œè§£å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> plainText</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DecryptPKCS1v15</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> privateKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è¿”å›æ˜æ–‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> plainText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//RSAåŠ å¯† é€šè¿‡ç§é’¥è·¯å¾„</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Encrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plainText </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//æ‰“å¼€æ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Close</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è¯»å–æ–‡ä»¶çš„å†…å®¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Stat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> buf </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">make</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> info</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Size</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//pemè§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> pem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buf</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//x509è§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> publicKeyInterface</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> x509</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ParsePKIXPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//ç±»å‹æ–­è¨€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> publicKey </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> publicKeyInterface</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">rsa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PublicKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//å¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cipherText</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EncryptPKCS1v15</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> publicKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> plainText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è¿”å›å¯†æ–‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> cipherText</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// é€šè¿‡ç›´æ¥ä¼  string æ–¹å¼</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">EncryptByString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plainText </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> public </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> pem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">public</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//x509è§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> publicKeyInterface</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> x509</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">ParsePKIXPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//ç±»å‹æ–­è¨€</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> publicKey </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> publicKeyInterface</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">rsa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PublicKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//å¯¹æ˜æ–‡è¿›è¡ŒåŠ å¯†</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> cipherText</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> rsa</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EncryptPKCS1v15</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">rand</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Reader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> publicKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">plainText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> err </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">nil</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">panic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//è¿”å›å¯†æ–‡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> fmt</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Base64EncodeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">string</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Base64EncodeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StdEncoding</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">EncodeToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token function" style="color:#d73a49">byte</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Base64Decode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Description: base64è§£ç </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Author ahKevinXy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// @Date 2022-11-22 17:04:52</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Base64Decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token builtin">byte</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> decodedByte</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">StdEncoding</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">DecodeString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> decodedByte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="java-ä»£ç ">java ä»£ç <a href="#java-ä»£ç " class="hash-link" aria-label="java ä»£ç çš„ç›´æ¥é“¾æ¥" title="java ä»£ç çš„ç›´æ¥é“¾æ¥">â€‹</a></h2><div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">javax</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">crypto</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Cipher</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">io</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">ByteArrayOutputStream</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">interfaces</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RSAPrivateKey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">interfaces</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">RSAPublicKey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">InvalidKeySpecException</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">PKCS8EncodedKeySpec</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">security</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">spec</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">X509EncodedKeySpec</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Base64</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">HashMap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token import namespace" style="opacity:0.7">java</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import namespace" style="opacity:0.7">util</span><span class="token import namespace punctuation" style="opacity:0.7;color:#393A34">.</span><span class="token import class-name">Map</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">RSATest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">KEY_ALGORITHM</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"RSA"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// å…¬é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PUBLIC_KEY</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"xxxxxåŠ å¯†å…¬é’¥"</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MAX_ENCRYPT_BLOCK</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">117</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">final</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">MAX_DECRYPT_BLOCK</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">128</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">Exception</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> cipherText</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> content </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•åŠ å¯†å¯†ç "</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">String</span><span class="token plain"> publicKey </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PUBLIC_KEY</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        cipherText </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">content</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> publicKey</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">System</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">println</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cipherText</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è·å–å…¬é’¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">PublicKey</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> publicKeyString</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throws</span><span class="token plain"> </span><span class="token class-name">NoSuchAlgorithmException</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">InvalidKeySpecException</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> publicKeyByte </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getDecoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">decode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">publicKeyString</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">X509EncodedKeySpec</span><span class="token plain"> keySpec </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">X509EncodedKeySpec</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">publicKeyByte</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token class-name">KeyFactory</span><span class="token plain"> keyFactory </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">KeyFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">KEY_ALGORITHM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> keyFactory</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">generatePublic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">keySpec</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">encrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">String</span><span class="token plain"> text</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">String</span><span class="token plain"> publicKeyStr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token class-name">Cipher</span><span class="token plain"> cipher </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Cipher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token constant" style="color:#36acaa">KEY_ALGORITHM</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cipher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Cipher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">ENCRYPT_MODE</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPublicKey</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">publicKeyStr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">byte</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> tempBytes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cipher</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">doFinal</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getBytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"UTF-8"</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token class-name">Base64</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getEncoder</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">encodeToString</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tempBytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">RuntimeException</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">"åŠ å¯†å­—ç¬¦ä¸²["</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> text </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">"]æ—¶é‡åˆ°å¼‚å¸¸"</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> e</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <author>ahkevinxy@gmail.com (ahKevinXy)</author>
            <category>Go</category>
            <category>Java</category>
            <category>åŠ å¯†</category>
            <category>RSA</category>
        </item>
        <item>
            <title><![CDATA[ç¨‹åºå‘˜åˆ°æ¶æ„å¸ˆ]]></title>
            <link>https://ahkevinxy.github.io/blog/2022/09/22/index</link>
            <guid>https://ahkevinxy.github.io/blog/2022/09/22/index</guid>
            <pubDate>Thu, 22 Sep 2022 00:00:00 GMT</pubDate>
            <description><![CDATA[éšæœºå›¾ç‰‡]]></description>
            <content:encoded><![CDATA[<p><a href="https://www.dmoe.cc/random.php" target="_blank" rel="noopener noreferrer"><img loading="lazy" src="https://www.dmoe.cc/random.php" alt="éšæœºå›¾ç‰‡" class="img_ev3q"></a></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">è¿˜æ˜¯ç›´æ¥æ”¾å¼ƒå§</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
        </item>
    </channel>
</rss>