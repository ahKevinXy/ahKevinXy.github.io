"use strict";(self.webpackChunkah_kevin_xy=self.webpackChunkah_kevin_xy||[]).push([[30528],{97934:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>s,contentTitle:()=>a,default:()=>f,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var i=t(85893),r=t(11151);const l={title:"Go  File \u5904\u7406",tags:["Go"],authors:"ahKevinXy",description:"go \u5982\u4f55\u8bfb\u53d6\u6587\u4ef6 \u5982\u4f55\u751f\u6210\u6587\u4ef6  go \u6587\u4ef6\u5904\u7406\u65b9\u6cd5\u5408\u96c6 go \u5982\u4f55\u5927\u6587\u4ef6\u8bfb\u53d6  \u5982\u4f55\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6",image:"https://source.unsplash.com/random?people&22"},a="go \u5982\u4f55\u5904\u7406\u6587\u4ef6",o={permalink:"/blog/2023/08/08/go-file",source:"@site/blog/2023/08/08/go-file.md",title:"Go  File \u5904\u7406",description:"go \u5982\u4f55\u8bfb\u53d6\u6587\u4ef6 \u5982\u4f55\u751f\u6210\u6587\u4ef6  go \u6587\u4ef6\u5904\u7406\u65b9\u6cd5\u5408\u96c6 go \u5982\u4f55\u5927\u6587\u4ef6\u8bfb\u53d6  \u5982\u4f55\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6",date:"2023-08-08T00:00:00.000Z",formattedDate:"2023\u5e748\u67088\u65e5",tags:[{label:"Go",permalink:"/blog/tags/go"}],readingTime:2.565,hasTruncateMarker:!0,authors:[{name:"ahKevinXy",title:"\u4f5c\u8005",url:"https://github.com/ahKevinXy",email:"ahkevinxy@gmail.com",imageURL:"/img/headers.png",key:"ahKevinXy"}],frontMatter:{title:"Go  File \u5904\u7406",tags:["Go"],authors:"ahKevinXy",description:"go \u5982\u4f55\u8bfb\u53d6\u6587\u4ef6 \u5982\u4f55\u751f\u6210\u6587\u4ef6  go \u6587\u4ef6\u5904\u7406\u65b9\u6cd5\u5408\u96c6 go \u5982\u4f55\u5927\u6587\u4ef6\u8bfb\u53d6  \u5982\u4f55\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6",image:"https://source.unsplash.com/random?people&22"},unlisted:!1,prevItem:{title:"Electron \u5165\u95e8",permalink:"/blog/2023/08/12/electron"},nextItem:{title:"Go  json \u5904\u7406",permalink:"/blog/2023/08/08/go-json"}},s={authorsImageUrls:[void 0]},c=[{value:"<code>os.ReadFile</code> \u6307\u5b9a\u6587\u4ef6\u8bfb\u53d6\u6587\u4ef6",id:"osreadfile-\u6307\u5b9a\u6587\u4ef6\u8bfb\u53d6\u6587\u4ef6",level:2},{value:"<code>ioutil.ReadFile</code> \u8bfb\u53d6\u6587\u4ef6",id:"ioutilreadfile-\u8bfb\u53d6\u6587\u4ef6",level:2},{value:"<code>os.Open</code> \u901a\u8fc7\u53e5\u67c4\u6253\u5f00\u6587\u4ef6",id:"osopen-\u901a\u8fc7\u53e5\u67c4\u6253\u5f00\u6587\u4ef6",level:2},{value:"<code>os.OpenFile</code> \u6253\u5f00\u6587\u4ef6",id:"osopenfile-\u6253\u5f00\u6587\u4ef6",level:2},{value:"\u5207\u7247\u8bfb\u53d6\u6587\u4ef6 \u6309\u7167\u884c\u8bfb\u53d6",id:"\u5207\u7247\u8bfb\u53d6\u6587\u4ef6-\u6309\u7167\u884c\u8bfb\u53d6",level:2},{value:"\u6309\u7167\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6",id:"\u6309\u7167\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6",level:2},{value:"\u4f7f\u7528<code>syscall</code> \u5e93",id:"\u4f7f\u7528syscall-\u5e93",level:2}];function d(n){const e={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",...(0,r.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:"https://source.unsplash.com/random?nature&21",alt:"\u9884\u89c8\u56fe"})}),"\n",(0,i.jsxs)(e.h2,{id:"osreadfile-\u6307\u5b9a\u6587\u4ef6\u8bfb\u53d6\u6587\u4ef6",children:[(0,i.jsx)(e.code,{children:"os.ReadFile"})," \u6307\u5b9a\u6587\u4ef6\u8bfb\u53d6\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"os"\n)\n\nfunc main() {\n\tfileName := "test.txt"\n\tcontent, err := os.ReadFile(fileName)\n\tif err != nil {\n\t\treturn\n\t}\n\tfmt.Println(string(content))\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"ioutilreadfile-\u8bfb\u53d6\u6587\u4ef6",children:[(0,i.jsx)(e.code,{children:"ioutil.ReadFile"})," \u8bfb\u53d6\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"io/ioutil"\n)\n\nfunc main() {\n\n\tfileName := "test.txt"\n\tcontent, err := ioutil.ReadFile(fileName)\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\t\n\t\treturn\n\t}\n\tfmt.Println(string(content))\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"osopen-\u901a\u8fc7\u53e5\u67c4\u6253\u5f00\u6587\u4ef6",children:[(0,i.jsx)(e.code,{children:"os.Open"})," \u901a\u8fc7\u53e5\u67c4\u6253\u5f00\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"io/ioutil"\n\t"os"\n)\n\nfunc main() {\n\tfileName := "test.txt"\n\tfile, err := os.Open(fileName)\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\n\tdefer file.Close()\n\n\tcontent, err := ioutil.ReadAll(file)\n\t\n\tif err !=nil {\n\t\t\n\t\tfmt.Println(err)\n\t\treturn\n    }\n\t\n\tfmt.Println(string(content))\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"osopenfile-\u6253\u5f00\u6587\u4ef6",children:[(0,i.jsx)(e.code,{children:"os.OpenFile"})," \u6253\u5f00\u6587\u4ef6"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"os"\n)\n\nfunc main() {\n\tfileName := "test.txt"\n\t//  If the file does not exist, and the O_CREATE flag\n\t// flag\uff1a\u6587\u4ef6\u7684\u6253\u5f00\u65b9\u5f0f\uff0c\u5982\u53ea\u8bfb\u3001\u53ea\u5199\u3001\u8bfb\u5199\u7b49\n\t//\u6587\u4ef6\u7684\u8bfb\u5199\u6743\u9650 \n\tfile, err := os.OpenFile(fileName, os.O_RDONLY, 0)\n\n\tif err != nil {\n\n\t\tfmt.Println(err)\n\t\t\n\t\treturn\n\t}\n\n\tdefer file.Close()\n\n\tcontent, err := ioutil.ReadAll(file)\n\n\tif err !=nil {\n\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\n\tfmt.Println(string(content))\n\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u5207\u7247\u8bfb\u53d6\u6587\u4ef6-\u6309\u7167\u884c\u8bfb\u53d6",children:"\u5207\u7247\u8bfb\u53d6\u6587\u4ef6 \u6309\u7167\u884c\u8bfb\u53d6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"bufio"\n\t"fmt"\n\t"io"\n\t"os"\n\t"strings"\n)\n\nfunc main() {\n\tfileName := "test.txt"\n\tfile, err := os.Open(fileName)\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\n\tdefer file.Close()\n\t// \u89e3\u51b3 content \u6587\u4ef6\u8fc7\u5927\u5bfc\u81f4\n\t// content, err := ioutil.ReadAll(file)\n\n\tr := bufio.NewReader(file)\n\tfor {\n\t\tlineBytes, err := r.ReadBytes(\'\\n\')\n\t\tline := strings.TrimSpace(string(lineBytes))\n\n\t\tif err != nil && err != io.EOF {\n\n\t\t\treturn\n\t\t}\n\t\tif err == = io.EOF {\n\t\t\tbreak\n\t\t}\n\n\t\tfmt.Println(line)\n\t}\n\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u6309\u7167\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6",children:"\u6309\u7167\u56fa\u5b9a\u957f\u5ea6\u8bfb\u53d6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"bufio"\n\t"fmt"\n\t"io"\n\t"os"\n)\n\nfunc main() {\n\tfile, err := os.Open("test.txt")\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn\n\t}\n\n\tr := bufio.NewReader(file)\n\n\tbuf := make([]byte, 1024)\n\tfor {\n\t\tn, err := r.Read(buf)\n\t\tif err != nil && err != io.EOF {\n\t\t\tfmt.Println(err)\n\t\t\treturn\n        }\n\t\tif n ==0 {\n\t\t\tbreak\n        }\n\t\tfmt.Println(string(buf[:n]))\n\t\t\n\t}\n}\n'})}),"\n",(0,i.jsxs)(e.h2,{id:"\u4f7f\u7528syscall-\u5e93",children:["\u4f7f\u7528",(0,i.jsx)(e.code,{children:"syscall"})," \u5e93"]}),"\n",(0,i.jsx)(e.p,{children:"\u4f1a\u6bcf\u6b21\u8bfb\u53d6  100 \u5b57\u8282\u7684\u6570\u636e\uff0c\u5e76\u53d1\u9001\u5230\u901a\u9053\u4e2d\uff0c\u7531\u53e6\u5916\u4e00\u4e2a\u534f\u7a0b\u8fdb\u884c\u8bfb\u53d6\u5e76\u6253\u5370\u51fa\u6765"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-go",children:'package main\n \nimport (\n    "fmt"\n    "sync"\n    "syscall"\n)\n \nfunc main() {\n    fd, err := syscall.Open("christmas_apple.py", syscall.O_RDONLY, 0)\n    if err != nil {\n        fmt.Println("Failed on open: ", err)\n    }\n    defer syscall.Close(fd)\n \n    var wg sync.WaitGroup\n    wg.Add(2)\n    dataChan := make(chan []byte)\n    go func() {\n        wg.Done()\n        for {\n            data := make([]byte, 100)\n            n, _ := syscall.Read(fd, data)\n            if n == 0 {\n                break\n            }\n            dataChan <- data\n        }\n        close(dataChan)\n    }()\n \n    go func() {\n        defer wg.Done()\n        for {\n            select {\n            case data, ok := <-dataChan:\n                if !ok {\n                    return\n                }\n \n                fmt.Printf(string(data))\n            default:\n \n            }\n        }\n    }()\n    wg.Wait()\n}\n'})})]})}function f(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},11151:(n,e,t)=>{t.d(e,{Z:()=>o,a:()=>a});var i=t(67294);const r={},l=i.createContext(r);function a(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);