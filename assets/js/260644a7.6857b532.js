"use strict";(self.webpackChunkah_kevin_xy=self.webpackChunkah_kevin_xy||[]).push([[63837],{12991:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var r=n(74848),s=n(28453);const i={title:"\u5bfc\u51fa\u6587\u4ef6\u53ca\u538b\u7f29",tags:["\u5bfc\u51fa"],authors:"Flankx",description:"Java \u5bfc\u51fa\u6587\u4ef6 \u538b\u7f29 Java\u5982\u4f55\u5bfc\u51fa\u6587\u4ef6 Java\u5982\u4f55\u538b\u7f29\u6587\u4ef6",image:"https://source.unsplash.com/random?people&17"},a="\u5bfc\u51fa\u6587\u4ef6\u53ca\u538b\u7f29",c={permalink:"/blog/2023/07/13/export-1",source:"@site/blog/2023/07/13/export-1.md",title:"\u5bfc\u51fa\u6587\u4ef6\u53ca\u538b\u7f29",description:"Java \u5bfc\u51fa\u6587\u4ef6 \u538b\u7f29 Java\u5982\u4f55\u5bfc\u51fa\u6587\u4ef6 Java\u5982\u4f55\u538b\u7f29\u6587\u4ef6",date:"2023-07-13T00:00:00.000Z",formattedDate:"2023\u5e747\u670813\u65e5",tags:[{label:"\u5bfc\u51fa",permalink:"/blog/tags/\u5bfc\u51fa"}],readingTime:1.285,hasTruncateMarker:!0,authors:[{name:"flankx",title:"\u4f5c\u8005",url:"https://github.com/flankx",email:"137472591@qq.com",imageURL:"https://avatars.githubusercontent.com/u/30172229",key:"Flankx"}],frontMatter:{title:"\u5bfc\u51fa\u6587\u4ef6\u53ca\u538b\u7f29",tags:["\u5bfc\u51fa"],authors:"Flankx",description:"Java \u5bfc\u51fa\u6587\u4ef6 \u538b\u7f29 Java\u5982\u4f55\u5bfc\u51fa\u6587\u4ef6 Java\u5982\u4f55\u538b\u7f29\u6587\u4ef6",image:"https://source.unsplash.com/random?people&17"},unlisted:!1,prevItem:{title:"\u56fd\u5185\u82f9\u679c\u5f00\u53d1\u8005\u8d26\u53f7\u7533\u8bf7\u53ca\u4e0a\u7ebf",permalink:"/blog/2023/07/13/apple_develop"},nextItem:{title:"\u5f00\u6e90\u7075\u5de5\u7cfb\u7edf",permalink:"/blog/2023/07/13/freelance"}},o={authorsImageUrls:[void 0]},l=[{value:"1 \u5bfc\u51fa\u6587\u4ef6",id:"1-\u5bfc\u51fa\u6587\u4ef6",level:2},{value:"2 \u5bfc\u51fa\u6587\u4ef6\u5e76\u538b\u7f29",id:"2-\u5bfc\u51fa\u6587\u4ef6\u5e76\u538b\u7f29",level:2},{value:"2.1 \u4f7f\u7528\u538b\u7f29\u5de5\u5177<code>Apache Commons Compress</code>",id:"21-\u4f7f\u7528\u538b\u7f29\u5de5\u5177apache-commons-compress",level:3},{value:"3 \u793a\u4f8b\u4ee3\u7801",id:"3-\u793a\u4f8b\u4ee3\u7801",level:2}];function d(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"1-\u5bfc\u51fa\u6587\u4ef6",children:"1 \u5bfc\u51fa\u6587\u4ef6"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"1.1 \u8bbe\u7f6e\u8fd4\u56de\u7684\u8bf7\u6c42\u5934"}),"\n"]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Response Header"}),(0,r.jsx)(t.th,{children:"Value"}),(0,r.jsx)(t.th,{children:"Desc"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Content-type"}),(0,r.jsx)(t.td,{children:"application/json"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type",children:"\u8d44\u6e90\u7684MIME\u7c7b\u578b"})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Content-Disposition"}),(0,r.jsx)(t.td,{children:"attachment;filename=xxx.json"}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition",children:"\u5c55\u793a\u5f62\u5f0f"})})]})]})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"1.2 \u83b7\u53d6\u8bf7\u6c42\u5bfc\u51fa\u7684\u8d44\u6e90\u5e76\u5199\u5165\u8f93\u51fa\u6d41"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'response.setCharacterEncoding("UTF-8");\nresponse.setContentType("application/json");\nresponse.addHeader("Content-Disposition", "attachment;filename=xxx.json");\n    \nString content = ...; // \u6b64\u5904\u5bfc\u51fa\u5b57\u7b26\u4e32\ntry (ServletOutputStream outStr = response.getOutputStream();\n    BufferedOutputStream buff = new BufferedOutputStream(outStr)) {\n    buff.write(content.getBytes(StandardCharsets.UTF_8));\n    buff.flush();\n} catch (Exception e) {\n    e.printStackTrace();\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"2-\u5bfc\u51fa\u6587\u4ef6\u5e76\u538b\u7f29",children:"2 \u5bfc\u51fa\u6587\u4ef6\u5e76\u538b\u7f29"}),"\n",(0,r.jsxs)(t.h3,{id:"21-\u4f7f\u7528\u538b\u7f29\u5de5\u5177apache-commons-compress",children:["2.1 \u4f7f\u7528\u538b\u7f29\u5de5\u5177",(0,r.jsx)(t.code,{children:"Apache Commons Compress"})]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\u5f15\u5165",(0,r.jsx)(t.code,{children:"POM"}),"\u4f9d\u8d56"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-xml",children:"\x3c!-- https://mvnrepository.com/artifact/org.apache.commons/commons-compress --\x3e\n<dependency>\n    <groupId>org.apache.commons</groupId>\n    <artifactId>commons-compress</artifactId>\n    <version>1.22</version>\n</dependency>\n"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\u52a0\u5165",(0,r.jsx)(t.code,{children:"Zip"}),"\u538b\u7f29"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:"ZipArchiveOutputStream zipOutput = ...;\nZipArchiveEntry entry = new ZipArchiveEntry(name);\nentry.setSize(size);\nzipOutput.putArchiveEntry(entry);\nzipOutput.write(contentOfEntry);\nzipOutput.closeArchiveEntry();\n"})}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["\u591a\u4e2a\u6587\u4ef6\u52a0\u5165",(0,r.jsx)(t.code,{children:"Zip"}),"\u538b\u7f29"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'response.setCharacterEncoding("UTF-8");\nresponse.addHeader("Content-Disposition", "attachment;filename=xxx.zip");\nresponse.setContentType("application/zip");\n    \nList<content> texts = ...; // \u6b64\u5904\u5bfc\u51fa\u5b57\u7b26\u4e32\u5217\u8868\ntry (ServletOutputStream outStr = response.getOutputStream();\n    ZipArchiveOutputStream zipOutput = new ZipArchiveOutputStream(outStr)) {\n    for (int i = 0; i < texts.size(); i++) {\n        byte[] content = texts.get(i).getBytes(StandardCharsets.UTF_8)\n        String entryName = "xxx_" + i + ".txt" \n        ZipArchiveEntry entry = new ZipArchiveEntry (entryName);\n        entry.setSize(content.length);\n        zipOutput.putArchiveEntry(entry);\n        zipOutput.write(content);\n        zipOutput.closeArchiveEntry();\n    }\n} catch (IOException e) {\n     e.printStackTrace();\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"3-\u793a\u4f8b\u4ee3\u7801",children:"3 \u793a\u4f8b\u4ee3\u7801"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/flankx/flankdemo",children:"README"})}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var r=n(96540);const s={},i=r.createContext(s);function a(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);